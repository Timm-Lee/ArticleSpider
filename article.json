{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/2b048a376d17d78046f1236ad6c236e0.gif"], "comment_nums": 0, "title": "卷积神经网络初探", "url_object_id": "915d3e3c1a009e1659e702c5cdb8791e", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/findbill/blog/550565\">Lee的白板报  </a>   </div><h1>前言</h1>\n<p>目前为止我已经完整地学完了三个机器学习教程：包括“Stanford CS229”，”Machine Learning on Coursrea” 和 “Stanford UFLDL”，卷积神经网络是其中最抽象的概念。</p>\n<p>维基百科对卷积的数学定义为：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/711cebd742859cd511d3bd37b80f6368.png\"></p>\n<p>由于卷积常用与信号处理，很多人基于“输入-&gt;系统-&gt;响应”这一模型来解释卷积的物理意义，这里转载一个非常通俗的版本：</p>\n<blockquote><p>比如说你的老板命令你干活，你却到楼下打台球去了，后来被老板发现，他非常气愤，扇了你一巴掌（注意，这就是输入信号，脉冲），于是你的脸上会渐渐地鼓起来一个包，你的脸就是一个系统，而鼓起来的包就是你的脸对巴掌的响应，好，这样就和信号系统建立起来意义对应的联系。下面还需要一些假设来保证论证的严谨：假定你的脸是线性时不变系统，也就是说，无论什么时候老板打你一巴掌，打在你脸的同一位置，你的脸上总是会在相同的时间间隔内鼓起来一个相同高度的包，并且假定以鼓起来的包的大小作为系统输出。好了，下面可以进入核心内容——卷积了！</p>\n<p>如果你每天都到地下去打台球，那么老板每天都要扇你一巴掌，不过当老板打你一巴掌后，你5分钟就消肿了，所以时间长了，你甚至就适应这种生活了……如果有一天，老板忍无可忍，以0.5秒的间隔开始不间断的扇你的过程，这样问题就来了，第一次扇你鼓起来的包还没消肿，第二个巴掌就来了，你脸上的包就可能鼓起来两倍高，老板不断扇你，脉冲不断作用在你脸上，效果不断叠加了，这样这些效果就可以求和了，结果就是你脸上的包的高度随时间变化的一个函数了（注意理解）；如果老板再狠一点，频率越来越高，以至于你都辨别不清时间间隔了，那么，求和就变成积分了。可以这样理解，在这个过程中的某一固定的时刻，你的脸上的包的鼓起程度和什么有关呢？和之前每次打你都有关！但是各次的贡献是不一样的，越早打的巴掌，贡献越小，所以这就是说，某一时刻的输出是之前很多次输入乘以各自的衰减系数之后的叠加而形成某一点的输出，然后再把不同时刻的输出点放在一起，形成一个函数，这就是卷积，卷积之后的函数就是你脸上的包的大小随时间变化的函数。本来你的包几分钟就可以消肿，可是如果连续打，几个小时也消不了肿了，这难道不是一种平滑过程么？反映到剑桥大学的公式上，f(a)就是第a个巴掌，g(x-a)就是第a个巴掌在x时刻的作用程度，乘起来再叠加就ok了，大家说是不是这个道理呢？我想这个例子已经非常形象了，你对卷积有了更加具体深刻的了解了吗？</p></blockquote>\n<p>这是一些尝试解释卷积的文章：</p>\n<p><a href=\"http://www.guokr.com/post/342476/\" target=\"_blank\" rel=\"nofollow\">http://www.guokr.com/post/342476/</a></p>\n<p><a href=\"http://blog.csdn.net/yeeman/article/details/6325693\" target=\"_blank\" rel=\"nofollow\">http://blog.csdn.net/yeeman/article/details/6325693</a></p>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E5%8D%B7%E7%A7%AF\" target=\"_blank\" rel=\"nofollow\">https://zh.wikipedia.org/wiki/%E5%8D%B7%E7%A7%AF</a></p>\n<p>而在图像处理中通常使用离散形式的卷积，在下一节中介绍。</p>\n<h1>卷积特征提取（convolution）</h1>\n<h2>卷积特征提取的过程</h2>\n<p>假设有一个稀疏自编码器 SAE，训练使用的是 3×3 的小图。将 SAE 用作深度网络的隐藏层时，它依然只接受 3×3 的数据作为输入，且假设这个隐藏层有 k 个单元（每个单元也被称为一个卷积核 – Convolution Kernel，由对应的权值向量 W 和 b 来体现）。</p>\n<p>每个隐藏单元的输入是用自己的权值向量 W 与 3×3 的小图做内积，再与截距项相加得到的：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/e6e0ba2b5d147de8a83f620c38133c07.png\"></p>\n<p>假如深度网络的输入是 5×5 的大图，SAE 要从中提取特征，必须将 5×5 的大图分解成若干 3×3 的小图并分别提取它们的特征。分解方法就是：从大图的 （1, 1）、（1, 2）、（1, 3）、…  、（3, 3）等 9 个点开始分别作为小图的左上角起点，依次截取 9 张带有重合区域的小图，然后分别提取这 9 张小图的特征：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/2b048a376d17d78046f1236ad6c236e0.gif\"></p>\n<p>所以，每个隐藏单元将有 9 个输入，不同于之前的 1 个。然后将所有输入分别导入激活函数计算相应的输出，卷积特征提取的工作就完成了。</p>\n<p>对于本例，隐藏层所提取的特征共有 9×k 个；更一般化地，如果大图尺寸是 r×c，小图尺寸是 a×b，那么所提取特征的个数为：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/f48ab316e89214c48ebc63643200b15e.png\"></p>\n<h2>卷积特征提取的原理</h2>\n<p>卷积特征提取利用了自然图像的统计平稳性（Stationary）:</p>\n<blockquote><p>自然图像有其固有特性，也就是说，图像的一部分的统计特性与其他部分是一样的。这也意味着我们在这一部分学习的特征也能用在另一部分上，所以对于这个图像上的所有位置，我们都能使用同样的学习特征。</p></blockquote>\n<h1>池化（Pooling）</h1>\n<h2>池化过程</h2>\n<p>在完成卷积特征提取之后，对于每一个隐藏单元，它都提取到 (r-a+1)×(c-b+1)个特征，把它看做一个矩阵，并在这个矩阵上划分出几个不重合的区域，然后在每个区域上计算该区域内特征的均值或最大值，然后用这些均值或最大值参与后续的训练，这个过程就是【池化】。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/87ab711837d42cf5888c15191090a2fb.gif\"></p>\n<p> </p>\n<h2>池化的优点</h2>\n<ol>\n<li>显著减少了参数数量</li>\n<li>池化单元具有平移不变性 (translation invariant)有一个 12×12 的 feature map (隐藏层的一个单元提取到的卷积特征矩阵)，池化区域的大小为 6×6，那么池化后，feature map 的维度变为 2×2。\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/899ae16aaf21c2c3ce1d97bc57e91880.png\"></p>\n<p>假设原 feature map 中灰色元素的值为 1，白色元素的值为 0。如果采用 max pooling，那么池化后左上角窗口的值为 1。如果将图像向右平移一个像素：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/bccd72f2b62ab54b9a2b630a2142e26b.png\"></p>\n<p>池化后左上角窗口的值还是 1。如果将图像缩小：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/daed1dda13a01dd415608f960e08f5ce.png\"></p>\n<p>池化后左上角窗口的值依然是 1。</p>\n<p>通常我们认为图像经过有限的平移、缩放、旋转，不应改变其识别结果，这就要求经过平移、缩放、旋转的图片所提取的特征与原图所提取的特征相同或相似，因此分类器才能把它们识别成同一类。</p></li>\n</ol>\n<h2>几种池化方式</h2>\n<p>比较主流的池化方式有如下几种：</p>\n<ol>\n<li>一般池化（General Pooling）: max pooling 和 average pooling现在已经知道了 max pooling 与 average pooling 的几何意义，还有一个问题需要思考：它们分别适用于那些场合？在不同的场合下，它们的表现有什么不一样？为什么不一样？\n<p>网络上有人这样区分 max pooling 和 average pooling：</p>\n<p>“average对背景保留更好，max对纹理提取更好”。</p>\n<p>限于篇幅以及我的理解还不深，就不展开讨论了，如果以后需要，我会深入研究一下。</p></li>\n<li>重叠池化（Overlapping Pooling）重叠池化的相邻池化窗口之间会有重叠区域。</li>\n<li>空间金字塔池化（Spatial Pyramid Pooling）空间金字塔池化拓展了卷积神经网络的实用性，使它能够以任意尺寸的图片作为输入。</li>\n<li>下面列出一些研究池化的论文：<a href=\"http://yann.lecun.com/exdb/publis/pdf/boureau-icml-10.pdf\" target=\"_blank\" rel=\"nofollow\">http://yann.lecun.com/exdb/publis/pdf/boureau-icml-10.pdf</a>\n<p><a href=\"http://yann.lecun.com/exdb/publis/pdf/boureau-cvpr-10.pdf\" target=\"_blank\" rel=\"nofollow\">http://yann.lecun.com/exdb/publis/pdf/boureau-cvpr-10.pdf</a></p>\n<p><a href=\"http://yann.lecun.com/exdb/publis/pdf/boureau-iccv-11.pdf\" target=\"_blank\" rel=\"nofollow\">http://yann.lecun.com/exdb/publis/pdf/boureau-iccv-11.pdf</a></p>\n<p><a href=\"http://ais.uni-bonn.de/papers/icann2010_maxpool.pdf\" target=\"_blank\" rel=\"nofollow\">http://ais.uni-bonn.de/papers/icann2010_maxpool.pdf</a></p></li>\n</ol>\n<h1>汇总</h1>\n<p>有 m 张彩色自然图片拿来训练一个神经网络，使它能够对图片中的物体做分类。训练过程可以大致分为以下几步：</p>\n<ol>\n<li>从图片库中随机裁剪出相同尺寸的小图若干张，用来训练一个稀疏自编码器 C1；</li>\n<li>以 C1 作为第一个卷积层，从原图中做卷积特征提取；</li>\n<li>在 C1 下游添加一个池化层 S1，对 C1 所提取的特征做池化计算；</li>\n<li>如果需要提取更加抽象的特征，在 S1 之后添加卷积层 C2，C2 是一个使用 S1 的数据进行训练的稀疏自编码器；</li>\n<li>在 C2 下游添加一个池化层 S2，如果需要提取进一步抽象的特征，重复添加卷积层与池化层即可；</li>\n<li>以最后一个池化层的输出作为数据训练分类器。</li>\n</ol>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/1206261a7d70a2dc8691219489f3550a.jpg\"></p>\n<p> </p>\n<h1>课后作业（Convolution and Pooling）</h1>\n<blockquote><p>In this exercise you will use the features you learned on 8×8 patches sampled from images from the STL-10 dataset in the earlier exercise on linear decoders for classifying images from a reduced STL-10 dataset applying convolution and pooling. The reduced STL-10 dataset comprises 64×64 images from 4 classes (airplane, car, cat, dog).</p></blockquote>\n<p>这次作业依赖上一次“linear decoders”作业的代码，使用的数据是 STL-10 的一个子集，用来识别四种图像：飞机、汽车、猫和狗。</p>\n<p><a href=\"https://github.com/lbbc1117/DeepLearningUFLDL/tree/master/cnn_exercise\" target=\"_blank\" rel=\"nofollow\">代码地址</a>，由于 GIthub 有文件大小限制，所以这次没有上传数据文件。</p>\n<p>Pooling 的代码比较简单，所以这里把计算卷积的代码详细注释后贴出来：</p>\n<p>cnnConvolve.m</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/8355424a825d9e11de05666c090967ef.png\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/54cd2ec4fbad8cf916ea8544146ffe5d.png\"></p>\n<p>运行结果（识别的正确率）：</p>\n<ol>\n<li>使用 average pooling:<img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/51efa2bb0d61009d2d35d8e1b0c5f04d.png\"></li>\n<li>使用 max pooling:<img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/7d67dc0594f352e6e87c1dd28e1ab2ba.png\"></li>\n</ol>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110692\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110692votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110692\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 0, "front_image_path": "full/5a8b6d92892b471fc1c62346f814999884c46c8e.jpg", "tags": "IT技术,卷积神经网络", "praise_nums": "1", "url": "http://blog.jobbole.com/110692/", "create_date": "2017/03/27"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/a59049e754131da2871feac43b0bc2a7.png"], "comment_nums": 0, "title": "编写好代码：如何减少代码的认知负荷", "url_object_id": "697c472527a70d0f9f258873da5dffe3", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://chrismm.com/blog/writing-good-code-reduce-the-cognitive-load/?2\">chrismm</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/writing-good-code-reduce-the-cognitive-load?print\">开源中国 - 边城</a>   </div><p>Bug 少，性能好，容易修改。好的代码影响深远，而且它可能是产生 10 倍工作效率的开发者的主要原因。尽管好代码十分重要，但开发新手却不得要领。关于这一主题的技巧多而冗杂，让新手们如何记得住？“《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》)” 是这个主题的经典，但内容多达 960 页！</p>\n<p><strong>我认为应该建立起良好的心态，这样，不管你用什么语言或者库，都会自然而然的写出高质量的代码。</strong>这里我主要谈到 5 个相关的概念。记住它们，轻松写出写出好代码。</p>\n<h3>避免特立独行</h3>\n<p>当你读到一些文章中的新技巧时，如醍醐灌顶，一定会想要写点看起来很聪明的代码，让同行们眼前一亮。</p>\n<p>问题是人们只是想修完 BUG，然后继续处理其它事情。那些聪明的技巧常常只会成为一种消遣。我曾经在“<a href=\"https://chrismm.com/blog/applying-neuroscience-to-software-development/\" rel=\"nofollow\">将神经科学应用于软件开发</a>”中谈到，当人们被迫花心思来理解你的某段代码时，它们的“精神堆栈”会迅速填满，因而难以理解其中深意。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/a59049e754131da2871feac43b0bc2a7.png\" alt=\"\" width=\"724\" height=\"225\"></p>\n<p>[译者注：图片中的注释内容：这在 C 语言中用于避免误写成 variable = null。最近它造成不少人困惑，但似乎并没带来多大好处]</p>\n<p>不要在工作中使用太多可能需要额外解释的个性化方式。</p>\n<p>不要用“你的方式”来编写代码，只需要按照标准（的代码规范）来编写就好。再次强调，要写让人读得明白，看得下去的代码，让人家能够理解它。</p>\n<h3>分而治之</h3>\n<p>模块化可以使复杂的代码结构变得清晰，除此之外还有很多方法可以达到同样的目的，而无需创建更多函数。将长长的条件表达式保存为一到两个变量就是个不错的方法，可以避免调用函数的开销。这些变量可以用在其它地方，甚至可用于组合更复杂的条件。</p>\n<p>拆解问题的方法在于尽可能的让每个部分保持集中，只影响局部状态，不要混入不相关的问题，要避免副作用。编程语言和库通常会带来各自相应的问题，避免这些问题可以让你的代码更专注于其表达的业务。<a href=\"http://code.tutsplus.com/tutorials/solid-part-1-the-single-responsibility-principle--net-36074\" rel=\"nofollow\">单一责任原则</a>就是通过集中代码和局部化代码带来良好设计的例子。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/2b2b7d24ee719373f8519cd43fddaa05.png\" alt=\"\" width=\"744\" height=\"259\"></p>\n<p>[译者注：图中注释内容：这是不需要额外函数开销的一种模块化方法]</p>\n<p>我喜欢利用变更来进行逻辑划分。</p>\n<p>TDD（Test Driven Development，测试驱动开发）的成功实施表现出了它所带来的好处，它迫使人们运用一些以前不受欢迎的准则。无状态的代码曾经被嫌弃又慢又没必要（大部分老的 C/C++ 代码中可以看到），然而现在每个人都在谈论纯函数。就算你不采用 TDD，你也应该学习它背后的原则。在新的模式下工作会让你成为适应性极强的开发者。</p>\n<h3>分离代码并使其可分别处理</h3>\n<p>你写代码的时候面临着什么样的困难，你的计算机和工具也面临着同样的困难。代码的复杂性，与需要进行的预处理和需要处理的突发情况存在着或多或少的联系。</p>\n<p>现在暂时抛开那些额外的构建工具所带来的好处。它们需要你使用特定领域的语言，比如自定义模板，或者复杂的动态数据结构，比如哈稀表。IDE 通常不善于处理这些东西，要找到相关的代码段则更加困难。</p>\n<p>尽量避免使用不能很好支持 IDE 的语言扩展和库。它们给你的生产力带来的好处，远大于简易配置和用简洁语法保存击键带来的小便利。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/06603fe3699302c02c393a28ab3e66a2.png\" alt=\"\" width=\"720\" height=\"194\"></p>\n<p>[译者注：图中注释内容：使用神奇的字体串可能造成 IDE 不能正确识别你的代码]</p>\n<p>ServiceLocator 是与 IDE 整合不佳的一个设计样例。</p>\n<p>另一个保持 IDE“整合度”的相关方法是避免编写特殊的代码。多数语言都提供了编写动态代码的能力。如果滥用这些特性，比如特殊的字符串、特殊的数组索引和自定义模板语言特性等，会产生难以连接的代码库[译者注：这里的连接应该是指相互关联的关系，连接最直接的影响是在使用 IDE 等工具进行重构的时候可以自动根据连接关系修改相关引用]。一般说来，那些只有你一个人才能看懂的特性会让你摔跟头的，因为如果 IDE 不能理解这些代码，在你想进行结构调整的时候，IDE 就没法帮你进行重构。</p>\n<h3>让程序可读</h3>\n<p>致力于可预测的架构。这种架构下你的队友要进行某项查找就会很容易，可以节约不少时间。<strong>一旦你为项目确定了一个整体的架构，就一定要把主要元素放在显眼的位置。</strong>使用 MVC？把模型、视图和控制器放在他们自己的目录下，不要放在三个深层次的目录中，也不要放在几个不同的地方。</p>\n<p>我在前面谈到了模块化。也存在过度的模块化，让定位代码这种事情变得艰难无比。IDE 可能会带来一些帮助，但通常你往往会让 IDE 忽略库目录，因为其中有很多不相关的代码，或者它的索引需要人工处理一些问题，就会造成两败俱伤的局面。尽量使用较少的库，选用那些尽可能多覆盖你需求的库。</p>\n<p>库和工具也可能成为新人的障碍。我最近使用 EcmaScript 7 (babel) 构建了一个项目，后来我才意识到我们的初级开发人员一直因为想搞明白它而卡在那里，这对团队的生产力造成了巨大损失。我低估了这对一个新手所带来的压力。不要使用对当前来说太难掌握的工具，等时机成熟再使用。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/f0ad825818d83fca666870e278bdce7d.png\" alt=\"\" width=\"747\" height=\"293\"></p>\n<p>这是我写的一个 makefile 中的真实代码。新手不需掌握过多的新技术。</p>\n<h3>让代码易于理解</h3>\n<p>如果你已经做到了这一点，那我们来解决更重要的问题——选择好名字，这是软件开发中的重要部分。构建工具在这方面不能提供帮助，原因很简单，计算机不会真正知道解决方案背后的逻辑。<strong>你得通过文档来解释代码，而与主题相关，且符合上下文，体现变量和功能的名称就能很好做到这一点。</strong>语义化的名称甚至可以减少对文档的需求。</p>\n<p>在名称中使用前缀对理解它们很有帮助。这在过去是一种流行的做法，我认为对这种作法的误用导致了它的消亡。像<a href=\"http://www.joelonsoftware.com/articles/Wrong.html\" rel=\"nofollow\">匈牙利命名法</a>这样的前缀系统最初只是为了增加意义，但最后用于其中的上下文越来越少，终于少得只剩类型信息。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/30fce63ef347dae3a0a932b19c14e3d1.png\" alt=\"\" width=\"697\" height=\"228\"></p>\n<p>[译者注：图中的注释内容：使用名称来表达意图，不要利用语言来耍小聪明]</p>\n<p>近来，Fluent 接口经常被滥用。</p>\n<p>最后要说说老生常谈的回溯复杂度。简单地说就是要尽可能减少条件分支的数目。每多一个分支都会增加缩进，同时降低可读性。不过更重要的是，增加的东西越多，你需要跟踪的东西就越多。</p>\n<h3>结论 &amp; 相关阅读</h3>\n<p>本文介绍了五个简单的总体概念，我希望你能从中轻松的学习到组织代码的方法。</p>\n<p><strong>实践是最好的老师，用编程来巩固理论。</strong>如果你还没有这样做，我诚挚向你推荐《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》。它带来了大量的示例，几乎剖析了你可能遇到的每一种问题。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110623\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110623votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110623\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "front_image_path": "full/ce8636a3b54a8b510ed65345797b01b5ef09b4a2.jpg", "tags": "开发,代码", "praise_nums": "1", "url": "http://blog.jobbole.com/110623/", "create_date": "2017/03/20"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e-300x137.jpeg"], "comment_nums": 0, "title": "函数式编程从崛起到没落到再崛起", "url_object_id": "d5aa18fcf7138ca56e116e9e7f78fea0", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/javascript-scene/the-rise-and-fall-and-rise-of-functional-programming-composable-software-c2d91b424c8c#.8rj6dlopj\">Eric Elliott</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e.jpeg\"><img class=\"alignnone size-medium wp-image-62442\" src=\"http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e-300x137.jpeg\" alt=\"1\" width=\"300\" height=\"137\"></a></p>\n<p>Smoke Art Cubes to Smoke — MattysFlicks — (CC BY 2.0)</p>\n<p><em>请注意：这是</em><em>JavaScript ES6+</em><em>学习</em><em>函数式编程和组合软件技术的“组合软件”系列的第</em><em>1</em><em>部分。接下来的部分更精彩，敬请期待！</em></p>\n<p>在我大约六岁时，我的大部分光阴是在与我最好的朋友玩电脑游戏中度过的。他家中有一个装满了电脑的房间，对我来说，它们像魔力一样无法抗拒。我花了很多时间探索所有的游戏。有一天，我问朋友“我们怎样能做出一个游戏呢？”</p>\n<p>他不知道，所以我们就去问他的父亲，他的父亲在一个高架子上拿下来一本关于用Basic写游戏的书。我的编程之旅从此开始。当公立学校开始讲授代数时，我已经很了解了，因为编程基本上就是代数，代数在程序中无处不在。</p>\n<p> </p>\n<p><strong>组合软件的崛起</strong></p>\n<p>在计算机技术发展的初始阶段，计算机还不能实现大多数计算前，有两位伟大的计算机科学家，阿隆佐·邱奇  （Alonzo Church）和阿兰·图灵 （Alan Turing）。他们发明了两种不同的，但是等效的通用计算模型。这两种模型都可以计算可计算的任何东西（因此被称为“通用”）。</p>\n<p>阿隆佐·邱奇发明了λ演算。λ演算是基于函数组合的通用计算模型。阿兰·图灵则以图灵机而闻名。图灵机是一种通用计算模型，它定义了一种可以处理条带上符号的理论装置。</p>\n<p>他们共同证明了λ演算和图灵机在功能上是等价的。</p>\n<p><span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>λ演算是关于函数组合的。函数组合是一种极富有表现力的组合软件的方法。本文将讨论函数组合在软件设计中的重要性。</p>\n<p> </p>\n<p>以下三点使得λ演算与众不同，</p>\n<ol>\n<li>允许匿名函数：add(x, y) =&gt; x + y可以表示为(x, y) =&gt; x + y。</li>\n<li>λ演算中的函数只接受单个输入，它是一元的。如果需要多个参数，该函数将接受一个输入，并返回一个接收下一个参数的新函数，依此类推。N元函数 (x, y) =&gt; x + y 可以表示为这样的一元函数 x =&gt; y =&gt; x + y。从N元函数到1元函数的这种变换被称为柯里化（currying）。</li>\n<li>函数是一级的，意味着函数可以作为其他函数的输入和返回值。</li>\n</ol>\n<p>这些特征共同形成了一个简单的、表达性的词汇，用于编写使用函数作为主要构件块的软件。换句话说，使用函数组合来构建软件。</p>\n<p>经典的函数组合是将一个函数的输出作为另一个函数的输入，例如，组合f . g可以写为compose2 = f =&gt; g =&gt; x =&gt; f(g(x))</p>\n<p>以下是使用方法，</p>\n<p>double = n =&gt; n * 2<br>\ninc = n =&gt; n + 1</p>\n<p>compose2(double)(inc)(3)</p>\n<p>compose2函数将double函数作为第一个参数，inc函数作为第二个，然后将这两个函数的组合应用到参数3上。再来看一下compose2(),f 是 double(), g是inc(), x 是 3.函数调用compose2(double)(inc)(3)实际是三个不同的函数调用，</p>\n<ol>\n<li>第一个通过double，返回一个新函数。</li>\n<li>返回的函数使用inc，返回另一个新函数。</li>\n<li>另一个新函数使用3，计算f(g(x))，即double(inc(3))。</li>\n<li>x 的值是3，传递给inc()。</li>\n<li>inc(3)得到4。</li>\n<li>double(4) 得到8。</li>\n<li>8就是整个函数的返回值。</li>\n</ol>\n<p> </p>\n<p>当组合软件时，可以用一个组合图来表示，以下表达式可以直观的表示为：</p>\n<p>append = s1 =&gt; s2 =&gt; s1 + s2<br>\nappend(‘Hello, ‘)(‘world!’)</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/02/d903e84ec1e69982599c98a6590f75ee.png\"><img class=\"alignnone size-medium wp-image-62443\" src=\"http://jbcdn2.b0.upaiyun.com/2017/02/d903e84ec1e69982599c98a6590f75ee-232x300.png\" alt=\"2\" width=\"232\" height=\"300\"></a></p>\n<p>λ演算对软件设计有巨大的影响，在1980之前，很多非常有影响力的计算机科学品牌使用函数组合来构建软件。表处理语言（Lisp）创建于1958，它深受λ演算的影响。现在，Lisp是依然在广泛使用的历史第二悠久的语言了。</p>\n<p>I was introduced to it through AutoLISP: the scripting language used in the most popular Computer Aided Design (CAD) software: AutoCAD. AutoCAD is so popular, virtually every other CAD application supports AutoLISP so that they can be compatible. Lisp is also a popular teaching language in computer science curriculum for three reasons:</p>\n<ol>\n<li>Its simplicity makes it easy to learn the basic syntax and semantics of Lisp in about a day.</li>\n<li>Lisp is all about function composition, and function composition is an elegant way to structure applications.</li>\n<li>The best computer science text book I know of uses Lisp:<a href=\"https://www.amazon.com/Structure-Interpretation-Computer-Programs-Engineering/dp/0262510871/ref=as_li_ss_tl?ie=UTF8&amp;linkCode=ll1&amp;tag=eejs-20&amp;linkId=4896ed63eee8657b6379c2acd99dd3f3\">Structure and Interpretation of Computer Programs</a>.</li>\n</ol>\n<p>我通过AutoLISP了解了LISP， AutoLISP是在最流行的计算机辅助软件（CAD）AutoCAD中使用的脚本语言。AutoCAD很受欢迎，几乎每一个其他CAD应用为了能够与之兼容也使用了AutoLISP. Lisp也是计算机科学课程中的一种流行的教学语言，原因有三：</p>\n<ol>\n<li>它的简单性使得大约一天就可以学会Lisp的基本语法和语义。</li>\n<li>Lisp是关于函数组合的，而函数组合是构建应用程序最好的方法。</li>\n<li>我知道最好的计算机科学教科书是使用Lisp的：<a href=\"https://www.amazon.cn/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9E%84%E9%80%A0%E5%92%8C%E8%A7%A3%E9%87%8A/dp/B0011AP7RY/ref=sr_1_fkmr3_1?ie=UTF8&amp;qid=1489842042&amp;sr=8-1-fkmr3&amp;keywords=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E8%A7%A3%E9%87%8A\">计算机程序的结构与解释</a>。</li>\n</ol>\n<p><strong> </strong></p>\n<p><strong>函数式编程的没落</strong></p>\n<p>1970到1980年间，软件的构建方法偏离了简单的组合，成为了供计算机遵循的一系列线性指令。然后出现了面向对象编程——一个关于组件封装和消息传递的伟大想法，却被流行的编程语言曲解为一个关于继承层次结构的糟糕想法。</p>\n<p>函数式编程被边缘化，沦落到了学术界：1990到2010年间，酷爱编程的极客们，常春藤名校中的教授们，和一些幸运的学生躲过了Java填鸭式的痴迷。</p>\n<p>对我们大多数人来说，在这30年中，软件开发简直是噩梦。 黑暗时代。</p>\n<p> </p>\n<p><strong>函数式编程的崛起</strong></p>\n<p>2010年左右，一些伟大的事情开始发生：JavaScript爆发了。在2006年之前，JS被广泛的认为是用来编写浏览器中小动画的玩具语言，但它隐藏了一些强大的功能，即λ演算。人们开始悄悄讨论这个被称为“函数式编程”的新事物。</p>\n<p>到了2015年，用函数组合来构建软件的想法再次流行起来。为了使它更简单，JS规范做了十年来的第一次大版本升级，并添加了箭头函数，这使得创建和阅读函数、克里化、λ演算更容易。</p>\n<p>箭头函数就像火箭燃料，使得JS中的函数式编程异常火爆。今天很少见到一个不使用大量函数式编程技术的大型应用程序。</p>\n<p>组合是一种简洁，优雅，清晰的描述软件行为的方法。组合小的、确定性的功能以创建一个大的软件组件和功能的流程，产生了易于组织、理解、调试、扩展、测试、维护的软件。</p>\n<p> </p>\n<p>当你阅读以下文章时，请将实例一一实践。请记住在学习时，要像孩子一样，找出问题、探索、边玩边学。重新发现儿时发现的乐趣。让我们来创造一些奇迹吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110593\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110593votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110593\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            程序媛        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx1265511474\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx1265511474/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 18</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "front_image_path": "full/6d03c03210bbc9ce15246d49ad30c880987e14e3.jpg", "tags": "IT技术,函数式编程", "praise_nums": "3", "url": "http://blog.jobbole.com/110593/", "create_date": "2017/03/18"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/06/IntelliJIDEA-logo.png"], "comment_nums": 0, "title": "代码生成利器：IDEA 强大的 Live Templates", "url_object_id": "73c6420eb3efea3a1d8b64d3e510b12b", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h2 id=\"u524D_u8A00\">前言</h2>\n<p>Java 开发过程经常需要编写有固定格式的代码，例如说声明一个私有变量，<code>logger</code>或者<code>bean</code>等等。对于这种小范围的代码生成，我们可以利用 IDEA 提供的 <code>Live Templates</code>功能。刚开始觉得它只是一个简单的<code>Code Snippet</code>，后来发现它支持变量函数配置，可以支持很复杂的代码生成。下面我来介绍一下<code>Live Templates</code>的用法。</p>\n<h2 id=\"u57FA_u672C_u4F7F_u7528\">基本使用</h2>\n<p>IDEA 自带很多常用的动态模板，在 Java 代码中输入<code>fori</code>，回车就会出现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a098051604466\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (int i = 0; i &lt; ; i++) {\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a098051604466-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a098051604466-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a098051604466-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a098051604466-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a098051604466-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d838607a098051604466-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/large/63918611gy1fdr9qkuk8sg20p104c0tc.gif\" width=\"901\" height=\"156\"><br>\n按<code>Tab</code>可以在各个空白处跳转，手动填值。</p>\n<h2 id=\"u81EA_u5B9A_u4E49_Template\">自定义 Template</h2>\n<p>官方自带模板毕竟不能满足我们个人编码风格的需要，<code>Live Templates</code>提供了变量函数的方式供我们自定义。</p>\n<h3 id=\"u7B80_u5355_u7528_u6CD5\">简单用法</h3>\n<p>新增自定义模板，首先需要填写触发单词（即 Abbreviation），描述是可选的，然后定义模板的上下文，点击<code>define</code>选择<code>Java</code>，这样在编辑 Java 的时候就会触发当前模板，定义完上下文之后，就可以填写模板了。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9ql565eg212a0ij7kh.gif\" width=\"1378\" height=\"667\"><br>\n下面列举几个我常用的简单模板</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0a2751498171\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n==========\r\n&lt;out&gt;\r\n----------\r\nSystem.out.println($END$)\r\n==========\r\n&lt;pfs&gt;\r\n----------\r\nprivate final static String $varName$  = \"$var$\";`\r\n==========\r\n&lt;privateField&gt;\r\n----------\r\n/**\r\n * $COMMENT$\r\n */\r\n@Getter\r\n@Setter\r\nprivate $TYPE$ $NAME$;\r\n==========\r\n&lt;main&gt;\r\n----------\r\npublic static void main(String[] args) {\r\n     $END$\r\n}\r\n==========</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a2751498171-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a2751498171-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-1\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-4\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-5\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">pfs</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-7\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-8\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">varName</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$var$\"</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-9\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-10\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">privateField</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-11\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-12\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-13\"><span class=\"crayon-c\"> * $COMMENT$</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-14\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-15\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">Getter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-16\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Setter</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-17\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-18\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-19\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">main</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-20\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-21\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-22\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">$</span><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">$</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a2751498171-23\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a2751498171-24\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>模板支持变量的定义，使用<code>$$</code>包围的字符表示一个变量。<code>$END$</code>是一个特殊的预定义变量，表示光标最后跳转的位置。每个变量的位置都可以跳转过去。</p>\n<h3 id=\"u9AD8_u7EA7_u7528_u6CD5\">高级用法</h3>\n<p>如果你用过 vim 的<code>Code Sinppet</code>插件，你会发现模板里面是可以执行函数的，强大的 <code>Live Templates</code>当然也支持，而且 IDEA 能够感知代码的语义，例如说当前编辑的函数的参数。但这一点就能够让我们玩出花来。我们从易到难来研究模板函数的功能。<br>\n<img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9qlmsydg20zb0ieagj.gif\" width=\"1271\" height=\"662\"><br>\n前面我们提到的变量可以绑定函数，配置方式如上图所示。</p>\n<h4 id=\"u5FEB_u901F_u58F0_u660E_u53D8_u91CF\">快速声明变量</h4>\n<p>声明变量是一个常用的操作，特别是需要声明变量需要加注解，注释的时候，这些代码写起来就很枯燥。下面是我定义的模板：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0a6141179304\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;osgiRef&gt;\r\n----------\r\n/**\r\n * $END$\r\n */\r\n@OsgiReference\r\n@Setter\r\nprivate $TYPE$ $NAME$;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a6141179304-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a6141179304-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a6141179304-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a6141179304-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a6141179304-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a6141179304-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0a6141179304-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0a6141179304-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0a6141179304-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">osgiRef</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a6141179304-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a6141179304-3\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a6141179304-4\"><span class=\"crayon-c\"> * $END$</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a6141179304-5\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a6141179304-6\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">OsgiReference</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0a6141179304-7\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Setter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0a6141179304-8\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>乍一看这个模板跟我上面定义的<code>privateField</code>差不多，唯一的不同在于我给这些变量绑定了函数。</p>\n<ol>\n<li><code>clipboard()</code>：返回当前粘贴板的字符串</li>\n<li><code>decapitalize()</code>：将输入的字符串首字母变为小写</li>\n</ol>\n<p>下面我们演示一下，我们先拷贝当前类名，然后输入<code>osgiRef</code></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fdr9qlzql7g20k406owfe.gif\" width=\"724\" height=\"240\"></p>\n<h4 id=\"u5FEB_u901F_u58F0_u660E_logger\">快速声明 logger</h4>\n<p>声明 logger 也是一个常用的操作，上面我们是利用了粘贴函数来快速声明变量，现在我们来利用另一个函数<code>className()</code>，顾名思义，它的作用就是返回当前类名。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0ac864639714\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;logger&gt;\r\n----------\r\n/** logger */\r\nprivate static final Logger LOGGER = LoggerFactory.getLogger($CLASS$.class);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0ac864639714-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0ac864639714-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0ac864639714-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0ac864639714-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0ac864639714-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">logger</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0ac864639714-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0ac864639714-3\"><span class=\"crayon-c\">/** logger */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0ac864639714-4\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Logger </span><span class=\"crayon-v\">LOGGER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LoggerFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">CLASS</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9qmg7xfg20ll06hgn0.gif\" width=\"777\" height=\"233\"></p>\n<h4 id=\"u6700_u5F3A_u5927_u7684_groovyScript_28_29\">最强大的 groovyScript()</h4>\n<p>如果说上面用到的函数提供的能力有限，不够灵活，那么<code>groovyScript()</code>提供了一切你想要的能力，它支持执行 Groovy 脚本处理输入，然后输出处理后的字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0b0790425398\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngroovyScript(\"code\", ...)\r\n\r\n|  code   |   一段Groovy代码或者Groovy脚本代码绝对路径    |\r\n|  ...    |   可选入参，这些参数会绑定到`_1, _2, _3, ..._n`, 在 Groovy 代码中使用。|</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b0790425398-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0b0790425398-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b0790425398-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0b0790425398-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0b0790425398-1\"><span class=\"crayon-e\">groovyScript</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"code\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0b0790425398-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d838607a0b0790425398-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">code</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span>一段<span class=\"crayon-i\">Groovy</span>代码或者<span class=\"crayon-i\">Groovy</span>脚本代码绝对路径<span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0b0790425398-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span>可选入参，这些参数会绑定到<span class=\"crayon-sy\">`</span><span class=\"crayon-v\">_1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_n</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span>在<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Groovy</span><span class=\"crayon-h\"> </span>代码中使用。<span class=\"crayon-o\">|</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>下面我们来看一下它的实际应用。</p>\n<h5 id=\"u5FEB_u901F_bean__u914D_u7F6E\">快速 bean 配置</h5>\n<p>新增一个服务都要在 Spring 中注册一个 bean，一般这个配置无非就是将指明<code>id</code>和<code>class</code>，由于我们是在 xml 中配置，所以不能利用<code>className()</code>函数，但是我们可以利用<code>clipboard()</code>函数获取到类的全引用，在 IDEA 中我们直接右键类名，点击<code>Copy Reference</code>就行。然后执行 groovy 脚本获取类名。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0b3717748072\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;bean&gt;\r\n----------\r\n&lt;bean id=\"$id$\" class=\"$REF$\" /&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b3717748072-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0b3717748072-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b3717748072-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0b3717748072-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">bean</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0b3717748072-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0b3717748072-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">bean </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$id$\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$REF$\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>id</code>绑定<code>decapitalize(groovyScript(\"_1.tokenize('.')[-1]\", clipboard()))</code>，首先取<code>clipboard()</code>的值得到类的全引用，然后执行 groovy 代码<code>_1.tokenize('.')[-1]</code>（按<code>.</code>分割为字符串数组，然后取最后一个即可得到类名，然后用<code>decapitalize()</code>将首字母小写即可得到<code>id</code>。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611gy1fdr9qmtcklg21270js0xe.gif\" width=\"1375\" height=\"712\"></p>\n<h5 id=\"u5FEB_u901F_u6253_u5370_u5F53_u524D_u4E0A_u4E0B_u6587_u4FE1_u606F\">快速打印当前上下文信息</h5>\n<p>打印错误日志的时候需要打印当前上下文信息的，例<span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>如说入参，有时候入参很多的时候，写起来很痛苦，好在有模板函数<code>methodParameters()</code>，返回当前函数参数的列表，当然这个列表我们不能直接使用，需要结合<code>groovyScript</code>对它进行转化。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d838607a0b7650579293\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;printContext&gt;\r\n---------------\r\nLogUtil.$TYPE$(LOGGER, \"$MSG$ \" + $params$);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b7650579293-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d838607a0b7650579293-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d838607a0b7650579293-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d838607a0b7650579293-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">printContext</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d838607a0b7650579293-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-58d838607a0b7650579293-3\"><span class=\"crayon-v\">LogUtil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LOGGER</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$MSG$ \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>将<code>params</code>绑定到<code>groovyScript(\"'\\\"' + _1.collect { it + ' = [\\\" + ' + it + ' + \\\"]'}.join(', ') + '\\\"'\", methodParameters())</code>，就能够自动将当前函数的参数格式化后输出。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/large/63918611gy1fdr9qn64vfg20p104cgou.gif\" width=\"901\" height=\"156\"></p>\n<h2 id=\"u603B_u7ED3\">总结</h2>\n<p>上面我们简单介绍了常用的模板函数，其实 IDEA 还有很多其它模板函数，具体参考<a href=\"https://www.jetbrains.com/help/idea/2016.3/creating-and-editing-template-variables.html\" target=\"_blank\" rel=\"external\">Creating and Editing Template Variables</a>。IDEA 是一个很强大的工具，善用工具能够极大的提高工作效率，将精力投入到关键的事情上，而不是将时间浪费在编写重复代码上面。一些更高级的用法还有待大家去发掘。最后推广一波我写的代码生成插件<a href=\"https://github.com/x-hansong/CodeMaker\" target=\"_blank\" rel=\"external\">CodeMaker</a>，好好利用也能节省很多重复编写代码的时间。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/5bf123eeb2d2e5d53b487415f6c0555c.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/c7fcb7a46ab889ed5518728242187ab5.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110607\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110607votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110607\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/10/b312ba4ffd5245fa2a1ab819ec0d0347.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            热爱阅读，喜欢挑战。热衷尝试新的技术，关注技术背后的原理。关注领域：Java 服务端开发，网络编程。关注语言：Java, C, Python。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Yonah\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yonah/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 39</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.xiaohansong.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/xiaohansong\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/x-hansong\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 4, "front_image_path": "full/2199e75c3956716ac98be68a72ca0bd6ef28c797.jpg", "tags": "IT技术,IDEA", "praise_nums": "2", "url": "http://blog.jobbole.com/110607/", "create_date": "2017/03/18"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/9743f9d7ba652a2351626092cf4f62d7.jpg"], "comment_nums": 3, "title": "Github 对程序员职业生涯的影响", "url_object_id": "2220fc116936f2c63d60c069c3bb9b85", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/8zjl8\">周进林</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/@sitapati/the-impact-github-is-having-on-your-software-career-right-now-6ce536ec0b50#.i8e6wit1c\">medium.com</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>在未来的 12 到 24个月，即 2018 年到 2019 年，程序员的聘用方式将会彻底地发生改变。</p>\n<p>2004 到 2014年之间，我任职于世界上最大的开源软件公司红帽公司。2004年的7月，当我在红帽公司开始第一天工作时，我的上司 Marty Messer 对我说：“你在这里所做的一切工作都是开源的。在将来，你不再需要简历，人们可以直接通过谷歌来了解你。”</p>\n<p>在当时，这是在红帽公司工作的其中一个独特之处：我们可以在开源社区里创立自己的个人品牌和声誉。我们通过邮件列表、bug 跟踪表单（bug trackers）以及提交到 Mercurial、Subversion 和 CVS 仓库的源代码与其他软件工程师进行交流。所有的这些交流，都是公开的，并且可以被谷歌进行索引。</p>\n<p>到了2017年，我们已经生活在开源的世界里了，进入了软件开源的时代。</p>\n<p>下面两件事，可以让你真切地感受到开源时代的到来：</p>\n<ol>\n<li>微软曾经是闭源私有软件的典型代表、反对开源的圣斗士，如今已经全心全意地拥抱开源软件，成立了 .Net 基金会（红帽是其中的一员） 并且加入 Linux 基金会。.Net 现在已经作为开源项目进行开发。</li>\n<li>GitHub 已经成为了一个奇特的社交网络，它把问题跟踪（issue tracking）和分布式代码控制捆绑在一起。</li>\n</ol>\n<p>对那些主要是拥有闭源软件背景的软件开发者来说，他们还没真正了解到开源时代的到来。开源对他们来说就，等同于“用你的空闲时间来进行免费工作”。</p>\n<p>但是，对我们这些使用十年时间来建立一个价值10亿美元开源软件公司的人来说，我们并不是使用空余时间来免费为开源软件工作。而且，为开源工作的好处和结果是显而易见的：你建立的声誉是你自己的，而且你可以在换工作时把它带到新的公司里。GitHub 是一个社交网络，你所有的提交和对任何技术的研究、交流这些资产都是属于你自己的，它和你正在工作的公司没任何关系。</p>\n<p>聪明人会利用 GitHub 的这个优点来建立自己的资产：向他们日常使用的语言和框架进行提交补丁、问题（issue）、评论。比如，TypeScript、.NET、Redux。</p>\n<p>他们同样会尽可能地提倡并安排他们的工作以开源的形式来完成，即使他们的提交显示都是私有的提交。</p>\n<p>GitHub 是一个很好的均衡器。你虽然不能从印度找到一份澳大利亚的工作，但你能够在印度利用 GitHub 与澳大利亚人进行工作。</p>\n<p>在过去的十年里，从红帽公司获取一个工作机会的方式已经显而易见了：你只需与红帽公司的工程师一起合作开发他们的一些开源项目，然后只提交一些有价值的提交并且得到他们的认可，你就会得到这份工作。否则不会提供工作机会给你。</p>\n<p>现在红帽公司依然提供同样的求职方式给求职者，不过仅限于技术职位。如今是开源的时代，这种求职方式在世界各地开始流行起来了。</p>\n<p>在 2 月中旬的<a href=\"http://www.theregister.co.uk/2017/02/15/think_different_shut_up_and_work_harder_says_linus_torvalds/\" target=\"_blank\">一次访谈</a>中，Linux 和 git 的发明者 Linus Torvalds （他在 Github 中拥有将近 5 万粉丝）说到：</p>\n<blockquote><p>你需要为开源项目提交大量的小补丁，直到项目的维护者信任你，到了那时你就会成为一个在这个项目中值得信赖的人，而不仅仅是一个提交补丁的人。</p></blockquote>\n<p>在信任网络中，你的声誉代表这你的地位。当你换公司时，你之前的声誉就会有所丢失并且减弱。如果你生活在一个小镇里并且在那待了很久，那么那里的人都会对你有所了解。但如果你去了其他国家生活，无论你去哪个国家，你之前的声誉都已经归零了。你最终会到一个没人了解你的地方，更糟糕的是，那里没人知道谁了解你。</p>\n<p>你可能是第一次、第二次，或者更糟糕的是你已经是第三次这样丢失了与你的信任网络的联系。除非你已经通过在研讨会或者大型会议进行演讲建立个人品牌，否则你与其他人共事时建立的信任，以及提交到企业内部仓库的代码都会不复存在。</p>\n<p>但是，如果你的工作是在 GitHub 上完成的，它就不会消失。它是可以看得见的。你之前与别人建立的信任网络的联系是可以从 GitHub 里直接看的到的。</p>\n<p>在 GitHub 开源社区中将要发生的一件事就是，学生、刚毕业的学以及移民者这些相对弱势的群体可以利用 GitHub 这个优势到澳大利亚找份工作。</p>\n<p>并且 GitHub 会改变开发者社区现有的样貌。一些之前比较有权威的开发者将会突然地发现他们的信任网络被破坏了。因为在开源中有个原则叫精英领导（meritocracy ）——拥有最好想法的人胜出、拥有提多提交的人胜出、拥有最多通过测试的人胜出、拥有最佳实现的人胜出，等等。</p>\n<p>这不是一个完美的原则（没有任何东西是完美的）。并且会让你很难成为一个可以一起共事的好同事。在红帽公司里，我们解雇过一些明星工程师（rock star engineers ），仅仅因为他们不能和其他同事和睦相处。而那些“其他工程师”会经常在 GitHub 里与其他代码提交者进行交流。</p>\n<p>GitHub 不是简单地作为一个代码仓库和原始提交者的成员列表, 一些人把这看成是稻草人谬误（ strawman arguments）。GitHub 是一个社交网络。我觉得：</p>\n<blockquote><p>重要的不是你提交到 GitHub 上的代码，是其他人对你 GitHub 上的代码的评论</p></blockquote>\n<p>那是你可以随身携带的声誉。并且在之后的12到24个月里，是否在 GitHub 里为开源项目贡献代码会有明显的区别。就好像有邮件和没有邮件（现在所有人都有邮件了）、有手机与没手机（现在任何人都有手机）的区别。到最后，大多数人将会以开源的方式来进行工作，并且会基于各种因素提供相对公平的竞争环境。</p>\n<p>但如今，程序员的职业发展空间已经被 GitHub 打乱了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110592\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110592votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110592\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/8zjl8\">周进林</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/8zjl8\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/37626/5eae1c6800ce93c5d98ee059843e9513-bpfull.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            茫茫大海中的一枚程序猿，为了进化为一个高富帅人类而努力着。关注java、python、linux、vim等（新浪微博：@酒肉和尚--进林）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/8zjl8\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/8zjl8/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/8zjl8/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 18</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.cnblogs.com/averey/\"><i class=\"fa fa-link\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 4, "front_image_path": "full/45e980b8f4064565baf2ee6fb1fee9feae630c06.jpg", "tags": "职场,Github,职场", "praise_nums": "3", "url": "http://blog.jobbole.com/110592/", "create_date": "2017/03/17"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/53e6c01fcfa83e2f98724bf99795ee4b.png"], "comment_nums": 1, "title": "为什么说 LINQ 要胜过 SQL", "url_object_id": "a878e8627e7de3895afeaa2716a05d1e", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linqpad.net/WhyLINQBeatsSQL.aspx\">linqpad</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/why-linq-beats-sql\">oschina</a>   </div><p>如果你还没有沉溺于 LINQ，就会想这有啥大惊小怪的。SQL 并没有坏掉，为什么还要对它进行修补呢? 为什么我们还需要另外一种查询语言呢?</p>\n<p>流行的说法是 LINQ 同 C#（或者 VB）集成在了一起，故而消除了编程语言和数据库之间配合上的鸿沟，同时为多个数据源的组合提供了单一的查询接口。虽然这些都是事实，但仅是故事的一部分。更重要的是：当要对数据库进行查询的时候，LINQ 在大多数情况下都比 SQL 更加有效。</p>\n<p>同 SQL 相比， LINQ 更简单、整洁而且高级。这样子更像是拿 C# 同 C++ 做比较。真的，尽管有时候使用 C++ 仍然是最好的选择（比如使用 SQL 的场景），但在大多数场景中，使用现代整洁的语言而不必为底层细节操作就是一项大胜利。</p>\n<p>SQL 是一门非常古老的语言—发明于 1974 年。虽然经历过了无数此扩展，但从来没有被重新设计过。这就使得它有点混乱了—不像是 VB6 或者 Visual FoxPro。你也许已经慢慢变得习惯于此因而看不到任何错漏的地方!</p>\n<p>让我们来看一个例子。你想要编写一个简单的查询来获取客户数据，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9da7095554138\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT UPPER(Name)\r\nFROM Customer\r\nWHERE Name LIKE 'A%'\r\nORDER BY Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9da7095554138-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9da7095554138-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9da7095554138-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9da7095554138-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9da7095554138-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">UPPER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9da7095554138-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-e\">Customer</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9da7095554138-3\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9da7095554138-4\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在假设要将结果集里的这些数据提供给一个网页，并且我们想获取第 21 到 30 行数据。所以我们需要一个子查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9db0943885773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT UPPER(Name) FROM\r\n(\r\n   SELECT *, RN = row_number()\r\n   OVER (ORDER BY Name)\r\n   FROM Customer\r\n   WHERE Name LIKE 'A%'\r\n) A\r\nWHERE RN BETWEEN 21 AND 30\r\nORDER BY Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db0943885773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db0943885773-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db0943885773-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db0943885773-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db0943885773-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db0943885773-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db0943885773-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db0943885773-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db0943885773-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db0943885773-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">UPPER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-e\">FROM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db0943885773-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db0943885773-3\">   <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-i\">RN</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">row_number</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db0943885773-4\">   <span class=\"crayon-i\">OVER</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db0943885773-5\">   <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db0943885773-6\">   <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db0943885773-7\"><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db0943885773-8\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">RN</span> <span class=\"crayon-i\">BETWEEN</span> <span class=\"crayon-cn\">21</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-cn\">30</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db0943885773-9\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>而如果你需要支持版本（在 SQL Server 2005 之前的）更老的数据库，情况会更糟糕:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9db5298913322\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT TOP 10 UPPER (c1.Name)\r\nFROM Customer c1\r\nWHERE\r\n   c1.Name LIKE 'A%'\r\n   AND c1.ID NOT IN\r\n   (\r\n      SELECT TOP 20 c2.ID\r\n      FROM Customer c2\r\n      WHERE c2.Name LIKE 'A%'\r\n      ORDER BY c2.Name\r\n   ) \r\nORDER BY c1.Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db5298913322-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db5298913322-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">TOP</span> <span class=\"crayon-cn\">10</span> <span class=\"crayon-i\">UPPER</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span> <span class=\"crayon-e\">c1</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-3\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-4\">   <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-5\">   <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">NOT</span> <span class=\"crayon-st\">IN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-6\">   <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-7\">      <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">TOP</span> <span class=\"crayon-cn\">20</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-8\">      <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c2</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-9\">      <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-10\">      <span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db5298913322-11\">   <span class=\"crayon-sy\">)</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db5298913322-12\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>这样做不仅复杂而混乱，而且也违背了 DRY 原则。如下是使用 LINQ 实现相同的查询功能。显然在简单性上更胜一筹：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9db9715978721\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar query =\r\n   from c in db.Customers\r\n   where c.Name.StartsWith (\"A\")\r\n   orderby c.Name\r\n   select c.Name.ToUpper();\r\n\r\nvar thirdPage = query.Skip(20).Take(10);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db9715978721-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db9715978721-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db9715978721-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db9715978721-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db9715978721-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9db9715978721-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9db9715978721-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db9715978721-1\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db9715978721-2\">   <span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customers</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db9715978721-3\">   <span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">StartsWith</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db9715978721-4\">   <span class=\"crayon-i\">orderby</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db9715978721-5\">   <span class=\"crayon-i\">select</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ToUpper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9db9715978721-6\"> </div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9db9715978721-7\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">thirdPage</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Skip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Take</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>只有当我们枚举到 thirdPage 时，查询才会实际执行。在从 LINQ 到 SQL 或者 Entity Framework 的场景中，翻译引擎会将（我们用两个步骤组合而成的）查询转换成一个 SQL 语句，这个语句是针对其所连接的数据库服务器进行了优化的。</p>\n<h3>可组合性</h3>\n<p>您可能已经注意到 LINQ 的另一个更微妙（微妙但意义重大）的好处。我们选择了组合中的两个查询步骤：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dbc886293656\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nIQueryable Paginate (this IQueryable query, int skip, int take)\r\n{\r\n   return query.Skip(skip).Take(take);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dbc886293656-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dbc886293656-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dbc886293656-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dbc886293656-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dbc886293656-1\"><span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-i\">Paginate</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span> <span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-t\">int</span> <span class=\"crayon-v\">skip</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-t\">int</span> <span class=\"crayon-v\">take</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dbc886293656-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dbc886293656-3\">   <span class=\"crayon-st\">return</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Skip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">skip</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Take</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">take</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dbc886293656-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>我们可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dbf838602394\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar query = ...\r\nvar thirdPage = query.Paginate (20, 10);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dbf838602394-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dbf838602394-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dbf838602394-1\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dbf838602394-2\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">thirdPage</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Paginate</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>更重要的是，在这里我们可以进行任意的分页查询。换言之就是通过 LINQ 你可以把查询分解成一部分，然后在你的应用程序中重用。</p>\n<h3>联合</h3>\n<p>LINQ 另一好处就是你可以不用 JOIN 就能进行关系间查询。例如，我们想要列出所有购物在 $1000 或者以上，并且居住在华盛顿的顾客。我们会假定让购买项目化（也就是经典的采购/项目采购场景）并且把（没有顾客记录的）现金销售也囊括进来。这就需要在四个表（Purchase, Customer, Address 以及 PurchaseItem）之间进行查询。使用 LINQ，这样的查询不费吹灰之力：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dc5789672156\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom p in db.Purchases\r\nwhere p.Customer.Address.State == \"WA\" || p.Customer == null\r\nwhere p.PurchaseItems.Sum (pi =&gt; pi.SaleAmount) &gt; 1000\r\nselect p</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc5789672156-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc5789672156-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc5789672156-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc5789672156-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc5789672156-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">p</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Purchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc5789672156-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customer</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-t\">null</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc5789672156-3\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Sum</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pi</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc5789672156-4\"><span class=\"crayon-i\">select</span> <span class=\"crayon-v\">p</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>将此与同等功能的 SQL 相比较：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dc9951291575\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT p.*\r\nFROM Purchase p\r\n    LEFT OUTER JOIN \r\n        Customer c INNER JOIN Address a ON c.AddressID = a.ID\r\n    ON p.CustomerID = c.ID\t\r\nWHERE\r\n   (a.State = 'WA' || p.CustomerID IS NULL)\r\n    AND p.ID in\r\n    (\r\n        SELECT PurchaseID FROM PurchaseItem\r\n        GROUP BY PurchaseID HAVING SUM (SaleAmount) &gt; 1000\r\n    )</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dc9951291575-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dc9951291575-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Purchase</span> <span class=\"crayon-i\">p</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-3\">    <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-4\">        <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-i\">INNER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">Address</span> <span class=\"crayon-i\">a</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">AddressID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-5\">    <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ID\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-6\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-7\">   <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'WA'</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-st\">IS</span> <span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-8\">    <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-9\">    <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-10\">        <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dc9951291575-11\">        <span class=\"crayon-i\">GROUP</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">HAVING</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dc9951291575-12\">    <span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>对此例进一步扩展，假设我们想要将结果集按价格进行逆序排列，并在最终的投影中显示销售员的姓名以及所购买项目的数量。我们可以自然不重复地表达出这些附件的查询条件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dcc093220531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom p in db.Purchases\r\nwhere p.Customer.Address.State == \"WA\" || p.Customer == null\r\nlet purchaseValue = p.PurchaseItems.Sum (pi =&gt; pi.SaleAmount)\r\nwhere purchaseValue &gt; 1000\r\norderby purchaseValue descending\r\nselect new\r\n{\r\n   p.Description,\r\n   p.Customer.SalesPerson.Name,\r\n   PurchaseItemCount = p.PurchaseItems.Count()\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dcc093220531-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dcc093220531-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dcc093220531-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dcc093220531-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dcc093220531-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dcc093220531-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">p</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Purchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dcc093220531-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customer</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-t\">null</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-3\"><span class=\"crayon-i\">let</span> <span class=\"crayon-i\">purchaseValue</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Sum</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pi</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dcc093220531-4\"><span class=\"crayon-e\">where</span> <span class=\"crayon-e\">purchaseValue</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-5\"><span class=\"crayon-e\">orderby</span> <span class=\"crayon-e\">purchaseValue</span> <span class=\"crayon-e\">descending</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dcc093220531-6\"><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dcc093220531-8\">   <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Description</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-9\">   <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SalesPerson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dcc093220531-10\">   <span class=\"crayon-i\">PurchaseItemCount</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dcc093220531-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>下面是使用 SQL 实现相同的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9dd6094775202\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT \r\n    p.Description,\r\n    s.Name,\r\n    (SELECT COUNT(*) FROM PurchaseItem pi WHERE p.ID = pi.PurchaseID) PurchaseItemCount\t\r\nFROM Purchase p\r\n    LEFT OUTER JOIN \r\n        Customer c \r\n            INNER JOIN Address a ON c.AddressID = a.ID\r\n            LEFT OUTER JOIN SalesPerson s ON c.SalesPersonID = s.ID\r\n    ON p.CustomerID = c.ID\t\r\nWHERE\r\n    (a.State = 'WA' OR p.CustomerID IS NULL)\r\n    AND p.ID in\r\n    (\r\n        SELECT PurchaseID FROM PurchaseItem\r\n        GROUP BY PurchaseID HAVING SUM (SaleAmount) &gt; 1000\r\n    )\r\nORDER BY\r\n    (SELECT SUM (SaleAmount) FROM PurchaseItem pi WHERE p.ID = pi.PurchaseID) DESC</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9dd6094775202-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9dd6094775202-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-1\"><span class=\"crayon-i\">SELECT</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-2\">    <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Description</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-3\">    <span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-4\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span> <span class=\"crayon-i\">pi</span> <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseID</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-e\">PurchaseItemCount\t</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-5\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Purchase</span> <span class=\"crayon-i\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-6\">    <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> </div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-7\">        <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-8\">            <span class=\"crayon-i\">INNER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">Address</span> <span class=\"crayon-i\">a</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">AddressID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-9\">            <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">SalesPerson</span> <span class=\"crayon-i\">s</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">SalesPersonID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-10\">    <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ID\t</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-11\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-12\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'WA'</span> <span class=\"crayon-st\">OR</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-st\">IS</span> <span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-13\">    <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">in</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-14\">    <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-15\">        <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-16\">        <span class=\"crayon-i\">GROUP</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">HAVING</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-17\">    <span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9dd6094775202-18\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9dd6094775202-19\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span> <span class=\"crayon-i\">pi</span> <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseID</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-v\">DESC</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>有意思的是可以将上述 SQL 查询转换回到 LINQ，所生成的查询每一块都会有傻瓜式重复。论坛里常会贴出这样的查询（通常是非工作的版本）——这是用 SQL 进行思考而不是以 <a href=\"https://www.linqpad.net/Challenge.aspx\" rel=\"nofollow\">LINQ 进行思考</a>的结果。这就像是是将 Fortran 程序转换成 C# 6 时会抱怨 GOTO 的笨拙语法一样。</p>\n<h3>数据修整</h3>\n<p>在查询联合中从多个表选择数据 – 最终的结果会是一个扁平的以行为单位的元组。如果你使用了多年的 SQL，你可能认为这种事不会发生在你身上——它导致数据重复，从而使得结果集无法在客户端很好地使用。所以当它发生时往往难以接受。与此相反，LINQ 让你可以获取到休整过的分层级的数据。这就避免了重复，让结果集容易处理，而且在大多数情况下也会消除进行联合操作的必要。例如，假设我们想要提取一组顾客，每一条记录都带上了它们的高价值交易。使用 LINQ，你可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9ddb183110628\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom c in db.Customers\r\nwhere c.Address.State == \"WA\"\r\nselect new\r\n{\r\n   c.Name,\r\n   c.CustomerNumber,\r\n   HighValuePurchases = c.Purchases.Where (p =&gt; p.Price &gt; 1000)\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9ddb183110628-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9ddb183110628-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9ddb183110628-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9ddb183110628-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9ddb183110628-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9ddb183110628-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9ddb183110628-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9ddb183110628-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9ddb183110628-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Customers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9ddb183110628-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9ddb183110628-3\"><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9ddb183110628-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9ddb183110628-5\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9ddb183110628-6\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CustomerNumber</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9ddb183110628-7\">   <span class=\"crayon-i\">HighValuePurchases</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9ddb183110628-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>HighValuePurchases，在这里是一个集合。由于我们查询的是一个相关属性，就不需要进行联合了。因此这是一个内联合还是外联合的细节问题就被很好的抽象掉了。在此例中，当翻译成了 SQL，可能就是一个外联合：LINQ 不会因为子集合返回的是零个元素就排除行。如果我们想要有一个可以翻译成一个内联合的东西，可以这样做:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9de1729204823\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom c in db.Customers\r\nwhere c.Address.State == \"WA\"\r\nlet HighValuePurchases = c.Purchases.Where (p =&gt; p.Price &gt; 1000)where HighValuePurchases.Any()select new\r\n{\r\n   c.Name,\r\n   c.CustomerNumber,\r\n   HighValuePurchases\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de1729204823-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de1729204823-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de1729204823-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de1729204823-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de1729204823-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de1729204823-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de1729204823-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de1729204823-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de1729204823-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Customers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de1729204823-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de1729204823-3\"><span class=\"crayon-i\">let</span> <span class=\"crayon-i\">HighValuePurchases</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">HighValuePurchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Any</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de1729204823-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de1729204823-5\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de1729204823-6\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CustomerNumber</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de1729204823-7\">   <span class=\"crayon-i\">HighValuePurchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de1729204823-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>LINQ 还通过一组丰富的操作符对平面外联合、自联合、组查询以及其它各种不同类型查询进行了支持。</p>\n<h3>参数化</h3>\n<p>如果我们想要将之前的例子参数化会如何呢，如此”WA”状态是不是就要来自于一个变量呢? 其实我们只要像下面这样做就可以了:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9de5951867239\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstring state = \"WA\";\r\n\r\nvar query =\r\n   from c in db.Customers\r\n   where c.Address.State == state\r\n   ...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de5951867239-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de5951867239-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de5951867239-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de5951867239-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de5951867239-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de5951867239-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de5951867239-1\"><span class=\"crayon-t\">string</span> <span class=\"crayon-i\">state</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">\"WA\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de5951867239-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de5951867239-3\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de5951867239-4\">   <span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customers</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de5951867239-5\">   <span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-i\">state</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de5951867239-6\">   <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>不会混淆 DbCommand 对象上面的参数，或者担心 SQL 注入攻击。 LINQ 的参数化是内联、类型安全并且高度可读的。它不仅解决了问题——而且解决得很不错。</p>\n<p>因为 LINQ 查询时可以进行组合，所以我们可以有条件的添加谓词。例如，我们写出一个方法，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9de8121078514\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nIQueryable GetCustomers (string state, decimal? minPurchase)\r\n{\r\n    var query = Customers.AsQueryable();\r\n    \r\n    if (state != null)\r\n        query = query.Where (c =&gt; c.Address.State == state);\r\n    \r\n    if (minPurchase != null)\r\n        query = query.Where (c =&gt; c.Purchases.Any (p =&gt; p.Price &gt; minPurchase.Value));\r\n    \r\n    return query;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9de8121078514-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9de8121078514-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-1\"><span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-i\">GetCustomers</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span> <span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">decimal</span><span class=\"crayon-sy\">?</span> <span class=\"crayon-v\">minPurchase</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-3\">    <span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">Customers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">AsQueryable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-4\">    </div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-5\">    <span class=\"crayon-st\">if</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">state</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-6\">        <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">c</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-7\">    </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-8\">    <span class=\"crayon-st\">if</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">minPurchase</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-9\">        <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">c</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Any</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">minPurchase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-10\">    </div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9de8121078514-11\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9de8121078514-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>如果我们使用空的 state 以及 minPurchase 值调用了这个方法，那么在我们枚举结果集的时候如下 SQL 就会被生成出来：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9deb054950694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT [t0].[ID], [t0].[Name], [t0].[AddressID]\r\nFROM [Customer] AS [t0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9deb054950694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9deb054950694-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9deb054950694-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9deb054950694-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>不过，如果我们指定了 state 和 minPurchase 的值，LINQ 到 SQL 就不只是向查询添加了谓词，还会有必要的联合语句：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8cc58d9def371906840\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT [t0].[ID], [t0].[Name], [t0].[AddressID]\r\nFROM [Customer] AS [t0]\r\nLEFT OUTER JOIN [Address] AS [t1] ON [t1].[ID] = [t0].[AddressID]\r\nWHERE (EXISTS(\r\n    SELECT NULL AS [EMPTY]\r\n    FROM [Purchase] AS [t2]\r\n    WHERE ([t2].[Price] &gt; @p0) AND ([t2].[CustomerID] = [t0].[ID])\r\n    )) AND ([t1].[State] = @p1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9def371906840-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9def371906840-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9def371906840-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9def371906840-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9def371906840-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9def371906840-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d8cc58d9def371906840-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8cc58d9def371906840-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8cc58d9def371906840-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9def371906840-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9def371906840-3\"><span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9def371906840-4\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-e\">EXISTS</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9def371906840-5\">    <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-t\">NULL</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">EMPTY</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9def371906840-6\">    <span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Purchase</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-58d8cc58d9def371906840-7\">    <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Price</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-sy\">@</span><span class=\"crayon-v\">p0</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">CustomerID</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8cc58d9def371906840-8\">    <span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">State</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">@</span><span class=\"crayon-v\">p1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>因为我们的方法返回了一个 IQueryable，查询在枚举到之前并不会被实际地转换成 SQL 并加以执行。这样就给了调用进一步添加谓词、分页、自定义投影等等的机会。</p>\n<h3>静态类型安全</h3>\n<p>在之前的查询中，如果我们将 state 变量声明成了一个整型数而不是一个字符串，那么查询可能在编译时就会报错，而不用等到运行时。这个也同样适用于把表名或者列名弄错的情况。这在重构时有一个很实在的好处：如果你没有完成手头的工作，编译器会给出提示。</p>\n<h3>客户端处理</h3>\n<p>LINQ 让你可以轻松地将查询的一些部分转移到客户端上进行处理。对于负载负担较大的数据库服务器，这样做可实际提升性能。只要你所取数据没有超过所需（换言之，你还是要在服务器上做过滤），就可以经常性地通过把对结果集进行重新排序、转换以及重组的压力转移到负载较少的应用服务器上去。使用 LINQ，你需要做的就是 AsEnumerable() 转移到查询之中，而自那个点之后的所有事情都可以在本地执行。</p>\n<h3>什么时候不用 LINQ 去查询数据库</h3>\n<p>尽管 LINQ 的功能强大，但是它并不能取代 SQL。它可以满足 95% 以上的需求，不过你有时仍然需要SQL:</p>\n<ul>\n<li>需要手动调整的查询 (特殊是需要优化和进行锁定提示的时候)；</li>\n<li>有些涉及到要 select 临时表，然后又要对那些表进行查询操作的查询；</li>\n<li>预知的更新以及批量插入操作。</li>\n</ul>\n<p>还有就在用到触发器时，你还是需要 SQL。 (尽管在使用 LINQ 的时候诸如此类的东西并非常常被需要，但在要使用存储过程和函数的时候，SQL 是不可或缺的)。你可以通过在 SQL 中编写表值函数来将 SQL 与 LINQ 结合在一起, 然后在更加复杂的 LINQ 查询里面调用这些函数。</p>\n<p>了解两门查询语言并不是问题，因为无论如何你都会想要去学习 LINQ 的 — LINQ 在查询本地集合以及 XML DOM 的时候非常实用。如果你使用的仍然是老旧的基于 XmlDocument 的 DOM，LINQ to XML 的 DOM 操作会是一种具有戏剧效果的进步。</p>\n<p>还有就是相比于 SQL， LINQ <a href=\"https://www.linqpad.net/MasteringLINQ.aspx\" rel=\"nofollow\">更易于掌握</a>，所以如果你想写个不错的查询，使用 LINQ 会比 SQL 更好达成。</p>\n<h3>将 LINQ 用于实战</h3>\n<p>我几乎是只用 LINQ 来做数据库查询，因为它更有效率。</p>\n<p>对于应用程序的编写而言，我的个人经验是一个使用 LINQ 的数据访问层（使用一个像 LINQ 到 SQL 或者 Entity Framework 的 API）可以将数据访问的开发时间砍掉一半，而且可以让维护工作更加的轻松。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110626\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110626votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110626\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 4, "front_image_path": "full/336730a32d71a69aa2a6a4134bf24159d8fc26b2.jpg", "tags": "IT技术,Linq,SQL,数据库", "praise_nums": "1", "url": "http://blog.jobbole.com/110626/", "create_date": "2017/03/20"}
{"front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmrcg07vj20dw0cata1.jpg"], "comment_nums": 7, "title": "为什么该和程序员约会？我有 20 个理由", "url_object_id": "2aee19743fefa2c9527dd1cb9e90560f", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/MiaLiang\">MiaLiang</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://m.facebook.com/story.php?story_fbid=639922279542652&amp;id=100005746562773\">Bruce Lucas</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：2009年，美国 Radford 大学心理学系的 Michael G. Aamodt 博士做了一项关于离婚率的调查研究。博士最初是为了研究“美国执法部门警官的离婚率要远高于其他职业人群的平均水平”这一普遍而奇怪的现象，但此项课题的研究，还顺带产生了许多有用的副成果。发现绝大多数工程专业的从业人员的离婚率都位于 13% 以下。详情看这里：<a href=\"http://blog.jobbole.com/86055/\" target=\"_blank\">http://blog.jobbole.com/86055/</a></p>\n<p>国外程序员 Bruce Lucas 今年 1 月份在 Facebook 发的一个帖子。他认为是程序员是可靠的约会对象和伴侣选择，列举了 20 个理由。</p>\n<hr>\n<h3>1、程序员聪明</h3>\n<p>他们透彻掌握自己知道的东西，并且总是在学习新东西。当遇到不懂的事时，他们热衷于去学习。他们从小就有了这种心态，因而积累了很多知识，随时准备与他人分享。</p>\n<h3>2、他们会珍视你们之间的感情/关系，且意识到并不是每个人都有火辣的身材</h3>\n<p>这是真的。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmrcg07vj20dw0cata1.jpg\"></p>\n<h3>3、程序员是问题解决者</h3>\n<p>如果事情出错了，他们会竭尽全力解决（fix）。</p>\n<h3>4、相对其他人群来说，程序员都有可观的收入</h3>\n<p>和你交往的程序员很有可能非常富有，因此你大可放心的在一个高级场所就餐，而且不需要担心要掏腰包。</p>\n<p>Mark Zuckerberg 是世界上最富有、最成功和最有能力的科技企业家之一。他是通过 Facebook 社交网络改变世界的程序员。如果你正在找寻一个成功的伴侣，绝大多数程序员有资格做到。</p>\n<h3>5、程序员一般都不缺幽默感</h3>\n<p>Builds failing, code breaking。良好的幽默感，是每个程序员都要具备的。</p>\n<h3>6、程序员注重细节</h3>\n<p>你正在找一个会注意你的人？优秀的程序员总是注重细节。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmjs4upaj20dw0as75d.jpg\"></p>\n<h3>7、三思熟虑</h3>\n<p>为了用户做优秀产品，他们会花很多时间。这就涉及到理解用户、了解用户需求以及知道他们不喜欢什么。因此他很可能有非常强的感受能力。为什么你有时候会举止异常，他会懂的。在对你做一些可能会影响你的事情前，他会再三考虑。</p>\n<h3>8、程序员通常对自己的职业感到满意</h3>\n<p>这意味着如果你和程序员约会，在家中会有较少的压力。</p>\n<h3>9、程序员是理性物种，少和他们玩心理游戏</h3>\n<p>心理游戏是没啥逻辑，所以程序员不会跟你玩这种游戏。当然了，视频游戏中的心理游戏可能例外了。</p>\n<h3>10、程序员是思考者和学习者</h3>\n<p>他们会喜欢和你进行一次有趣的、深思熟虑的对话，他们会欣赏你的观点。</p>\n<h3>11、</h3>\n<p>如果上面的理由都不能说服你，这一个绝对会。<strong>他所有的人际技巧，让他成为完美的男朋友人选；他的理性将使他成为一个成熟而明智的伴侣。</strong></p>\n<p>程序员最突出的特点是十分尽忠。最有天赋的程序员不一定做收入最高的工作。即使他们可以赚很多很多钱，他们仍会选择最触动他们情感的项目去做。一旦他认定了你，再漂亮的女孩也引诱不了他们。他是你的，他值得拥有。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fdpmrd6w8ij20dw09a0to.jpg\"></p>\n<h3>12、程序员真的是很好的人</h3>\n<p>一直是！</p>\n<h3>13、程序员有激情；</h3>\n<p>他们是一群有激情的人，会把他们所有时间和精力花在他们心爱的事物上。</p>\n<h3>14、优秀的程序员有耐心</h3>\n<p>如果程序员能在无数行代码中寻找一个分号，这意味着他们拥有足够的耐心。</p>\n<h3>15、程序员可能比较害羞，但他们极其坦率</h3>\n<p>所以如果他们感受到了什么，他们一定会当面告诉你。虽然这可能不是你一直想要的，但是你可以相信这个人对你真诚。</p>\n<h3>16、虽然程序员不是修电脑的，但对你会例外</h3>\n<p>你的电脑坏了？程序员知道为什么，并且能电脑运行得更快！</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/63918611gy1fdrb0znktdj20go0go0wr.jpg\" width=\"446\" height=\"446\"></p>\n<p style=\"text-align: center\">（喜欢这款T恤的，<a href=\"https://item.taobao.com/item.htm?spm=a1z10.1-c.w4004-15063610009.41.mmsx1s&amp;id=546384800820\" target=\"_blank\">请移步这里</a>）</p>\n<h3>17、程序员不难找</h3>\n<p>他们总是在网上而且等着你！！！ 小编补充：再次推荐「<a href=\"http://date.jobbole.com/?sort=latest\" target=\"_blank\">面向对象</a>」征友活动，虽然只发布单身女生的信息，但非常值得单身男保持关注。从这里可以看到最新发布的单身女生信息：<a href=\"http://date.jobbole.com/?sort=latest\" target=\"_blank\">http://date.jobbole.com/?sort=latest</a></p>\n<h3>18、程序员能维持长久的关系</h3>\n<p>因为他对处理异常、重新检查他的代码、接受自己的错误非常有经验。最重要的是，他从不让他的自负影响他的行为。因为如果你尝试过调试代码，你会意识到，即使是最困难的关系问题，都会有简单的解决办法。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmjqz8tlj209g0citdz.jpg\"></p>\n<h3>19、程序员都比较温柔和敏感</h3>\n<p>原因之一是他们知道什么时候应该对他们的伴侣妥协。当你某天过得不好，想对人抱怨一下生活中烦心事的时候，他们会在你身边聆听。即使你碰巧责备他们是所有坏事的源头，为了让你感觉好点，他们会选择对你妥协而不是跟你争吵。</p>\n<hr>\n<h3>小编后话：</h3>\n<p>喜欢一样东西或一个人，你能找出很多诸多理由了。讨厌起来，也能找出 N 多理由。</p>\n<p>欢迎大家留言。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110595\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110595votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110595\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang\">MiaLiang</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/13bf5e68935f892cdea9821c47a12c11.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Hello我是Mia Liang，关注前端，期望成为前端开发工程师        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/MiaLiang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/mialiang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"QQ：1484265623\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：mia_LSW\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "front_image_path": "full/045121baaca13779b5fc617cee060a500caf6831.jpg", "tags": "其他,约会", "praise_nums": "2", "url": "http://blog.jobbole.com/110595/", "create_date": "2017/03/18"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/f9c4a97e1a863169081e4ab97904302c.jpg"], "comment_nums": 0, "title": "长URL转短链接的简单设计与实现", "url_object_id": "947f2754d44f8d9cb8460c8285f2a837", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/tinyframework/blog/861014\">悠悠然然  </a>   </div><p>非常多的时候，我们不想在分享的时候采用长长的链接，主要的原因有：</p>\n<ol>\n<li>URL太长占显示空间、难于输入，转成二维码点点小，难于识别</li>\n<li>长的URL提供的信息太多，不利于信息安全，甚至容易造成倒库</li>\n<li>其他理由……</li>\n</ol>\n<p>今天的理由不是重点，重点是如何用一点点代码实现这个短链接的生成。</p>\n<p>我们的注意点有：</p>\n<ol>\n<li>生成的短链接地址长度可调整，毕竟不能因为4位、5位、6位的长度变化就让我们重新写一套程序</li>\n<li>要有防冲突处理机制，不能因为算法导致两个长链接地址生成的短地址一样就把前一个覆盖掉</li>\n<li>有时候，一个地址用过之后觉得不需要使用了，哪么这个地址失效之后，短地址可以有效收回。</li>\n</ol>\n<p>首先设计接口</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d872d152ac0387849506\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * Created by luoguo on 2017/3/16.\r\n */\r\npublic interface UrlShortener {\r\n    /**\r\n     * 设置产生短链接长度\r\n     * @param length\r\n     * @return\r\n     */\r\n    void setLength(int length);\r\n\r\n    /**\r\n     * 返回短链接长度\r\n     * @return\r\n     */\r\n    int getLength();\r\n\r\n    /**\r\n     * 返回指定地址对应的短链接\r\n     * @param url\r\n     * @return\r\n     */\r\n    String get(String url);\r\n\r\n    /**\r\n     * 存储对应关系\r\n     * @param url\r\n     * @param shortUrl\r\n     */\r\n    void put(String url, String shortUrl);\r\n    /**\r\n     * 到库里查看是不是存在映射，如果不存在返回null\r\n     * @param shortUrl\r\n     * @return\r\n     */\r\n    String seek(String shortUrl);\r\n\r\n    /**\r\n     * 据地址产生短地址\r\n     * @param url\r\n     * @return\r\n     */\r\n    String generate(String url);\r\n\r\n    /**\r\n     * 根据地址和种子产生一个短地址\r\n     * @param url\r\n     * @param seed\r\n     * @return\r\n     */\r\n    String generate(String url, int seed);\r\n    /**\r\n     * 清除指定URL的短链接信息\r\n     * @param url\r\n     */\r\n    void clean(String url);\r\n\r\n    /**\r\n     * 清除指定时间以前没有使用的所有短链接\r\n     * @param date\r\n     */\r\n    void clean(Date date);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ac0387849506-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ac0387849506-63\">63</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-2\"><span class=\"crayon-c\"> * Created by luoguo on 2017/3/16.</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-3\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-4\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortener</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-6\"><span class=\"crayon-c\">     * 设置产生短链接长度</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-7\"><span class=\"crayon-c\">     * @param length</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-8\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-9\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setLength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-13\"><span class=\"crayon-c\">     * 返回短链接长度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-14\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-15\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getLength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-19\"><span class=\"crayon-c\">     * 返回指定地址对应的短链接</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-20\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-21\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-22\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-24\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-26\"><span class=\"crayon-c\">     * 存储对应关系</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-27\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-28\"><span class=\"crayon-c\">     * @param shortUrl</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-29\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-32\"><span class=\"crayon-c\">     * 到库里查看是不是存在映射，如果不存在返回null</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-33\"><span class=\"crayon-c\">     * @param shortUrl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-34\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-35\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-39\"><span class=\"crayon-c\">     * 据地址产生短地址</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-40\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-41\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-42\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-44\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-46\"><span class=\"crayon-c\">     * 根据地址和种子产生一个短地址</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-47\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-48\"><span class=\"crayon-c\">     * @param seed</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-49\"><span class=\"crayon-c\">     * @return</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-50\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">seed</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-53\"><span class=\"crayon-c\">     * 清除指定URL的短链接信息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-54\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-55\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-59\"><span class=\"crayon-c\">     * 清除指定时间以前没有使用的所有短链接</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-60\"><span class=\"crayon-c\">     * @param date</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-61\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ac0387849506-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Date </span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ac0387849506-63\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>只是个示例，注释比较简陋，接下来是抽象类实现，把公共的内容放这里</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d872d152acc170234164\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport java.util.Random;\r\n\r\n/**\r\n * Created by luoguo on 2017/3/16.\r\n */\r\npublic abstract class AbstractUrlShortener implements UrlShortener {\r\n    public static char[] VALID_CHARS = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\".toCharArray();\r\n    private static Random random = new Random(System.currentTimeMillis());\r\n    protected int length = 4;\r\n\r\n    public AbstractUrlShortener() {\r\n\r\n    }\r\n\r\n    public AbstractUrlShortener(int length) {\r\n        this.length = length;\r\n    }\r\n\r\n    public void setLength(int length) {\r\n        this.length = length;\r\n    }\r\n\r\n    public int getLength() {\r\n        return length;\r\n    }\r\n\r\n    public String get(String url) {\r\n        String sortUrl = seek(url);\r\n        if (sortUrl == null) {\r\n            sortUrl = generate(url);\r\n            put(url, sortUrl);\r\n        }\r\n        return sortUrl;\r\n    }\r\n\r\n    public String generate(String url, int seed) {\r\n        char[] sortUrl = new char[length];\r\n        for (int i = 0; i &lt; length; i++) {\r\n            sortUrl[i] = VALID_CHARS[seed % VALID_CHARS.length];\r\n            seed = random.nextInt(Integer.MAX_VALUE) % VALID_CHARS.length;\r\n        }\r\n        return new String(sortUrl);\r\n    }\r\n\r\n    public String generate(String url) {\r\n        String shortUrl;\r\n        shortUrl = generate(url, random.nextInt(Integer.MAX_VALUE));\r\n        while (seek(shortUrl) != null) {\r\n            shortUrl = generate(url, random.nextInt(Integer.MAX_VALUE));\r\n        }\r\n        put(url, shortUrl);\r\n        return shortUrl;\r\n    }\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152acc170234164-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152acc170234164-55\">55</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Random</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-3\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-4\"><span class=\"crayon-c\"> * Created by luoguo on 2017/3/16.</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-5\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-6\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">abstract</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AbstractUrlShortener</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortener</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALID_CHARS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toCharArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Random </span><span class=\"crayon-v\">random</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-10\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AbstractUrlShortener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-12\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-14\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AbstractUrlShortener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-18\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setLength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-22\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getLength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-26\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">seed</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALID_CHARS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">seed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALID_CHARS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">seed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MAX_VALUE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALID_CHARS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-44\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-47\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MAX_VALUE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">seek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-49\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MAX_VALUE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152acc170234164-54\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152acc170234164-55\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0090 seconds] -->\r\n<p>实际的需要在数据库层实现，这里在内存里面存储的实现一个意思一下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d872d152ad1437127732\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport java.util.Date;\r\nimport java.util.Map;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\n/**\r\n * 内存存储的实现\r\n * &lt;p&gt;\r\n * Created by luoguo on 2017/3/16.\r\n */\r\npublic class UrlShortenerMemory extends AbstractUrlShortener {\r\n    private Map&lt;String, String&gt; url2ShortUrl = new ConcurrentHashMap&lt;String, String&gt;();\r\n    private Map&lt;String, String&gt; shortUrl2Url = new ConcurrentHashMap&lt;String, String&gt;();\r\n\r\n    public UrlShortenerMemory() {\r\n        super();\r\n    }\r\n\r\n    public UrlShortenerMemory(int length) {\r\n        super(length);\r\n    }\r\n\r\n    public void put(String url, String shortUrl) {\r\n        url2ShortUrl.put(url, shortUrl);\r\n        shortUrl2Url.put(shortUrl, url);\r\n    }\r\n\r\n    public String seek(String shortUrl) {\r\n        return shortUrl2Url.get(shortUrl);\r\n    }\r\n\r\n    public void clean(String url) {\r\n        String sortUrl = url2ShortUrl.get(url);\r\n        if (sortUrl != null) {\r\n            url2ShortUrl.remove(url);\r\n            shortUrl2Url.remove(sortUrl);\r\n        }\r\n    }\r\n\r\n    public void clean(Date date) {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad1437127732-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad1437127732-43\">43</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Map</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ConcurrentHashMap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-4\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-5\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-6\"><span class=\"crayon-c\"> * 内存存储的实现</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-7\"><span class=\"crayon-c\"> * &lt;p&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-8\"><span class=\"crayon-c\"> * Created by luoguo on 2017/3/16.</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-9\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-10\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortenerMemory</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AbstractUrlShortener</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url2ShortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ConcurrentHashMap</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl2Url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ConcurrentHashMap</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortenerMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortenerMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">url2ShortUrl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">shortUrl2Url</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-26\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortUrl2Url</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">shortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-30\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url2ShortUrl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">url2ShortUrl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">shortUrl2Url</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sortUrl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-38\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Date </span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UnsupportedOperationException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad1437127732-42\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad1437127732-43\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0062 seconds] -->\r\n<p>弄点测试代码，试试看效果怎么样</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d872d152ad5715369195\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class UrlShortenerTest {\r\n    public static void main(String[] args) {\r\n        for(int j=1;j&lt;10;j++) {\r\n            UrlShortener urlShortener = new UrlShortenerMemory(j);\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                System.out.println(urlShortener.get(\"http://www.tinygroup.org\"));\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad5715369195-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad5715369195-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad5715369195-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad5715369195-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad5715369195-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad5715369195-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortenerTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad5715369195-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad5715369195-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">UrlShortener </span><span class=\"crayon-v\">urlShortener</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UrlShortenerMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad5715369195-6\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">urlShortener</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://www.tinygroup.org\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad5715369195-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad5715369195-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad5715369195-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>这里是运行结果</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d872d152ad8910250127\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nT\r\nQ\r\nl\r\ni\r\nI\r\n\r\n0R\r\nVB\r\nfN\r\nso\r\nNw\r\n\r\nfw1\r\nfpu\r\nWT7\r\npNL\r\nM5V\r\n\r\n0cZF\r\nH09A\r\nAjYM\r\n1AMf\r\nsdkz\r\n\r\nUSsgK\r\nZMn9U\r\n7S48u\r\noBb1L\r\nyB14g\r\n\r\nDRVGWg\r\ngh3oJa\r\nBapdY7\r\nyJgcZj\r\nmivGN3\r\n\r\nTEiQG2M\r\n8SkokOY\r\nNZww5GT\r\nfxloZ0R\r\nhkiOpID\r\n\r\n3ZpdIYrF\r\neFlSSDyd\r\nbB4RCFgE\r\n25mceTMK\r\nAAJ2Lp6S\r\n\r\n5IUVoFSqZ\r\nzHZeuZljY\r\nnjCGDBKVs\r\nIgH21Tg5V\r\nWvGCy5ZtE</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d872d152ad8910250127-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-58d872d152ad8910250127-53\">53</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-1\"><span class=\"crayon-i\">T</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-2\"><span class=\"crayon-i\">Q</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-3\"><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-4\"><span class=\"crayon-i\">i</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-5\"><span class=\"crayon-i\">I</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-6\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-7\"><span class=\"crayon-cn\">0R</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-8\"><span class=\"crayon-e\">VB</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-9\"><span class=\"crayon-e\">fN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-10\"><span class=\"crayon-e\">so</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-11\"><span class=\"crayon-e\">Nw</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-12\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-13\"><span class=\"crayon-e\">fw1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-14\"><span class=\"crayon-e\">fpu</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-15\"><span class=\"crayon-e\">WT7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-16\"><span class=\"crayon-e\">pNL</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-17\"><span class=\"crayon-i\">M5V</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-18\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-19\"><span class=\"crayon-cn\">0cZF</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-20\"><span class=\"crayon-e\">H09A</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-21\"><span class=\"crayon-i\">AjYM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-22\"><span class=\"crayon-cn\">1AMf</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-23\"><span class=\"crayon-e\">sdkz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-24\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-25\"><span class=\"crayon-e\">USsgK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-26\"><span class=\"crayon-i\">ZMn9U</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-27\"><span class=\"crayon-cn\">7S48u</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-28\"><span class=\"crayon-e\">oBb1L</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-29\"><span class=\"crayon-e\">yB14g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-30\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-31\"><span class=\"crayon-e\">DRVGWg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-32\"><span class=\"crayon-e\">gh3oJa</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-33\"><span class=\"crayon-e\">BapdY7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-34\"><span class=\"crayon-e\">yJgcZj</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-35\"><span class=\"crayon-e\">mivGN3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-36\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-37\"><span class=\"crayon-i\">TEiQG2M</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-38\"><span class=\"crayon-cn\">8SkokOY</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-39\"><span class=\"crayon-e\">NZww5GT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-40\"><span class=\"crayon-e\">fxloZ0R</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-41\"><span class=\"crayon-i\">hkiOpID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-42\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-43\"><span class=\"crayon-cn\">3ZpdIYrF</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-44\"><span class=\"crayon-e\">eFlSSDyd</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-45\"><span class=\"crayon-i\">bB4RCFgE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-46\"><span class=\"crayon-cn\">25mceTMK</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-47\"><span class=\"crayon-i\">AAJ2Lp6S</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-48\"> </div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-49\"><span class=\"crayon-cn\">5IUVoFSqZ</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-50\"><span class=\"crayon-e\">zHZeuZljY</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-51\"><span class=\"crayon-e\">njCGDBKVs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d872d152ad8910250127-52\"><span class=\"crayon-e\">IgH21Tg5V</span></div><div class=\"crayon-line\" id=\"crayon-58d872d152ad8910250127-53\"><span class=\"crayon-v\">WvGCy5ZtE</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>感觉还可以，当然里面还有一些不完善的地方</p>\n<ol>\n<li>当产生的数量达到一定程度的时候，再获取时由于冲突比较大，导致性能会降低</li>\n<li>因此如果是小型系统，建议采用4个长度，大型系统建议采用6个长度</li>\n<li>现在还没有多长时间之后自动失效的API，建议添加</li>\n<li>需要实现支持序列化的方案</li>\n<li>现在没有同步处理，实际实现中需要考虑</li>\n</ol>\n<p>这个只是化几分钟展示一个思路，并没有经过系统的思考的验证，正式系统请慎重使用。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110637\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110637votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110637\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "front_image_path": "full/6d101732f37176b9ebf1b76e680b97a449f3a892.jpg", "tags": "IT技术,短链接", "praise_nums": "1", "url": "http://blog.jobbole.com/110637/", "create_date": "2017/03/20"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb-50x50.png"], "comment_nums": 0, "title": "Linux 日志终极指南", "url_object_id": "084b15fcc07bc9e85b62fb709a316300", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/daofazi\">道法子</a> 翻译，<a href=\"http://www.jobbole.com/members/upanblack\">Panblack</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.loggly.com/ultimate-guide/logging/analyzing-linux-logs/\">Amy Echeverri&amp;Sadequl Hussain</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><h1 class=\"md-end-block md-heading\">Linux 日志分析</h1>\n<p><span class=\"md-line md-end-block md-focus\"><span class=\"\">虽然提取的时候，不总是和你想的一样简单，但是日志中有大量信息在等着你。在这部分，我们会讲一些基本分析示例，你可以马上拿来处理你的日志（只是搜索里面有什么）。我们还会讲一些高级分析方法，开始的时候可能要花时间来做配置，但会为以后省很多时间。你可以把高级分析的示例用在待解析的数据上，比如生成摘要计数，过滤字段值等。</span></span></p>\n<p><span class=\"md-line md-end-block\">首先我们会演示，你应该如何使用不同的工具在命令行进行日志分析；然后，演示一个日志管理工具，它能够让大多数乏味的工作变得自动化和高效。</span></p>\n<h2 class=\"md-end-block md-heading\">使用 Grep 搜索</h2>\n<p><span class=\"md-line md-end-block\">搜索文本是找到你想要的信息的最基本方法。搜索文本最常用的工具是 <span class=\"\"><a href=\"http://linux.die.net/man/1/grep\">grep</a></span> 。这个命令行工具，大多数 Linux 发行版上都有，它支持你用正则表达式来搜索日志。正则表达式是一种用专门语言写成的语句，可用来识别匹配文本。最简单的正则表达式是把你搜索的字符串加上引号。</span></p>\n<h3 class=\"md-end-block md-heading\">正则表达式</h3>\n<p><span class=\"md-line md-end-block\">这里有个例子，它在 Ubuntu 的认证日志里搜索 “user hoover”：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4154f913864989\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Shell</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ GREP \"USER HOOVER\" /VAR/LOG/AUTH.LOG\r\nACCEPTED PASSWORD FOR HOOVER FROM 10.0.2.2 PORT 4792 SSH2\r\nPAM_UNIX(SSHD:SESSION): SESSION OPENED FOR USER HOOVER BY (UID=0)\r\nPAM_UNIX(SSHD:SESSION): SESSION CLOSED FOR USER HOOVER</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4154f913864989-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4154f913864989-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4154f913864989-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4154f913864989-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4154f913864989-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">GREP</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"USER HOOVER\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">VAR</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">LOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">AUTH</span><span class=\"crayon-e\">.LOG</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4154f913864989-2\"><span class=\"crayon-e\">ACCEPTED </span><span class=\"crayon-e\">PASSWORD </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HOOVER </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.2.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4792</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SSH2</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4154f913864989-3\"><span class=\"crayon-e\">PAM_UNIX</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SSHD</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">SESSION</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SESSION </span><span class=\"crayon-e\">OPENED </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USER </span><span class=\"crayon-e\">HOOVER </span><span class=\"crayon-e\">BY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">UID</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4154f913864989-4\"><span class=\"crayon-e\">PAM_UNIX</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SSHD</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">SESSION</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SESSION </span><span class=\"crayon-e\">CLOSED </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USER </span><span class=\"crayon-v\">HOOVER</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><span class=\"md-line md-end-block\">构造精确的正则表达式很难。例如，假设我们搜索一个数字，比如端口号“4792” ，它也可以匹配时间戳，URLs和其他不需要的数据。在下面针对 Ubuntu 的例子里，它匹配了 Apache 日志，但这并不是我们想要的。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4155c451677165\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep \"4792\" /var/log/auth.log\r\nAccepted password for hoover from 10.0.2.2 port 4792 ssh2\r\n74.91.21.46 - - [31/Mar/2015:19:44:32 +0000] \"GET /scripts/samples/search?q=4972HTTP/1.0\" 404 545 \"-\" \"-”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4155c451677165-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4155c451677165-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4155c451677165-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4155c451677165-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"4792\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4155c451677165-2\"><span class=\"crayon-e\">Accepted </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">hoover </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.2.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">port</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4792</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ssh2</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4155c451677165-3\"><span class=\"crayon-cn\">74.91.21.46</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Mar</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2015</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"GET /scripts/samples/search?q=4972HTTP/1.0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">404</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">545</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"-\"</span><span class=\"crayon-h\"> </span>\"<span class=\"crayon-o\">-</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">延伸搜索</h3>\n<p><span class=\"md-line md-end-block\">另一个有用的技巧是你可以用grep 做延伸搜索。它会输出匹配项的前几行和后几行内容。它可以帮你调试是什么导致了错误或问题。B 选项指定显示匹配项前面的行数，A 选项指定显示匹配项后面的行数。如下所示，我们看到，当有人以 admin 身份登陆失败后， 反向映射也会失败，这说明他们可能没有有效的域名。这很可疑！</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41560678496881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep -B 3 -A 2 'Invalid user' /var/log/auth.log\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12545]: reverse mapping checking getaddrinfo for 216-19-2-8.commspeed.net [216.19.2.8] failed - POSSIBLE BREAK-IN ATTEMPT!\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12545]: Received disconnect from 216.19.2.8: 11: Bye Bye [preauth]\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: &lt;b&gt;Invalid user&lt;/b&gt;; admin from 216.19.2.8\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: input_userauth_request: invalid user admin [preauth]\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: Received disconnect from 216.19.2.8: 11: Bye Bye [preauth]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41560678496881-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41560678496881-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41560678496881-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41560678496881-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41560678496881-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41560678496881-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41560678496881-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Invalid user'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41560678496881-2\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12545</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reverse </span><span class=\"crayon-e\">mapping </span><span class=\"crayon-e\">checking </span><span class=\"crayon-e\">getaddrinfo </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8.commspeed.net</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">failed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">POSSIBLE </span><span class=\"crayon-st\">BREAK</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ATTEMPT</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41560678496881-3\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12545</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Received </span><span class=\"crayon-e\">disconnect </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Bye </span><span class=\"crayon-i\">Bye</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41560678496881-4\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">admin </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41560678496881-5\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">input_userauth_request</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-i\">admin</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41560678496881-6\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Received </span><span class=\"crayon-e\">disconnect </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Bye </span><span class=\"crayon-i\">Bye</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">Tail命令</h3>\n<p><span class=\"md-line md-end-block\">你也可以将 <span class=\"\"><a href=\"http://linux.die.net/man/1/tail\">tail</a></span> 和 grep 搭配起来使用，以获取文件最后几行，或者跟踪日志并实时打印。当你在进行交互式更改比如架设服务器或测试代码更改的时候，非常有用。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41565593011381\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tail -f /var/log/auth.log | grep 'Invalid user'\r\nApr 30 19:49:48 ip-172-31-11-241 sshd[6512]: Invalid user ubnt from 219.140.64.136\r\nApr 30 19:49:49 ip-172-31-11-241 sshd[6514]: Invalid user; admin from 219.140.64.136</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41565593011381-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41565593011381-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41565593011381-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41565593011381-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Invalid user'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41565593011381-2\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6512</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">ubnt </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219.140.64.136</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41565593011381-3\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6514</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">admin </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219.140.64.136</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p><span class=\"md-line md-end-block\">全面介绍 grep 和正则表达式超出了本文的范围，<span class=\"\"><a href=\"http://ryanstutorials.net/linuxtutorial/grep.php\">Ryan 的教程</a></span>里有更深入的介绍。</span></p>\n<p><span class=\"md-line md-end-block\">日志管理系统中有更高效更强大的搜索工具。它们通常对数据建立索引和并行查询，因此你可以在数秒之内快速查询高达 G 字节或 T 字节的日志。相比之下，用 grep ，可能要花几分钟，极端情况下会花费数小时。日志管理系统也像 <span class=\"\"><a href=\"https://lucene.apache.org/core/2_9_4/queryparsersyntax.html\">Lucene</a></span> （译注：一个开源的全文检索引擎工具包）一样使用查询语言 ，它为数字，字段等的搜索提供了简单的语法。</span></p>\n<h2 class=\"md-end-block md-heading\">用Cut，AWK 和 Grok 解析日志</h2>\n<h3 class=\"md-end-block md-heading\">命令行工具</h3>\n<p><span class=\"md-line md-end-block\">Linux 提供了几种文本解析和分析的命令行工具。如果你想快速解析少量的数据，它们很强大，但是处理大量数据要花很长时间。</span></p>\n<h3 class=\"md-end-block md-heading\">Cut 命令</h3>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><a href=\"http://linux.die.net/man/1/cut\">cut</a></span> 命令可以从带分隔符的日志中解析字段。分隔符是类似等号或逗号的字符，用来划分字段或键值对。</span></p>\n<p><span class=\"md-line md-end-block\">比如说，我们想从这个日志中提取用户名：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41569151294928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npam_unix(su:auth): authentication failure; logname=hoover uid=1000 euid=0 tty=/dev/pts/0 ruser=hoover rhost=  user=root</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41569151294928-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41569151294928-1\"><span class=\"crayon-e\">pam_unix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">su</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">authentication </span><span class=\"crayon-v\">failure</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logname</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">hoover </span><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">euid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tty</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruser</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">hoover </span><span class=\"crayon-v\">rhost</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">root</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p><span class=\"md-line md-end-block\">我们可以和下面一样使用 cut 命令，获取第八个等号后边的文本。这是 Ubuntu 上的例子：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4156f420803658\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep \"authentication failure\" /var/log/auth.log | cut -d '=' -f 8\r\nroot\r\nhoover\r\nroot\r\nnagios\r\nnagios</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4156f420803658-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4156f420803658-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4156f420803658-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4156f420803658-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4156f420803658-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4156f420803658-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4156f420803658-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"authentication failure\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4156f420803658-2\"><span class=\"crayon-e\">root</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4156f420803658-3\"><span class=\"crayon-e\">hoover</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4156f420803658-4\"><span class=\"crayon-e\">root</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4156f420803658-5\"><span class=\"crayon-e\">nagios</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4156f420803658-6\"><span class=\"crayon-v\">nagios</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">AWK 命令</h3>\n<p><span class=\"md-line md-end-block\">此外，你还可以用 <span class=\"\"><a href=\"http://linux.die.net/man/1/awk\">awk</a></span>，它拥有更强的解析字段的功能。它提供了一个脚本语言，让你几乎可以过滤出任何毫不相关的信息。</span></p>\n<p><span class=\"md-line md-end-block\">举个例子，假设我们在 Ubuntu 上有如下的日志，我们想提取登陆失败的用户名：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41573152861244\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMar 24 08:28:18 ip-172-31-11-241 sshd[32701]: input_userauth_request: invalid user guest [preauth]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41573152861244-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41573152861244-1\"><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">32701</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">input_userauth_request</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-i\">guest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><span class=\"md-line md-end-block\">下面是使用 awk 的例子。首先，用一个正则表达式 /sshd.*invalid user/ 匹配 sshd 无效用户的那一行。然后使用 { print $9 } 打印第九个字段（默认的分隔符是空格）。这样就输出了用户名。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41576448670969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ awk '/sshd.*invalid user/ { print $9 }' /var/log/auth.log\r\nguest\r\nadmin\r\ninfo\r\ntest\r\nubnt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41576448670969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41576448670969-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41576448670969-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41576448670969-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41576448670969-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41576448670969-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41576448670969-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/sshd.*invalid user/ { print $9 }'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41576448670969-2\"><span class=\"crayon-e\">guest</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41576448670969-3\"><span class=\"crayon-e\">admin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41576448670969-4\"><span class=\"crayon-e\">info</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41576448670969-5\"><span class=\"crayon-e\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41576448670969-6\"><span class=\"crayon-v\">ubnt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><span class=\"md-line md-end-block\">你可以从 <span class=\"\"><a href=\"http://www.delorie.com/gnu/docs/gawk/gawk_26.html#IDX155\">Awk 用户指南</a></span>中获取更多关于如何使用正则表达式和打印字段的信息。</span></p>\n<h3 class=\"md-end-block md-heading\">日志管理系统</h3>\n<p><span class=\"md-line md-end-block\">日志管理系统让解析更容易并且让用户可以快速分析大量日志文件。它们可以自动解析标准日志格式，比如公共 Linux 日志或 web 服务日志。这会节省很多时间，因为你在定位系统问题的时候不用去想如何写你的解析逻辑。</span></p>\n<p><span class=\"md-line md-end-block\">这里你可以看一个来自 sshd 的日志信息，解析出了远程主机和用户字段。这个截图来自 Loggly，一个基于云计算的日志管理服务。</span></p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fdx2hcoct8j20d409m0su.jpg\"></p>\n<p><span class=\"md-line md-end-block\">对非标准格式的日志，你也可以自定义解析规则。最常用的工具是 <span class=\"\"><a href=\"http://www.delorie.com/gnu/docs/gawk/gawk_26.html#IDX155\">Grok</a></span>，它用通用正则表达式库把纯文本解析成 JSON 格式。这是 Grok 的配置示例，用来解析 Logstash 的内核日志 ：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4157a685993181\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfilter{\r\ngrok {\r\nmatch =&gt; {\"message\" =&gt; \"%{CISCOTIMESTAMP:timestamp} %{HOST:host} %{WORD:program}%{NOTSPACE} %{NOTSPACE}%{NUMBER:duration}%{NOTSPACE} %{GREEDYDATA:kernel_logs}\"\r\n}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4157a685993181-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4157a685993181-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4157a685993181-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4157a685993181-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b4157a685993181-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4157a685993181-1\"><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4157a685993181-2\"><span class=\"crayon-e\">grok</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4157a685993181-3\"><span class=\"crayon-v\">match</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"%{CISCOTIMESTAMP:timestamp} %{HOST:host} %{WORD:program}%{NOTSPACE} %{NOTSPACE}%{NUMBER:duration}%{NOTSPACE} %{GREEDYDATA:kernel_logs}\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4157a685993181-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b4157a685993181-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><span class=\"md-line md-end-block\">这是用 Grok 解析后输出的结果：</span></p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fdx2hc1ly1j20nh04v0sl.jpg\"></p>\n<h2 class=\"md-end-block md-heading\">使用 Rsyslog 和 AWK 过滤</h2>\n<p><span class=\"md-line md-end-block\">过滤是搜索特定的字段，而不是全部文本。这让你的日志分析更精确，因为它会忽略其他不需要的日志信息。为了搜索一个字段值，你需要先解析你的日志或者至少有一种基于事件结构的搜索方法。</span></p>\n<h3 class=\"md-end-block md-heading\">如何筛选出同一个应用的日志</h3>\n<p><span class=\"md-line md-end-block\">通常，你只想看来自同一个应用的日志。如果你的应用总是把日志记录在单个文件中，这样很容易分析。如果你要从聚合或集中起来的日志里筛选出和某个程序相关的日志，会很复杂。这里有几种解决的办法。</span></p>\n<ol class=\"ol-list\" start=\"\">\n<li><span class=\"md-line md-end-block\">用 Rsyslog 服务解析和过滤日志。这个例子是将 sshd 应用程序的日志写入名为 sshd-messages 的文件中，然后丢弃事件，所以它不会在其他日志里重复出现。你可以把它加到你的 Rsyslog.conf 文件里试一下。</span></li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4157e458931945\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:programname, isequal, “sshd” /var/log/sshd-messages\r\n&amp;~</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4157e458931945-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4157e458931945-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4157e458931945-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">programname</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isequal</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-i\">sshd</span>”<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sshd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">messages</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4157e458931945-2\"><span class=\"crayon-o\">&amp;</span><span class=\"crayon-o\">~</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<ol class=\"ol-list\" start=\"2\">\n<li><span class=\"md-line md-end-block\">使用命令行工具比如 awk ，提取特定字段的值，比如取 sshd 用户名。这是 Ubuntu 上的例子。</span></li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41583108519217\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ awk '/sshd.*invalid user/ { print $9 }' /var/log/auth.log\r\nguestadmin\r\ninfo\r\ntest\r\nubnt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41583108519217-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41583108519217-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41583108519217-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b41583108519217-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d8799b41583108519217-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41583108519217-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/sshd.*invalid user/ { print $9 }'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41583108519217-2\"><span class=\"crayon-e\">guestadmin</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41583108519217-3\"><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b41583108519217-4\"><span class=\"crayon-e\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d8799b41583108519217-5\"><span class=\"crayon-v\">ubnt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<ol class=\"ol-list\" start=\"3\">\n<li><span class=\"md-line md-end-block\">使用日志管理系统自动解析你的日志，然后点击目标应用的名字进行过滤。这个截图显示了 syslog 的各个字段，在一个叫做 Loggly 的日志管理服务中。如图中文氏图所示，当前正在过滤 sshd 这个应用。</span></li>\n</ol>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fdx2hbjh5yj20h509jdfw.jpg\"></p>\n<h3>如何筛选出错误信息</h3>\n<p><span class=\"md-line md-end-block\">最常见的事情是，人们想看到日志中的错误。不巧的是，默认的 syslog 配置不会直接输出错误的级别，这使得错误信息很难被筛选。</span></p>\n<p><span class=\"md-line md-end-block\">这里有两种方案来解决这个问题。首先，你可以修改 rsyslog 配置，让它输出级别到日志文件中，使得错误信息容易被读取和搜索。在你的 Rsyslog 配置中你可以加一个pri-text <span class=\"\"><a href=\"http://www.rsyslog.com/doc/v8-stable/configuration/templates.html\">模版</a></span>，如下所示：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b41587835836702\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"&lt;%pri-text%&gt; : %timegenerated%,%HOSTNAME%,%syslogtag%,%msg%n\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b41587835836702-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b41587835836702-1\"><span class=\"crayon-s\">\"<span class=\"crayon-ta\">&lt;%</span><span class=\"crayon-v\">pri</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">text</span><span class=\"crayon-ta\">%&gt;</span> : %timegenerated%,%HOSTNAME%,%syslogtag%,%msg%n\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p><span class=\"md-line md-end-block\">这个例子的输出如下，可以看到级别是 err。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4158b781141135\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;authpriv.err&gt; : Mar 11 18:18:00,hoover-VirtualBox,su[5026]:, pam_authenticate: Authentication failure</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4158b781141135-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4158b781141135-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">authpriv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">err</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hoover</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">VirtualBox</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">su</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5026</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pam_authenticate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Authentication </span><span class=\"crayon-v\">failure</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><span class=\"md-line md-end-block\">你可以用 awk 或grep 筛选出错误信息。这是 Ubuntu 下的例子，我们加了开始结束标志 . 和 &gt; ，这样它就只匹配这个字段。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d8799b4158e982183351\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep '.err&gt;' /var/log/auth.log\r\n&lt;authpriv.err&gt; : Mar 11 18:18:00,hoover-VirtualBox,su[5026]:, pam_authenticate: Authentication failure</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d8799b4158e982183351-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d8799b4158e982183351-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d8799b4158e982183351-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'.err&gt;'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d8799b4158e982183351-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">authpriv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">err</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hoover</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">VirtualBox</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">su</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5026</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pam_authenticate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Authentication </span><span class=\"crayon-v\">failure</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><span class=\"md-line md-end-block\">第二种选择是使用日志管理系统。好的日志管理系统会自动解析 syslog 消息并提取出级别字段。只需点一下，就会按指定的级别筛选日志。</span></p>\n<p><span class=\"md-line md-end-block\">这是 Loggly 的截图。显示了 syslog 各个字段， Error 级别高亮显示了，说明正在按级别 Error 过滤</span></p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fdx2hb23nwj20fw0a2t8r.jpg\"></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/11/4ec823de9f4637cdb4ee2f4b27a0aba9.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110660\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110660votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110660\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi\">道法子</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/08/a84a2baaaa98a48bb36349cd6431bcb3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            a programmer,Do one's level best and leave the rest to God's will.I love this saying.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/daofazi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/daofazi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 5, "front_image_path": "full/53395b71a56c4dca845d5d14451a58fe50d36f65.jpg", "tags": "IT技术,Linux,日志", "praise_nums": "2", "url": "http://blog.jobbole.com/110660/", "create_date": "2017/03/23"}
{"front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fdd7ievjs6j20je0b474b.jpg"], "comment_nums": 10, "title": "和程序员谈恋爱，是什么样的体验", "url_object_id": "a851d4a90cc43051a073758b83fc78ff", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/qingfeng6438\">阿慧</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/dating-a-programmer-d302693d10f5#.vqfrwf4t3\">Ms_Teerious</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><em><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fdd7ievjs6j20je0b474b.jpg\" width=\"498\" height=\"285\"></em></p>\n<p style=\"text-align: center;\"><em><span style=\"color: #808080;\">是的！那就是他，以及他的最爱，还有你。（注意他手中的笔记本电脑）</span></em></p>\n<p>我最近读了一篇关于《<a href=\"http://blog.jobbole.com/110595/\" target=\"_blank\">为什么该和程序员约会？我有 20 个理由</a>》的文章。 ……当然了，那篇文章就是程序员写的（你刚刚在期待是什么人写的？以为是其他女生写的？😂😂😂 ）。</p>\n<p>那些理由是真的。未来可能成为程序员女友的朋友，让我来告诉你们，和程序员约会实际上意味着什么！我是过来人，我男朋友就是一个程序员！ 首先，让我们来定义一下什么是「程序员」。</p>\n<p>程序员、计算机程序员、开发者、 码农或软件工程师，指的是那些从事编写计算机软件的人。计算机程序员这一称呼可以指一个领域的专家，或是为多种软件编写代码的通才。 请看我刚刚定义的这类人。😂</p>\n<p><img class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fdd7ij7y9kj208w0aqjrz.jpg\" width=\"320\" height=\"386\"></p>\n<h3>1、他们智商虽高，但却恼人</h3>\n<p>如果不是聪明人，则不能够胜任做他们的女朋友，因为跟不上运行在他们脑中和笔记本电脑屏幕上的所有东西。在程序员和同事谈话的时候，你往往觉得一头雾水。你曾见过程序员们集中在一起，谈论编程的事情吗？天呐！我听过太多的 PHP 和 Laravel 之类的。</p>\n<h3>2、你要下定决心在关系中扮演次要角色</h3>\n<p>因为电脑总是主角。一旦开始和程序员约会，则是同时与他的电脑约会。这是我的应对机制。</p>\n<h3>3、所有事情都和代码有联系！</h3>\n<p>你和他谈论蛋糕（Cake），而他可能想到 CakePHP 。</p>\n<p><img class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fdd7ingvqfj20bo0bo40z.jpg\" width=\"420\" height=\"420\"></p>\n<h3>4、如果你不是一个忙碌的人，或没有事可做，那你别和程序员约会</h3>\n<p>因为如果你想寻找百分百的关注，那绝对是奢求。他将花费数小时来调试，一旦他“沉浸在代码中”，不要打扰！ <strong>你在旁边问你的新衣服是否好看合身，而他却在寻找那个遗漏的分号。</strong></p>\n<h3>5、程序员通常对他们的职业很满意</h3>\n<p>这就是问题所在了。他们太高兴了，导致忘了你才应该是高兴之源泉。</p>\n<p><em><img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fdd7irardhj206k06kglz.jpg\" width=\"236\" height=\"236\"></em></p>\n<p style=\"text-align: center;\"><em><span style=\"color: #808080;\">在这种情况下，是他们的电脑！！！</span></em></p>\n<h3>6、程序员的「T 恤和牛仔裤」综合征</h3>\n<p>我不是唯一对此抓狂的女生。我的意思是，T 恤和牛仔裤是程序员的正式服装（标配）。逛商场里时候， T 恤和牛仔裤；看电影的时候， T 恤和牛仔裤；探望别人的时候， T 恤和牛仔裤……然后他们匆匆穿上连帽衫，并且觉得自己的穿着与以往截然不同，但其实里面穿的还是 T 恤和牛仔裤。</p>\n<h3>7、如果你不是一个有耐心的人，则不能和程序员约会</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d837919de2d514242698\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n程序员：「宝宝，给我 30 分钟时间整理代码，30 分钟后我打给你。」\r\n———24 小时后———\r\n程序员：「宝宝，很抱歉，我忙着写代码，忘了时间。」</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d837919de2d514242698-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d837919de2d514242698-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d837919de2d514242698-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d837919de2d514242698-1\">程序员：「宝宝，给我<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span>分钟时间整理代码，<span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span>分钟后我打给你。」</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d837919de2d514242698-2\">———<span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span>小时后———</div><div class=\"crayon-line\" id=\"crayon-58d837919de2d514242698-3\">程序员：「宝宝，很抱歉，我忙着写代码，忘了时间。」</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>哎！这句话我听过无数次了。</p>\n<h3>8、如果你是那种渴望被关注的人，还是放弃吧</h3>\n<p>如果你在同程序员交往，你需要知道如何给予自己关注，并且保持伴侣的事业。上午12点，他们在编程！ 凌晨3点 ，仍然在编程， 在机场，在旅行过程中，依旧在编程。</p>\n<h3>9、生日、情人节、周年纪念日的礼物</h3>\n<p>这些是同程序员交往中最难的部分。我的意思是，你不能决定是否接受正常人的物品或是同程序有关的一些东西。请查看我在十月份的 Google 搜索历史“给程序员男朋友的最好礼物”。</p>\n<h3>10、同程序员交往，自然而然你也成了半个程序员</h3>\n<p>所以，当他开始谈论 PHP 、 Laravel 、开源项目时。你实际上可以参与……这也拉近你们的关系。</p>\n<h3>11、他们有激情，把时间和精力集中在可以俘获他们心的事情上：编程！</h3>\n<p>哦？你以为我要说的是你吗？再想想吧！😂😂😂</p>\n<h3>后话</h3>\n<p><span style=\"font-weight: normal;\">关于程序员我有数不尽的话题，不过还是留些话题下次再讲吧。</span></p>\n<p><span style=\"font-weight: normal;\">虽然钱在滋润你的愚蠢，并且使你自认为像是世界上唯一的女人，同程序员交往不是所有的乐趣和游戏。</span></p>\n<p>然而，最佳的交往对象还得说是程序员，因为他们没时间出轨。唯一和你争宠的对象甚至都不是个活物（除非他给自己的笔记本起了个人类的名字，那你可就惨咯）。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fdd7iwnytlj20go0b37c2.jpg\" width=\"600\" height=\"399\"></p>\n<p>亲爱的程序员男朋友：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fdd7j86afcj20fo0bt0v2.jpg\" width=\"564\" height=\"425\"></p>\n<p><span style=\"color: #808080;\">……我甚至不是个程序员！！！</span></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/f9e94e087837b17681c87206c9d540dd.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/748ed21a8038cdafa65b3b4ab9a0185a.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110485\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110485votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110485\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 10 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438\">阿慧</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/c169e93746e89947e9a2f0fce3f937cc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            什么东西没头没尾没中间？        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/qingfeng6438\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/qingfeng6438/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a> · <a title=\"QQ：1305735677\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：chenahui1996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "front_image_path": "full/3f55539505b6e2577a8c40aaf3f5219090f21ec9.jpg", "tags": "趣文小说,恋爱,约会", "praise_nums": "3", "url": "http://blog.jobbole.com/110485/", "create_date": "2017/03/21"}
{"front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3cb7n6j20sg0j0wff.jpg"], "comment_nums": 6, "title": "常坐电脑前面，这些健康问题你注意到了么？", "url_object_id": "48d8039208eb2f9711bcf5331f976618", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://prog3.com/article/1970-01-01/292096\">prog3.com</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p class=\"p0\">【伯乐在线导读】：本文要讨论的健康问题，其实并不仅仅限于程序员，其他那些需要长期坐在电脑前的工作，比如：网络编辑、网站管理员、IT 从业人员等，也会面临同样的健康问题。本文目的就是要让业界的朋友们对自己面临的健康问题引起关注。</p>\n<p class=\"p0\">Zed Shaw，程序员，吉他手，作家，《笨方法学 Python》的作者。</p>\n<p class=\"p0\"> <img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fdtb36v11oj208c08c0v2.jpg\" width=\"300\" height=\"300\"></p>\n<p class=\"p0\" style=\"text-align: center\">（本文作者：Zed Shaw ）</p>\n<p>我在最近几次的博客中谈论了《Python The Hard Way Learn | 笨方法学 Python》这个话题，现在我想再开一个新话题：<span style=\"color: #ff0000\"><strong>程序员在职业生涯中可能遇到的健康问题</strong></span>。</p>\n<p>我发现很多程序员都认为敲代码对他们的身体健康貌似没什么影响。我真的非常希望，大家能对程序员面临的健康问题引起重视并从中获益，至少不要像我和其他一些人一样，身体犯了毛病才去后悔。这个话题我应该不会写到我的书里，因为要展开的话内容太多。但是我会在这里写一个“简短版”。你可以对号入座看看自己的情况，也可以参考一下我引用的的那些资料。</p>\n<h3>我的背景和专业</h3>\n<p>我曾经是一名美国军人，并练习过多种武术。最近，我不太痴迷于那些“硬武术”了，但是对于瑜伽，冥想等这些简单的身体活动还是很喜欢的。我的身体非常健美，并且能做到保持，这要感谢我长期以来养成的习惯。首先我还是快速列举一下我学过的武术项目吧：忍术、合气道（一种日本武术技艺——译者注）、柔道、巴西柔术、泰拳、翼宗拳、卡泼卫勒（一种巴西自卫术——译者注）、菲律宾魔杖术，上述的这些武术并不是按照系统训练一样连续学习的。而我一直坚持训练的武术只有泰拳，大约持续了6年。其他的大概也就是各自学了个一到两年的样子。</p>\n<p>我去过很多地方，也从中学到了很多东西。并且，我在军队服役的时候，大约有连续两年的时间，我的身体受到了严格的考验。如果我记得没错的话，在军队里的训练每次会持续2到4小时，除此之外别无他事。以至于后来，即使处于休假状态，我也会保持体重，敏捷性和身体力量。我可能没法告诉你该怎么减肥。因为我生来就不需要减肥。所以在参考我的建议时，你一定要结合自身的情况。在了解我的身体状况以后，随着年龄的增长，我开始在身体柔韧性上下功夫。游泳、舞蹈以及一切避免直接身体冲撞的运动都是我推荐的。我尤其推荐普拉提，瑜伽，这些运动往往被众人认为很难，但实际上并不是如此。我还对我的手下了很多功夫，一会儿我就会说这个事情。</p>\n<p>写了这么多，是为了让读者了解我的能力。但是更重要的是，在做到我上面说的这些的同时，我还是一个职业程序员。在我从军队退役以后，我平均每天学习8到16小时。此外我还弹吉他，并且我避免了腕管综合征和重复性劳动损伤的危害。我希望我在健康方面的经验能够帮助你恢复或者维持你的健康。</p>\n<h1>程序员面临的普遍问题</h1>\n<p>程序员是一种在劳损方面欺骗性很强的职业，部分因为是这个职业看上去只是坐在那里，什么体力也没有消耗，并且很多程序员对他们的身体情况也毫不重视。不过你真的应该留意一下健康问题，因为如果你身体非常棒，那么在心理方面你也会非常和谐，进而你就可以把精力放在更重要的事情上。否则你还要去担心那些恼人的健康问题，这是非常不爽的。</p>\n<p>很显然，“注意饮食”、”多去户外”、”注意运动”这些老生常谈的东西肯定是正确的。所以这里我不跟你谈吃、运动或者练武术能保持健康什么的。如果你对运动或者武术感兴趣，你可以去找专业的教练来指导你。</p>\n<p>我真正想说的是，因自身职业原因，程序员可能面临的那些健康问题。这些问题的成因都非常简单明显，稍加注意根本就不会发生，不过程序员们却并没意识到这一点。</p>\n<ul>\n<li>因重复性劳损导致的手腕疼痛</li>\n<li>因长期盯着滚动的屏幕造成的眼部问题</li>\n<li>因为坐姿不对（尤其是背部太低或者肩膀太高）造成的背部问题</li>\n<li>因为该去厕所的时候不去造成的肠道和泌尿系统问题</li>\n<li>因为喝水不够或者喝了太多咖啡而造成的脱水问题</li>\n<li>因为久坐而造成的痔疮或者前列腺问题。是的，我也面临这个问题。</li>\n<li>因为接触阳光不足造成的缺乏维生素D</li>\n<li>因熬夜或者喝太多咖啡造成的睡眠失调</li>\n<li>因缺乏伸展而造成的身体僵硬或酸痛</li>\n</ul>\n<p>我也曾经在一段时间内面临过上述的各种健康问题，因为我的程序员工作，弹吉他以及不太科学的举重锻炼。后来我解决了大多数的健康问题，并保证以后不会再犯，只有少数几个问题需要周期性地解决。也许你觉得这些健康问题很愚蠢，不过相信我，即使你没有，很多程序员也会面临这些问题的困扰。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3cb7n6j20sg0j0wff.jpg\" width=\"540\" height=\"361\"></p>\n<h1>主要原因：</h1>\n<p>总的来说，这些健康问题的成因可以归结为对于编程的“着魔”。如果你想要成为优秀的程序员，就像我想要的那样，你就要排除其他一切干扰去掌握编程技术。这样即使你编程10个小时也不会想到要去洗澡，你也不会按时吃饭，这些行为模式都源自于你对“成为真正程序员”的疯狂信仰。</p>\n<p>实际情况是，真正的程序员其实和啥子没什么区别。你不按时吃饭，甚至连定期啪啪啪都做不到。你跑两步就开始喘。你的体内器官出现问题，但却并不是因为疾病。说实话，为了成为一个优秀程序员而把自己弄垮，可不是什么值得的事情。</p>\n<p>所以，当你了解到我是如何解决这些健康问题的时候，记住最重要的是要在生活和编程、工作之间保持平衡。相信我，如果你能放松心态保持健康，你在编程方面甚至能做到更好。</p>\n<h1>手腕疼痛</h1>\n<p>这个问题大概是我最常见的一个健康问题。因为我既是程序员又是吉他手，我经常弹吉他并且弹奏的时间很长。从22岁我成为程序员开始，我就周期性地遭受手腕疼痛的困扰。不过我通过合气道练习来有效地治疗手腕疼痛。</p>\n<p>如你所知，合气道技术中有很多神奇的手腕练习动作，比如拉伸、撕扯、反向关节技等等，能让你的手腕变得既强壮又柔韧。</p>\n<p>我就是通过这些练习来修复关节错位和疼痛问题，并且靠这种练习做到了长时间编程且不造成手腕劳损。我唯一一次遇到问题是因为我换了个新键盘，新键盘的按键布局非常怪异，所以造成我打字以后手腕很疼。但是通过一周的手腕练习以后，我的手腕就又变得很强壮了，问题迎刃而解。</p>\n<p>当然，如果你现在患有严重的腕管综合症或者其他类型的重复性劳损症，在尝试自主练习恢复之前还是要咨询一下医生。如果你已经开始自我恢复练习了，那么注意要慢慢来，不要伤到自己。拉伸动作太大造成伤害就不好了，拉伸只要做到“稍微不适”的程度即可。如果你真的把自己拉伤了，那么就不要这么做了。</p>\n<p>其实每次拉伸对你来说就是一种“放松”。这很难用语言解释，你把关节强制掰到某个位置，其实是让关节能够到达这个位置然后放松，或者说是能让你关节的活动范围更多一点点。</p>\n<p>记住这个理念，下面的这些视频能为你演示如何做这些关节方面的练习</p>\n<ul>\n<li>Reverse Wrist 反向腕关节练习</li>\n<li><a href=\"http://www.ehow.com/video_2354920_twisting-wrist-aikido-stretch.html\">Twisting Wrist腕部扭动练习</a></li>\n<li><a href=\"http://kiwi.kz/watch/32max3wdu3ha\">Bent Wrist Fingers Out 腕部和手部向外弯曲练习</a></li>\n<li>Bent Wrist Fingers Down 腕部和手指向下弯曲练习</li>\n</ul>\n<p>下面就向你解释了在你久坐打字之前如何去开展这些练习：</p>\n<ol>\n<li>首先，你要做一下热身，把你的双手放在身体前部，然后快速地做抓空气的动作，重复20次，越快越好。然后抖抖手腕放松一下，接着转动你的手腕，正向和反向各10次。</li>\n<li>挑一个你最擅长的练习模式作为开始，然后用中等速度做5-10组。</li>\n<li>继续做其余的练习，每做完一个练习就抖抖手和胳膊，转动手腕，让关节重新复位。因为这些练习都是涉及到关节的，所以每组做完了以后让关节复位很重要。</li>\n<li>一定不要给你的手腕施加太大的压力。练习就做到刚刚让关节感觉到变化并放松即可。传说中的“练得越狠收获越大”只会让你受伤。</li>\n</ol>\n<p>每次你开始打字之前都要做运动，每天都要坚持，不过中途随时可以停下来。这些运动不会占据你很多时间，一开始可能有点不适，但是很快你的手腕就开始适应这种“复位”锻炼了，然后你的感觉就会好很多。</p>\n<p>有件事情要再强调一次：<span style=\"color: #ff0000\"><strong>开始锻炼之前先咨询医生</strong></span>。擅自开始进行锻炼是存在风险的，所以如果你自己把自己弄伤了可不要怪我没提醒你啊。这些练习在千年的武术套路中已经不断加以实践了，所以我知道它们是安全的，不过“安全”这个概念因人而异。如果你做得不对，真的可能会伤到自己。所以先跟你的医生谈谈，然后再考虑开始练习的事情。</p>\n<h2>吉他手的情况更糟：</h2>\n<p>如果说程序员都会因为职业原因而患上腕管综合症的话，那么吉他手和贝斯手的情况就更加糟糕了。对很多人来说，一些大腕音乐家声称自己“每天练琴8小时”，“每天练琴16小时”，这让人感到神秘。因为这种负荷的练习会让这些大牌吉他手严重损伤自己的健康，甚至可能让他们以后永远都没法再弹琴了。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3hvosbj20sg0j03zv.jpg\" width=\"540\" height=\"361\"></p>\n<p>吉他对你的手来说真是要求很高的乐器，所以你的手只要有一点点疼痛就能让你弹不了吉他。我是在学校里明白这个道理的，当然我当时是个白痴什么都不懂，我相信我的导师告诉我的话，每天弹8小时。我就照着字面的意思，每天连续弹8小时，结果是一个月下来，我的手快废了。</p>\n<p>我的大拇指长出故此，其他的手指也基本没法看了。我的手腕僵硬，手指也不能灵活运动了。我当时就是不听劝告，其实任何新事物都应该循序渐进的，就像健身一样。</p>\n<p>我花了一年半的时间来恢复，其间做了如下的事情：</p>\n<ol>\n<li>找了一把合适的吉他，不伤手的。“什么吉他都一样，没区别”这种观念简直是屁话。你需要找一把不会伤你手的吉他。</li>\n<li>做上一节提到的各种联系，尤其是针对手指部分的。</li>\n<li>通过一套练习来慢慢增加我的手指和大拇指的力量以及柔韧性。</li>\n<li>坚持专注于用更放松的方式来演奏，这样我的按弦动作就会更轻。</li>\n<li>注意手腕弯曲程度，避免受伤。</li>\n<li>改变演奏姿势，使得我在快速的演奏中不用紧握吉他，让我的按弦手的大拇指在琴颈背后的位置更加舒服。</li>\n<li>调整吉他的高度，使得肩膀和手在拿吉他演奏时更加舒适。</li>\n<li>坚持站立演奏，尽量减少坐着演奏的时间，因为坐着演奏的姿势很奇怪。如果一定要坐着演奏，那么要经常更换坐姿。</li>\n</ol>\n<p>做出这些调整后，去年我的手终于感觉好了很多，然后恢复了，不过为了不让我自己再受伤，我也有不少损失。我是个老家伙了，这些保护措施对我来说很重要，但是也意味着那些可能伤到手的事情，我再也不能做了。</p>\n<p>我的手就是我的生命，这意味着拳击、卡泼卫勒，还有那些其他我感兴趣的武术都不能再做了。我可不能让我的手浪费在击打沙袋这种活动上。</p>\n<h1>眼疲劳：</h1>\n<p>我想这对我来说并不是什么大问题，但是读者则需要时刻注意自己的视力。我年轻的时候视力测验是20分满分，但是这么多年来盯着电脑让我的视力有了“些许下降”。我有一副轻度视力矫正眼睛，这些天我一直戴着，哪怕有时候我不需要很仔细看东西的时候我也戴着。对于我来说，世界稍微有一点模糊都是很烦人的。</p>\n<p>早年的时候，大家还整天在用CRT显示器，老显示器的闪烁废了很多人的视力。那时候也有液晶显示器，但是对字体的渲染效果非常糟糕。感谢苹果的专利（我觉得是苹果的专利）让电脑能够在液晶显示器上正常渲染字体。当然还是有很多人认为苹果的字体渲染看上去有点“模糊”，如果是这样的话，那只能说你没能体验到我对字体渲染改进的欣喜。</p>\n<p>我的情况是，我每天花两小时时间，完全不看电脑。取而代之的是我用这些时间来做一些完全不用眼的事情，比如弹吉他，或者出去散个步什么的。这些事情我一次可能做不满2小时，但是我保证我每天离开电脑至少达到2小时。</p>\n<p>这种做法对缓解头疼很有效。程序员经常抱怨说屋子里的灯光是导致头疼的原因，但实际上，错误的字体，屏幕上糟糕的字体，喝水不够以及长时间坐在电脑前面不运动，才是导致头疼的真正原因。</p>\n<p>如果真的在意灯光的因素，那么与其去做一些极端的事情（有的程序员真的把办公室里的所有灯都关了），还不如调整一下屋里的采光，以及把你的桌面主题调节成适合显示器型号和屋内光线的模式。合理调配屋内的光线，显示器亮度，显示质量，字体以及桌面主题颜色，会让你的感觉好很多。</p>\n<p>但最重要的是，一定要按时休息。</p>\n<h1>背部问题：</h1>\n<p>我真的非常幸运，大部分的时间里我的背部都很健康。甚至是在我久坐在椅子的那部分时间里，我的背部都很强壮而且柔韧性很好。</p>\n<p>对我来说，问题在于背的上半部，脖颈以及肩膀。我习惯支起键盘，促使我的身体坐直。实际上在我开始打字的时候我注意到我并没有坐得很直，所以我需要迫使自己改正。</p>\n<p>现在看来，对椅子的选择很重要，我比较推荐 Aeron 办公椅，板凳或者长凳那种。我现在很喜欢我的40美元的钢琴凳，我练习钢琴的时候就用它。凳子没有靠背，所以我必须让自己坐直，这就会用到我的核心肌肉（腹肌和背部肌肉）。</p>\n<p>我的肩膀一直比较紧张。在我注意力很集中的时候，我的肩膀处于缩紧的状态，导致我的整个上背部产生疼痛，并通过神经一直向上传导到我的脖子和头。如果我练习吉他的时间过长，这个问题会变得非常严重。</p>\n<p>然后我找到的最有用的办法是上肢伸展运动和俯卧撑。上肢运动的做法是，抓住门框，然后把一直手臂或者两只手臂朝一个不同的方向拉。如果你的手臂僵硬，你可以尝试如下的动作：</p>\n<ol>\n<li>用一直手抓住门框，手掌面向自己，然后把肩部往外拉，这样就可以拉伸你的胸部以及你肩部的前侧。</li>\n<li>用一只手抓住门框，让你的手臂与身体交叉（请自行脑补姿势——译者注），保持手掌朝向身体（某种反向的姿势），然后拉动肩膀，使得肩膀的背侧得到拉伸。</li>\n<li>双手从前方拉住位于头上的门框，然后离门稍微远一些，使得你的身体能够向下倾斜，并能做出拉动手臂和向后的动作。</li>\n</ol>\n<p>如果做了这组动作，并且完成肩部扭动和身体放松，你的感觉就会好很多。这套动作也可以在你每天上班之前和手腕练习一起做。</p>\n<p>另一种有效的锻炼方法就是做俯卧撑。但是我在开始工作之前是不会做俯卧撑的，因为这个运动太消耗体力，对工作不利。我是在晚上睡觉之前做10个俯卧撑。只要10个就足够锻炼你的胸部，背部，手腕和颈部了。做的时候不要太快，慢慢做，要注意保持身体平衡。</p>\n<h1>脱水：</h1>\n<p>这个问题很简单，但是我自己却常常犯。我每天要喝一吨咖啡，为此我必须要喝很多水来平衡喝咖啡的脱水效应。如果不这么做的话，可能就会造成头疼，或者其他什么问题。脱水的问题在于，如果感觉不到不舒服，你就不会引起重视，但是一旦感觉到了不舒服，往往问题已经很严重了。</p>\n<p>我的建议是，并且我已经在这么做了，无论你喝什么饮料（只要不是水），喝一瓶饮料就喝同样量的一瓶水来平衡。我还建议你少喝碳酸饮料。这些碳酸饮料里面放了很多恶心的假糖，只会让你变胖和得糖尿病，并且对缓解脱水一点帮助都没有。能喝点儿黑咖啡当然是好的，但是记得也要喝些水来平衡。</p>\n<h1>肠道和泌尿系统问题：</h1>\n<p>好吧，这个话题要是细说就太恶心了，所以我就不细说了。但是我要强调的是：</p>\n<blockquote><p>该上厕所的时候就赶快去！别憋着。</p></blockquote>\n<p>你可能不相信这个建议多重要，我在年轻的时候经常听人这么跟我讲。因为我像“真正的程序员”一样，在编程的时候不喜欢被打断，所以我一般能憋多久就憋多久。但是这么做的坏处是，因为肠蠕动的原因，一会儿你就失去了上厕所的感觉了，但是你的便便累积了下来。</p>\n<p>这最终会导致便秘，并影响你的健康。对于泌尿系统来说，憋尿的危害也许没有便秘那么大，但是也会造成尿道感染或者其他一些你意想不到的毛病。</p>\n<p>所以如果你已经深受憋着不上厕所的危害，那么你要做的就是多吃点儿纤维片，然后请两天假待在家里，因为你会经常跑厕所的。</p>\n<p>然后，当你有感觉时，赶快去！我跟你说，也许你在上厕所的时候能想出什么值好几百万的点子呢。</p>\n<h1>痔疮和前列腺的问题：</h1>\n<p>如果你该上厕所的时候憋着不去，那么还可能造成的一个问题就是你可能会得痔疮。是的，这个词儿听上去很恶心，我保证我以后不再提这么恶心的东西了。但是，很多程序员对这个问题羞于启齿，那么就让我来跟你们说明这个事情吧。下列不好的习惯其实我做过一次到两次：</p>\n<ol>\n<li>久坐</li>\n<li>搬运重物，但没有使用合适的工具</li>\n<li>该去上厕所的时候不去</li>\n<li>不想上厕所的时候强迫自己上厕所</li>\n<li>最糟糕的是：长时间坐在马桶上看书 （伯乐在线补充：长时间坐马桶玩手机更要注意）</li>\n</ol>\n<p>我跟你们说，最后一个才是真正的大杀器。如果不是必要，那么就不要在马桶上久坐。因为这样会让你身体的重量和肠道的重量都施加到你的直肠上了，要知道你的直肠本身就很有压力了。很恶心是不。而且此时你的血管是处于不自然状态的，血压会上升，所以会导致痔疮。</p>\n<p>这些事情不但听上去恶心，而且潜在的危险也很大。是的，你很可能会因此得痔疮，严重的话会造成各种出血现象。如果得了痔疮，那么请立刻去看医生。如果需要手术，那么马上就做。我虽然没得过痔疮，但是也就差一点儿而已。有一年的时间，我在减体重，工作环境是仓库，而且我长时间编程，并且不及时去上厕所。</p>\n<p>是的，我那个时候很傻。所以不要再犯我以前犯过的错误了。确保做到以下三件事情，这样能让你的屁股周边保持健康：</p>\n<ol>\n<li>多吃蔬菜，如果你不爱吃蔬菜，至少要吃点儿纤维片</li>\n<li>该去厕所就去厕所，别憋着</li>\n<li>不要给自己太大的压力。</li>\n</ol>\n<p>在这些方面不注意的话，你可能会得前列腺方面的疾病，这类疾病多少都和久坐有关。所以能站起来走走就起来走走，多休息休息，就能解决这类问题。如果你发现你尿液里有血，那么说明问题比较严重了，应该马上去看医生。如果你尿频，也应该去看医生。</p>\n<h1>缺乏维生素D：</h1>\n<p>维生素D是一种奇怪的东西。你晒会儿太阳就能得到维生素D，而且不用晒多长时间。根据阳光的强度，大约晒太阳5-30分钟即可。这同时依赖于你体内的钙含量以及磷酸盐的缺乏程度。如果你饮食规律，并且不常吃像薯片这样的垃圾食品的话，那么问题不会很大。</p>\n<p>有的时候，你可能会情绪低落，牙齿不好，身上哪儿都疼（例如胳膊上的骨头疼），肌肉紧张等等，总的来说就是身体不爽。这个时候你可以选择去看医生，不过可能出去晒个30分钟的太阳也能解决问题。</p>\n<p>实际上，我认为这些问题可能是硅谷这些创业公司提供的饮食服务造成的。因为有了这些，你就会长期待在办公室里，根本不愁没有吃的。然后办公室里面的灯光又比较暗，所以阳光很强的时候你也不愿意外出。再加上可能存在的不良的睡眠习惯，你很可能就缺乏维生素D了，而且还毫不自知。</p>\n<p>所以你要做的就是，不要去贪中午公司给提供的饮食，出门去买食物，顺便走走路，晒晒太阳，这种方式给你带来的好处可比你想象的要大。而且，外面的食物也不错哦。</p>\n<p>我住在温哥华和西雅图的时候，有轻微的维生素D不足的情况。因为这两个地方一年四季没几天能看见太阳，对我来说简直太糟糕了。有些人能忍受这种气候，但是对于我这种从小在热带海岛气候长大的人来说，这种气候简直就像是谋杀。</p>\n<p>所以，如果你能晒到太阳，那就快去晒吧。</p>\n<h1>睡眠紊乱：</h1>\n<p>我的睡眠习惯一直都不是很固定，总的来说要根据季节和我在的区域来决定。在有些地方我就习惯于在晚上做事，晚睡晚起。后来我搬到旧金山以后，我就养成了早起的习惯，晚上也不熬夜了，所以最近一段时间我感觉健康多了。</p>\n<p>不过有的时候，我也不知道为什么，我就是觉得在晚上或者天快亮的时候做事比较有效率，无论是写代码还是做音乐都是如此。我认为很可能是因为我的大脑在这些时候比较累，所以反而比较放松。还有一个可能的原因就是这些时间比较安静，所以我就能坚持做我要做的事情，减少干扰。</p>\n<p>无论采用什么方式，早起而晚睡这件事情对睡眠肯定是不利的。我发现随着年龄的增大，我更倾向于早起了。我觉得我在一天中清醒的时间越来越长。如果我睡得特别晚，或者喝大了的话，第二天起来都会头疼。</p>\n<p>如果你有睡眠方面的问题，那么我有一个非常简单的冥想法推荐，我自己用这个方法有几年的时间了，能够帮助你解决问题。这需要一点耐心，但是非常有效，而且见效很快。</p>\n<p>首先，选一个你能买得起的最贵的床。2000美元的床基本就是刚起步的水平。我花了2200美元去买了一个Tempur-Pedic的床。真是物有所值啊。</p>\n<p>现在你有了很好的床了，然后你就可以开始练习如何让自己睡着了。下面就是一个如何让自我催眠的好办法：</p>\n<ol>\n<li>关掉屋里所有的灯，让一切静音</li>\n<li>平躺，把手放在你身上舒服的位置，或放在身侧</li>\n<li>慢速深呼吸并吐气，并想象你能看见你呼吸的气流</li>\n<li>一旦你开始成功想象自己的呼吸，然后开始想象你能看透窗户，窗外是大片开阔的星空</li>\n<li>呼吸中，想象你自己漂浮起来，慢慢穿过窗户，然后飘入到星空当中，</li>\n<li>让这种状态持续，让周围的环境飘入你的床前，再飘出，直到一切都消失</li>\n</ol>\n<p>这样，你大概在步骤4或者5的时候就能睡着了，如果还没有的话，那么让自己继续飘着融入环境直到你睡着了为止。</p>\n<p>如果你患有严重失眠的话，那么上面的方法就不适合你了，尽快去看医生吧，或者你可以疯狂健身1到2小时。健身绝对能够帮助你入睡。</p>\n<h1>身体僵硬和柔韧性问题：</h1>\n<p>如果你长期觉得身体“僵硬”或者在运动方面不够理想，那么很可能需要做一些日常拉伸运动来改善。最好的办法是一周做一次瑜伽，然后平时再做一些其他的练习。如果你做不到这一点，那么就按照一些书上介绍的基本的拉伸知识来做吧，图书馆或者书店里都有这类书的。只需要最简单的那种书就可以，并不需要搞得太复杂。</p>\n<p>我觉得如果你能在晚上睡觉前做5-6组比较大幅度的伸展运动，就会对你放松身体有很大帮助，你也能在健康和自我感觉方面得到很大的改善。</p>\n<p>身体上的拉伸也能放松你的精神，做一做瑜伽，或者做30分钟拉伸运动，再去洗个晨澡，是帮助自己提升创造力，促进大脑运动的好办法。如果还能结合冥想一起锻炼，那么你会发现你的精神适应能力会得到显著的改善，并能做到很多以前做不到的事情。</p>\n<p>我不清楚其中的原理，但放松自己的精神，确实有助于提升创造性以及激发创意。</p>\n<h1>千里之行，始于足下：</h1>\n<p>本文可能对于一个人来说包含了太多的内容，说真心话伯乐在线是希望您的身体完全健康，一条都不用参照的。不过如果您没有这些问题，我还是建议您可以尝试一下这些方法，出于预防的目的。如果你已经决定开始尝试，那么您需要采用一种简单的“编码热身”的方法，就像你在写代码之前做的那样。</p>\n<p>下面的这些事情，是我在我写代码，弹吉他之前，或者身体僵硬需要运动之前做的：</p>\n<ol>\n<li>转动所有关节，手腕，手臂，脖子，背部以及胯部，每个关节画几个小圈，正向5次，反向5次</li>\n<li>做少量几组腕部练习，每组间抖手腕放松</li>\n<li>把手臂伸向头部上方进行拉伸，举得越高越好，然后向后拉伸，拉伸越大越好，然后在身体前方做手臂交叉拉伸</li>\n<li>最后，用手做头部的拉伸，把头拉向右、左、前、后，动作要小心，幅度要小。</li>\n</ol>\n<p>如果你能做到这些，那么你就可以避免很多程序员面临的健康问题。因为编程并不是什么重体力活，所以很多健康问题其实是可以自己避免的，而你要做的就是做上述的那些练习。</p>\n<p>不过，如果你有特定的健康问题，那么你需要咨询你的理疗师，如果理疗师说没什么大碍，你也可以听听其他人的建议。我在这里所说的一切方法都是不是什么极端或者古怪的东西，都是些基本的运动练习，也符合常识，所以对于医生来说，这些做法应该是没问题的。不过我可不想被人起诉说是在让人误入歧途，所以我强调过了，一切要先问问再做。</p>\n<p>希望这篇博客的内容对你有用，如果没有用的话，那么记住我的建议<span style=\"color: #ff0000\">是要先问问医生再做，以免你被我误导</span>。如果幸运的话，你可能并不存在任何健康问题，但是在我看来，基本上每个程序员都多多少少地有我提到的各种问题。</p>\n<p>所以，一定要自己保重身体。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/78805a221a988e79ef3f42d7c5bfd4187.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110628\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110628votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110628\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 13 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/5423/Corbis-42-221258652.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            黄小非：毕业于重庆大学计算机系，南开大学软件工程硕士，SCJP。 目前在一家国企信息中心任职软件开发工程师。主要技术兴趣为Java平台相关技术、系统构架、C/C++、计算机图形学等。（新浪微博：@黄小非）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/huangxiaofei\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/huangxiaofei/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 48</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 13, "front_image_path": "full/e0ecd0751fc329d2f703a677f8e848dc4aa19c86.jpg", "tags": "职场,健康,程序员", "praise_nums": "3", "url": "http://blog.jobbole.com/110628/", "create_date": "2017/03/20"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/d8ff4fd532a1a30d821049d62c62d106.jpg"], "comment_nums": 0, "title": "错误的抽象", "url_object_id": "9e0321f9a362adcc138e72f15b4e2c39", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/randomli\">欣仔</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction\">Sandi Metz</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>这篇文章本来是我在Chainline Newsletter写的，不过后来我经常在推特上收到相关内容的@，所以我现在在我的博客上重新发布这篇文章，内容略有修改。</p>\n<p>我一直在思考“错误的抽象”所带来的结果，我在RailsConf2014“细枝末节”的演讲中有一部分说道：</p>\n<blockquote><p>重复是比错误的抽象更低成本的。</p></blockquote>\n<p>在摘要中，我也建议道：</p>\n<blockquote><p>建议使用重复而不是错误的抽象。</p></blockquote>\n<p>这个长篇演讲中的小插曲却一石激起千层浪，引起了强烈的反响。少数人觉得我糊涂了，但是更多的人对下面这句表示认同：</p>\n<blockquote><p>这些，无数次的这些情况！很多条都像如下这条这么说！“@BonzoESC:”重复是比错误的抽象更低成本的“ @sandimetz @rbonales pic.twitter.com/3qMI0waqWb”</p>\n<p>-41个蓝色调（@pims）2014.3.7</p></blockquote>\n<p>这些反应的力量使我意识到“错误的抽象”所带来的问题是如此普遍和棘手，下文是我提出的几个问题：</p>\n<p style=\"padding-left: 30px\">1、程序员A发现了重复。</p>\n<p style=\"padding-left: 30px\">2、程序员A抽取了重复部分并给它命名。</p>\n<p style=\"padding-left: 30px\">这就创造了一个新的抽象，它可以是一个新的方法，甚至也可能是一个新的类。</p>\n<p style=\"padding-left: 30px\">3、程序员A用这个新的抽象代替了重复。</p>\n<p style=\"padding-left: 30px\">吼！这段代码棒极了，程序员A欢快的跑了起来。</p>\n<p style=\"padding-left: 30px\">4、时光流逝。</p>\n<p style=\"padding-left: 30px\">5、针对目前这个近乎完美的抽象出现了一个新的需求。</p>\n<p style=\"padding-left: 30px\">6、程序员B被分配了实现这个需求的任务。</p>\n<p style=\"padding-left: 30px\">程序员B认为保留这些原来的抽象是荣誉攸关的，但是因为每种情况都不太一样，只能修改这些代码来接收参数，然后根据这些参数的值再加上执行逻辑的条件式来得到正确的结果。</p>\n<p style=\"padding-left: 30px\">一个曾经通用的抽象现在却需要根据不同情况做出不同表现。</p>\n<p style=\"padding-left: 30px\">7、一个新的需求出现。<br>\n程序员X。<br>\n又增加一个参数。<br>\n又增加一个条件式。<br>\n循环往复直到代码不可维护。</p>\n<p style=\"padding-left: 30px\">8、此时你在这个故事中登场了，然后你的生活戏剧性的急转直下。</p>\n<p>现有的代码有很强的影响力，其存在就说明它的正确性和必要性。这些代码代表了我们的努力，所以我们有很强的动机保卫这些努力的价值。但不幸的结局是这些代码越复杂越难懂，也就是说，创造这些代码的投资越多，越让我们感到维护它很有压力（这就是“沉没成本误区”）。犹如潜意识告诉我们：“神啊，这太难懂了，肯定调试了很久才调好吧。这段代码肯定很有用，不能让这些努力白费掉。”</p>\n<p>当你在如上这个故事的第八步出现时，这种压力可能会迫使你继续前进，也就是通过修改现有的代码来完成新的需求。然而尝试这样做是不理性的。这些代码不再代表一个纯粹的、通用的抽象，而是一个充满附加条件的过程，其中夹杂了一系列错综复杂的目的，令这代码既难理解又容易出问题。</p>\n<p>如果发现自己处于这种情况下，要坚决拒绝被沉没成本所驱使。当处理这些错误的抽象时，最快的前进道路是回头，照着下面的步骤来做：</p>\n<p style=\"padding-left: 30px\"><span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>1、把嵌入在抽象代码中的重复部分再次引入到每个调用它的地方。<br>\n2、在每个调用内部，用被传递的参数来决定保留哪一部分inlined代码会被这个调用所执<br>\n3、删掉对每个不同调用来说不必要的部分。</p>\n<p>这样就同时移除了抽象和条件式，并且减少了每个调用的代码，只保留它所必要的。当你回过头来看使用这种方法的决定时，通常会发现，即使每个调用表面上调用了一个共享的抽象，但是每段代码平等且独立的运行着。一旦完成了对旧的抽象的移除，你就可以重新开始了。重新对重复隔离，然后重新提取抽象。</p>\n<p>我看过很多人试图勇敢的带着错误的抽象前行而出现很多问题，且鲜有成功。新增特性是非常困难的，并且每一次成功新增都会使代码更加复杂，也使下一次新增特性变得更加困难。当人们改变他们对“必须保留我们在这段代码中耗费的心血”的想法，转而成为“这段代码的意义是暂时的，可能我们已经掌握了所有我们能从它中所学到的东西”，让自己根据目前的需求重新思考这些抽象时，事情就变得简单了。当他们内嵌这些代码时，前面的路就清晰了，增加新特性也变得简单高效。</p>\n<p>这个故事的意义是什么？不要被沉没成本误区所困。如果你发现自己在共享代码中传递参数、增加条件分支时，这个抽象就是错误的。也许开始时它是正确的，但是那一天已经过去了。当一个抽象被证明是错误的时候，最佳策略是重新引入重复，让它告诉你什么是正确的。即使累积条件式偶尔有效，能让你深入了解这是怎么回事，但如果你越快放弃这些错误的抽象，你将会越少承受它所带来的痛苦。</p>\n<p>当抽象是错误的时候，最快的前行道路是回头，这不是倒退，而是向更好的方向进发。就这样做！将会使你和后人的生活更美好。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/08/647babf96cf39feeea99ca6771f37763.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110594\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110594votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110594\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/randomli\">欣仔</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/randomli\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/12/5858dcb1cf754469936ed3326e54932e.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            假装会写代码的伪程序员~        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/randomli\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/randomli/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/randomli/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/1715653890/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：497480210\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 1, "front_image_path": "full/78311042527a7716a14c0a1eccd5b49d4931b8e9.jpg", "tags": "IT技术,抽象", "praise_nums": "2", "url": "http://blog.jobbole.com/110594/", "create_date": "2017/03/18"}
{"front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fdwpuw2zfsj20m50j2ttt.jpg"], "comment_nums": 2, "title": "下一代蓝领职业大军是程序员", "url_object_id": "8121e6af4f6cb2c8e21d14bb1aece15a", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q69039280\">牧师</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.wired.com/2017/02/programming-is-the-new-blue-collar-job/\">Wired</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：提起程序员，在很多人的印象里是扎克伯格那样的人用技术改变世界，然而现实是像小扎那样的人只是很小一部分，更多人拿着平常的薪水做着默默无闻的工作。《连线》文章认为，未来的蓝领职业就是程序员，工作中往往不需要高深的算法知识，甚至不需要上大学，经过一定的学习培训就可以写出需要的东西，比如一个银行的网站。<b></b></p>\n<p>当我要求别人描述一个程序员时，他们通常把我想象成马克-扎克伯格那样：穿着连帽衫的大学退学生，在72小时的疯狂编程中构建出一个应用，他们的目标是变得富有和——“<span style=\"color: #ff0000;\">改变世界</span>。”</p>\n<p><img class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fdwpuw2zfsj20m50j2ttt.jpg\" width=\"487\" height=\"419\"></p>\n<p style=\"text-align: center;\">（图：ZOHAR LAZAR）</p>\n<p>但对于硅谷的刻板印象并不准确，硅谷雇员只占全美程序员的 8%，那么其他数百万程序员呢？他们更多的是像 Devon 一样，Devon 是我认识的一个程序员，他在俄勒冈州的波特兰市维护一项安全软件服务。他并不是很有钱，但是工作稳定，收入也不错：一周 40 小时的工作，不错的收入，工作上还有智力的挑战。“我父亲以前是个蓝领”，他告诉我。但是从许多方面来讲，他也是个蓝领。</p>\n<p>政客们常常抱怨失去了优秀的蓝领职业。这样的工作被视为文明中产社会的核心。而且它可能会失去一次。如果下一个巨大的蓝领工作职业已经出现了呢？它会是编程这项工作吗？如果不把编程看作是高回报、性感的工作，它与克莱斯勒工厂的熟练工有什么区别？</p>\n<p>除此之外，它将改变编程工作的培训方式。这些人被鼓励去追求这些。就我的朋友 Anil Dash 来说，他是一个技术思考者、老师和商人，他不会花费很多的时间去督促孩子利用四年宝贵的时间来获取计算机科学学位，而会在高中就给孩子更多的专业代码练习。你能在社区学院学会如何编程。处于职业生涯中的人将会参加几个月的紧张编程训练，就像 Dev Bootcamp。这种培训会很少把注意力集中在精英教育上，而更多集中在普通人的培训上。</p>\n<p>这种类型的程序员不需要高深的知识，也不需要去研究更多新的快速交易和神经网络的算法。他们为什么需要做这些（研究）？需要专家水平的工作毕竟很少。但是任何蓝领程序员都能轻松胜任为本地银行写 JavaScript 的工作。这是非常稳固的中级工作，并且工作数量还在不断上涨：全美 IT 职业的平均工资是 8.1 万美元（比全美工资水平的2倍还多），并且 IT 领域从 2014-2024 还要再扩大 12%，比其他职业快的多。</p>\n<p>全美范围内，人们都在抓住这个机会，特别受到去工业化打击最严重的州。在肯塔基，挖矿老手 Rusty Justice 决定用编程来取代挖煤。他是 Bit Source 的联合创始人，Bit Source 是一个编程商店，业务是培训矿工编程。人们对此的热情格外高涨：一共有 950 人申请了 Bit Source 第一期班的 11 个名额。事实证明，矿工习惯于深度专注，团队协作，以及在复杂的工程环境中工作。“矿工是真正的技术工人，只不过工作环境很脏，”Justice 说。</p>\n<p>同时，田纳西州一个非营利组织 CodeTN 正在鼓励高中学生进入社区学院学习编程。一些学生和老师担心孩子们不能适应扎克伯格的陈词滥调。”这是文化的信使”，CodeTN 的联合创始人 Caleb Fristoe 说，“我们想要让更多的雇主表示，‘是的，我们只是需要一个能管理登录界面的人’”，他说，“你不必非得是一个巨星”。</p>\n<p>确切来说，现在确实需要超级巨星。公司和学术界的那些严肃的创新者开创一个新的领域，比如说机器学习。但是这并没有杜绝一种新的主流观点的产生，那就是大部分程序员的真实工作是怎样的。坦率的讲，在几十年来的流行文化中，比如我这样的作者，过分突出了“孤独的天才”这一程序员形象。我们满足于《社交网络》、《匿名者》、《硬核》中程序员夹克，T恤的装扮。但真实的英雄是每天上班并做好工作的人，不论他是汽修工、矿工还是程序员。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110653\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110653votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110653\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q69039280\">牧师</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q69039280\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/054C606B0E1407989F7D4399154CDD9A/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Android ROM，APP        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q69039280\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q69039280/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q69039280/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 1, "front_image_path": "full/31aca9cd0064507f7af543018f7e3ff880c0a790.jpg", "tags": "职场,程序员,职场", "praise_nums": "2", "url": "http://blog.jobbole.com/110653/", "create_date": "2017/03/23"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/07/thinker.jpg"], "comment_nums": 1, "title": "没时间思考，思维之死", "url_object_id": "40984d971b333d32422939c52e6b6311", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/yyq1475075514\">云深不知处</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://500ish.com/the-death-of-thought-ecba09d1d21e#.raxa4y4np\">500ish</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>没时间思考。一有空闲就刷手机、刷社交媒体。一天下来好像接受了许许多多的信息，但却没有动脑思考消化这些信息。</p>\n<h3>思维之死</h3>\n<p>我喜欢写作的理由之一，就是它能促使我思考。静静地坐着，考虑接下来应该说点什么。一个新点子，没错。但实际上，在今天，在这个时代，这个想法确实很新奇。</p>\n<p>在一天当中，你有多少时间可以什么都不做，就是呆呆地思考？你要是跟我差不多，那就基本没有。只要手头上的事一停，我就会上会 Twitter 或 Instagram，查查 Messenger 和邮箱，诸如此类。一天中零零星星的时间都被一堆这样的事情占据了，谁叫我们总是连着互联网呢？</p>\n<p>就是这么回事。</p>\n<p>我基本上只有在洗澡的时候会思考，那还得是我没赶上播客节目的时候。我是那种总觉得日子过得太快了的人，所以我能同时做的事情越多越好。星期一算是个例外，因为我听的节目这天不播。</p>\n<p>所以，我会用这个时间来思考。</p>\n<p>我今天思考的主题就是关于思考的：我曾经有多爱思考。当我还是个孩子的时候，有不少人都觉得我肯定哪儿出问题了，因为我特别安静。真的，我就只坐在边上，观察，然后思考。我完全浸在自己的思想中，我真的很享受那种感觉，绝对比大多数的社交活动还享受。</p>\n<p>一定程度上来讲，我仍旧喜欢这种方式。可还是同样的原因，现在的每时每刻，都有整个互联网来分散我的注意力，我也总是屈服于它。思想就此成了受害者。</p>\n<p><strong>我每天花了那么多的时间来获取信息，以至于几乎没有时间来消化。</strong>要想这么做，就得在获取信息的过程中停一停，然而我害怕在停下来的过程中就会错过些什么。</p>\n<p>所以又一次，我回到了写作中。我相信我享受这个过程的一大理由就是它有迫使我我思考的功能。我喜欢坐着，将好似从稀薄的空气中提取的想法粗略地记下来，这个就是创造的过程。</p>\n<p>阅读也给我类似的愉悦感，因为当我阅读的时候，我的意识能从百万种不同的角度漫游。一方面，这使我的阅读慢得不可思议。另一方面，我的一些绝妙的想法也是在这种时候蹦出来的。</p>\n<p>但浏览 Twitter、邮件这些，难道就不是一种阅读／写作的形式吗？我想也是的。但那太简短细碎了，你还没从上一件事中形成一个完整的想法，就要跳到下一项中去了，出不来什么实在东西。Snapchat 就致力于将所有这些服务的短暂的瞬间产品化，它们基本上都是这么干的。Google 帮我们记住了所有的事，我们不需要靠自己的记忆记那么多。</p>\n<p>总之，这就是我今天短暂思考的时候的一点想法。回 Twitter 去了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110659\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110659votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110659\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/yyq1475075514\">云深不知处</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/yyq1475075514\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/7E119E2041DED23F273E8D567EA88483/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/yyq1475075514\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yyq1475075514/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/yyq1475075514/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 1, "front_image_path": "full/9dc0711533489560470e5232bfe625553d5bddc6.jpg", "tags": "其他", "praise_nums": "2", "url": "http://blog.jobbole.com/110659/", "create_date": "2017/03/24"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/1503a298ec77047d9314ddceef5e4ff7.jpg"], "comment_nums": 0, "title": "远程办公这 5 年的感受", "url_object_id": "48868a3fbcab96370e0e24bf57982046", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/stolendust\">观无明</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://ionutn.com/the-good-bad-and-the-ugly-of-working-remote-after-5-years/\">IONUT NEAGU</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>了解到可以在家办公、可以选择位置无关的生活方式的时刻，对我来说是一个非常重要的时刻。在此之前，我还从未有过“工作自由”之类的概念。</p>\n<p>尽管我当时并不太适合这么干，但确实想要尝试一下。尝试下来，已满 5 年。</p>\n<p>我的首要结论：这事不容易，至少对我而言是。虽然不易，但长期来看，它的回报超出了自己的预期，值得去做。<br>\n一路走来，我有 8 点体会，有好，有坏，有不爽，不一而足，总结如下：</p>\n<p><strong>1，设定一个“正常人”的工作时间表</strong></p>\n<p>我花了好些时间才搞明白：尽管自己可以自由安排时间，但我无法做到长期在非正常时间工作，或者 24 小时工作。如果确信你能做到，或者你不同于他人，你晚上工作更高效，那另当别论。否则我建议你也坚持“正常人”的时间表，把工作时间安排在你所在地当地时间的早七点和晚七点之间。</p>\n<p>你身边大部分人是在这个时段工作的，如果你不去适应，那你的社交生活就有些麻烦。你有空时你的朋友没空，你无法与医生预约到合适的时间，诸如此类的事都是麻烦。最重要的，如果你的伴侣与你时间表不一致，那你们很难在一起生活。如此看来，朝九晚五也并非是一个糟糕的安排。</p>\n<p><strong>2，不要只为工作安排时间</strong></p>\n<p>后来，我明白了不只为工作做时间规划的价值。如果只为工作安排时间，那你会把空闲时间都投入到工作中去。这就是你需要规划个人时间的原因。举个例子，如果本周我给自己安排了 10 件工作事项，同时我也要给自己安排 10 件个人事项。采取进一步的行动，如果 10 到 11 点安排了一个重要的会议，接着就要在下午 6 到 7 点给自己安排一次瑜伽课，生活和工作同样重要。</p>\n<p>多年的实践教会我不应把代办事项的清单或日历只用于工作。否则，如我所说，我会倾向于把更多的空闲时间来做工作。</p>\n<p><strong>3，面对面是新的潮流</strong></p>\n<p>与人相伴对我越来越重要，如果可能，我会尽量面对面的工作。同事、客户、合伙人，我极尽可能与他们在一起，面对面完成工作。</p>\n<p>如果因故无法达成，我会改变下环境，去一个繁忙的咖啡店工作几个小时。不介意嘈杂，我喜欢身处于人群之中。</p>\n<p>我猜想大自然在进化这事上捉弄我们。千百年来，我们根本无法做到独自生存，所以我们学会依靠集体生存，人越多越好。甚至在当下这个周围潜在危险更少的时代，依靠集体生存的好处也是显而易见的。别误会我哦，我不是在抱怨依靠集体生存，我只是注意到了这个事实。</p>\n<p><strong>4, 保险/税务/商务/法律等杂事</strong></p>\n<p>远程办公的益处之外，工作方式和大多数人不一样，也会有许多独特的挑战和问题。</p>\n<p>有时在现有的法律中找不到适用于你现状的条文。你可以在这里住段时间，那里住段时间，由于居无定所，你很难获得任何健康保险/养老金，更不用说纳税或开公司做业务。</p>\n<p>而且，你无法就远程办公在保险/税务/商务/法律等方面获得专业的帮助。它依然太新…法律发展太慢，还跟不上。做好要浪费大量精力解决这些问题的心理准备吧，这或许是远程办公最不爽气的地方。</p>\n<p>我希望过几年情况能变好些，但现在嘛…我希望能给你些建议，对现实情况心里得有个底。</p>\n<p><strong>5，旅行并非如看起来那般容易</strong></p>\n<p>远程工作显然能让你做更多的旅行。你可以在很酷的地方工作，甚至可以把每一个数字游牧人的梦想变成现实——在海滩上工作（抱歉，不是真的有可行哈，阳光太强烈，你会看不清屏幕的内容）。</p>\n<p>话虽如此，如此生活 5 年下来，我还是有点乏了累了。我想少点来往奔波（频繁改变日常生活会影响我的生产力）。如果可能，我尽量避免坐飞机旅行。飞机这种方式不太好，机场浪费了太多时间，此外，飞机上餐食太垃圾（至少在经济舱是这样）。</p>\n<p>你可能会嫉妒脸谱网上那个人，他经常贴些奇奇怪怪工作场所的酷酷图片，或者你可能会又买一个所谓“通过一个孤岛上的远程生活来实现梦想”的课程。在干这些事之前，请先调研调研，试着和已经在远程办公的人沟通交流，了解他们的挣扎体验。好的一面你知道了，现在也要了解下坏的一面。搞清楚自己是否真的为所有的利弊做好了准备，或者是否当下的状态其实更适合自己。</p>\n<p><strong>6，住在另一个国家不一定会让你快乐</strong></p>\n<p>心理学里有一个概念被称为<a href=\"https://zh.wikipedia.org/wiki/%E7%AC%AC%E4%B8%89%E6%96%87%E5%8C%96%E5%B0%8F%E5%AD%A9\">第三文化小孩</a>。简单的说就是在国外长时间生活会造成一种身份危机。说的更直白些，不是我有意刻薄哈，你不太可能因为在一个新的国家就变得更快乐，90% 的概率是这样的。</p>\n<p>当然，如果你的祖国不尊重你的自由，或者有些问题直接威胁你的幸福，那么可能迁移到其他地方来改善境况。但是如果一切都还不错，那么不要指望迁移能给幸福带来巨大的提升。</p>\n<p>如果你想探索和体验新的文化，那么，在不同的地方旅游和生活是最好的方法之一。它会给你大量的生活体验，是一件为自己和自己的成长所能做的大好事。</p>\n<p>可是，它不一定是容易的。</p>\n<p><strong>7，到户外去！</strong></p>\n<p>有些时候你只是懒得出去。你可能会认为自己现在“有太多的工作要做”，明天吧，明天走出来去户外。这种拖延态度绝对不好。</p>\n<p>至少，经历了这么多的我不这么看。早上出门，哪怕只是喝杯咖啡，哪怕是在几个地方工作几个小时，也是开始一天的好方法。<br>\n为什么？因为它每天早上为你设定点新的事情，它能够迫使你自己迈步前进、付诸行动。</p>\n<p><strong>8，投资自己</strong></p>\n<p>不知道现有是否有人会投资你，也不知道公司是否给你提供了最好的装备。如果没有，那你要给自己投资装备。投资的时候，记得优先投资下面这些装备，不开玩笑！</p>\n<ul>\n<li>买最好的桌子/椅子。桌子椅子你用得最多，是吧？还有，投资点不太寻常的东西咋样？比如一张站式的办公桌。有了这玩意，当你长时间工作时，身体自然会提醒你（在办公桌旁站上 10 小时简直是不可能的）</li>\n<li>搞一个你能负担得起的最好的计算机，“负担”这个说法不准确，该是“投资”才对。</li>\n<li>给自己买最好的工具。即使你不喜欢为个人生活花钱，你也要买。这种情况和个人消费是不一样的，永远不要把 200 美元的葡萄酒与 200 美元的软件相比，那是两个完全不同的东西。</li>\n<li>会议或研讨会也一样要投资。算算账，假设你每小时能赚 30 美元，如果一个 300 美元的研讨会/课程可以提高你 5% 的生产力，那么这意味着你可以在短短的 1.5 个月内把投资赚回来。在接下来的 3 年里，你将获得大约 8000 美元的利润回报。去年我参加了像WordCamps 或PressNomics 的会议，它们帮助我把WordPress的博客和主题的质量提高了 10 倍。</li>\n</ul>\n<p>好了，这些就是我总结的 8 点小心得。关于远程工作你的经验是怎么样的呢？ 你正面对什么样的困难呢？ 一起来分享吧，或许我们可以一起来想想办法。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110656\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110656votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110656\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/stolendust\">观无明</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/stolendust\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/F8B6A425009113A97B226A3C23A8A40C/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            程序员老兵，专业的自由职业人：中英技术类文章翻译和编写；php/python项目软件开发（透明外包/靠谱乙方）；        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/stolendust\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/stolendust/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/stolendust/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/stolendust\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：1074089854\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：Guanwuming\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 0, "front_image_path": "full/36430ccefda2f0d333a3bbac206945b3528bf1aa.jpg", "tags": "职场,远程办公", "praise_nums": "1", "url": "http://blog.jobbole.com/110656/", "create_date": "2017/03/24"}
{"front_image_url": ["http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes-dog-fight.jpg"], "comment_nums": 5, "title": "没有功能需求设计文档？对不起，拒绝开发！", "url_object_id": "20ad287c7097190e4e559e07a2a915d9", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/charliechu/p/6553988.html\">CharlieChu</a>   </div><div id=\"cnblogs_post_body\">\n<p>在很多软件公司，特别是一些创业型的团队中，对于这样的情景可能大家都很熟悉：项目经理或者产品经理（<strong>产品狗</strong>）口头或者简单记录一下软件产品的大致要做的功能，直接就让研发团队的兄弟（<strong>程序猿</strong>）去狂撸代码。然后他就去喝茶撩妹或者回家陪老婆了…</p>\n<p>这种撸起袖子就开干的方式，看似简单高效，便于直接沟通，能够快速迭代。却不知，发现没有一份正规且实时更新的功能需求设计文档，会付出三四倍的代价来弥补。</p>\n<p>最终会引发一场产品狗和程序猿之间的“<strong>猿狗大战</strong>”…</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes-dog-fight.jpg\"></p>\n<h1 id=\"why---为什么需要功能需求设计说明书\">WHY – 为什么需要功能需求设计说明书</h1>\n<p>在没有功能设计文档时，主要有如下几个问题：</p>\n<ul>\n<li><strong>前期研究团队沟通成本</strong></li>\n</ul>\n<p>如何要让团队里面的所有人员对软件产品的功能需求设计有一个共识？<strong>没有功能设计文档，反正我是想不出有什么办法</strong>。当该项目的团队人员越多，沟通成本就变得很高。</p>\n<p>研发人员很容易有一个通病：以为自己了解了一小块需求就立即开始埋头狂撸……代码。最终很可能与项目经理和客户真正想要的功能相差甚远。</p>\n<p>更可怕的，研发人员把数据库设计好了，代码也已经写得差不多了，这时产品狗突然跑到程序猿这，说我们的需求要做一点变化，大家都知道，“<strong>对产品狗来说那一点变化，可能会害得程序猿撸过几天几夜</strong>”。那很小的变更可能导致之前设计的数据库，码的代码都不能用了。对于程序猿<strong>没有什么比加班加点写了几个月的代码，最终被产品狗告知需求变了</strong>，代码要删除重新写更可怕的。估计<strong>只能用涨工资来安慰一下那受伤的心灵了</strong>。</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-1.png?x-oss-process=style/scale-width-400\"></p>\n<p>还有一个比较隐藏的事情是，每个程序猿都认为自己写的代码很牛逼（其实对于大多数人这只是一个错觉，你写得代码并不优秀），不太愿意删除之前所写的东西，总是想在原有的代码基础上进行修改，<strong>让他们删除代码比杀了他还难</strong>。</p>\n<p>作为公司的技术负责人，我每几天都会Code Review团队里面所有人的代码，一直要求他们把不用的代码去掉，但他们的应对方式总是加两个<code>//</code>。注释掉他们写的代码，而不是去做真正的删除动作。他们总有自己的理由，<strong>“这只是暂时注释掉，后面会用到”</strong>，但最终的结果是那些代码就像尸体一样，一直在那里，干扰着团队人员正常的思路。所以我只能强制性让他们那些“暂时没有用，以后会用到的代码”干掉 。</p>\n<ul>\n<li><strong>前期任务进度安排和分配</strong></li>\n</ul>\n<p>该文档也是任务进度安排和分配的重要依据。<strong>在没有功能需求设计文档之前的所有任务进度计划都是瞎扯淡</strong>，都不知道具体要做什么东西，哪能拿出合理的任务进度计划。如果你拿出来了，我也不相信那是经过认真分析做的进度计划，我知道那只是用来看领导看的。</p>\n<ul>\n<li><strong>中期产品经理需求变更</strong></li>\n</ul>\n<p>软件在开发过程中难免会遇到功能的需求变更，将程序猿们召集在一起把所有的变更讲一遍？当走出会议室的时候可能每个人都有自己的理解。<strong>下一场战争已悄然临近…</strong></p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes.jpg\"></p>\n<ul>\n<li><strong>后期测试团队产品测试</strong></li>\n</ul>\n<p>测试团队应该在项目Kickoff之时就应该介入，而不是在产品开发完成之后。测试团队应该对功能需求设计文档充分了解，且以此来编写具体的测试用例文档。否则，只能是在界面上进行简单的表面测试，而真正的BUG并不在表面，这些BUG会藏得很深，等发现的时候可能已经造成很大的损失。测试团队想覆盖全部的测试用例此时已经相当困难，他们甚至都不知道产品有哪些功能。</p>\n<p>测试用例应该尽可能详细，尽量保证测试用例走完能确保产品能上线发布。下图为我们在登录注册时用到的一部分用例：</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-testcase.png\"></p>\n<h1 id=\"where---文档应该放在何处\">WHERE – 文档应该放在何处</h1>\n<p>功能说明文档一定要保持实时性，任何变更的需求，新增的需求都必须在该文档中体现。</p>\n<p>一只产品狗（或一群）在编写完文档后，要发给项目经理、研发人员、销售人员、运营推广人员等人，如何保证每个人的文档都是最新的呢？如果通过QQ，邮件等方式，是不是每次更新都要重新通知所有人：“嘿，各位兄弟，文档作了一次修改，我给大家都重新发一份新的”。每个人电脑里面都有好几个版本的文档，时间长了，自己都忘记哪个文档是最新的；产品狗也记不清是否是所有相关的人都发了最新的文档。</p>\n<p>研发人员可能会说通过SVN来作版本管理啊，给每个人分配一个帐号。“天啊，SVN是啥？”-销售人员、运营推广人员估计一脸懵逼。</p>\n<p>更好的办法是通过团队实时协作的云端工具。从而实现分享和实时讨论，告别反复修改版本再发送邮件的麻烦。如果你会FQ，那你可以使用Google Docs、Office Online。否则你可以使用石墨文档、一起写。</p>\n<h1 id=\"what---什么是功能需求设计文档-应该包含那些内容\">WHAT – 什么是功能需求设计文档 &amp; 应该包含那些内容</h1>\n<p>功能需求设计文档最重要的是描述产品所要包含的所有功能，越详细越好，可以结合产品的<strong>原型设计图</strong>来讲解。让项目所有相关人知道产品是什么，包含哪些页面，页面如何跳转等。</p>\n<p>该文档是产品经理、项目经理、研发人员、销售人员、运营推广人员沟通的一个桥梁，一份好的功能需求设计文档是软件产品是否能成功的关键。</p>\n<p>考虑是该文档的受众，这份文档不应该包含具体的编程技术上的说明。不管你是用C#/.NET、JAVA还是其它，这应该是另外研发团队内部使用的一份文档。</p>\n<p>一般人第一反映就是去网上找一份功能需求设计文档模板，我个人感觉那些模板90%根本没有存在的必要。都太过形式化，不要没有实际意义和模板化的内容，只会使文档成为一个摆饰，反而是在浪费大家的时间。</p>\n<p>那么一份合格的软件需求设计文档应该包括哪些内容呢？</p>\n<ul>\n<li><strong>项目背景</strong></li>\n</ul>\n<p>项目产生的实际背景、具体的运用场景、大致要解决什么样的问题、针对的阅读对象、版本修改记录、文档作者以及修改人信息。</p>\n<ul>\n<li><strong>详细的功能点描述</strong></li>\n</ul>\n<p>写明产品所包含的所有功能点，对功能、界面、接口的描述一定要充分详细，每处可以交互的地方都要给出具体的说明。再次强调，一定要<strong>详细描述每一个页面所拥有的功能</strong>。</p>\n<ul>\n<li><strong>产品不包含的功能点说明</strong></li>\n</ul>\n<p>除了写明产品所包含的所有功能点外，还应该写明软件所不包含的功能，这一点也很重要。</p>\n<ul>\n<li><strong>使用场景（画面感）</strong></li>\n</ul>\n<p>将复杂的业务逻辑融入到具体的<strong>使用场景</strong>中，更容易让项目经理、研发人员、销售人员、运营推广人员不同背景的人产生共识。</p>\n<ul>\n<li><strong>流程图</strong></li>\n</ul>\n<p>大家都知道“一图胜千言”，能用图说明的尽量用图来说明，只通过大量枯燥的文字可能效果并不太好。流程图是一种用图形表示逻辑和算法的工具，特别对研发人员撸代码很有帮助。<br>\nWindows用户可以使用Visio，Mac用户可以使用OmniGraffle，还可以使用免费在线作图,实时协作工具ProcessOn。</p>\n<p>我之前就用ProcessOn画了一个设置了缓存的网络请求的流程图，这里作个参考：</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/sample-flowchart-template.png\"></p>\n<ul>\n<li><strong>人员角色“实例化”</strong></li>\n</ul>\n<p>跟上面提到的“画面感”相结合，将人员和角色能够实例化。比如我们的产品要实现如下功能，有两种表达方式：</p>\n<blockquote><p>医生给患者测量血压，并记录到系统中。</p></blockquote>\n<blockquote><p>上海华山医院肾内科的王主任医生在给32号病区1号病床的患者刘阿姨测量血压，将测量到的血压<code>100/70mmHg</code>输入到透析管理系统。</p></blockquote>\n<p>哪种方式更便于理解？特别是对医疗知识不太了解的码农们。当然可能有人觉得第一种方式更简洁。可能是我举的例子不够好，也可能是我的理解能力不够强。（但不要怀疑我的智商！哈哈哈…）</p>\n<ul>\n<li><strong>结合产品原型设计图</strong></li>\n</ul>\n<p>产品原型设计图可以粗枝大叶地产品大致的框架。便于项目经理、研发人员、销售人员、运营推广人员等人在产品未开发之前对产品有一个相对直观的认识。没有一个原型图，想到这帮人拉到同一个频道沟通一定是不可能的事。（如果你做到了，那么赶紧把你的简历发我，我决定录用你！）</p>\n<p>常用的原型设计工具有墨刀、Mockplus、Axure。</p>\n<p>扯了这么多，来个例子吧。</p>\n<p> </p>\n<p>本软件是给北京某医院集团肾内科透析患者所使用的软件，包括院内管理系统、院外大数据平台、医护端APP、患者端APP…</p>\n<table>\n<thead>\n<tr class=\"header\">\n<th>版本</th>\n<th>作者</th>\n<th>修订时间</th>\n<th>审核人</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>v1.0.0</td>\n<td>Charlie Chu</td>\n<td>2017-2-12</td>\n<td>Vivian Wong</td>\n</tr>\n</tbody>\n</table>\n<p><strong>使用场景一</strong>：</p>\n<p>肾内科的医生王医生给31号病床刘阿姨进行透析上机操作，王医生在院内透析管理系统上点击上机操作，信息会传递到院外的大数据平台以及医护端APP、患者端APP上…</p>\n<p>刘阿姨患者的家属登录到患者端APP后，可以实时查看刘阿姨透析过程中的所有信息，还可以查看血压、血糖、体重等历史数据…</p>\n<p>当刘阿姨在家中通过蓝牙血压计测量血压时，自动同步到医院内部，如果刘阿姨的血压超过预先设置的值，院内的王医生则会在自己的手机上查看到刘阿姨的血压异常报警信息，王医生可以立即跟刘阿姨的家属进行实时沟通…</p>\n<p>…&lt;此处省略N字&gt;…</p>\n<p>本软件(v1.0.1版本)不包括的功能需求如下：</p>\n<ul>\n<li>医生与患者的实时IM</li>\n<li>医生排班设置</li>\n<li>修改密码</li>\n<li>患者积分</li>\n</ul>\n<p><strong>功能模块详细描述</strong>：</p>\n<p><strong>一、APP登录页面</strong></p>\n<p>由于本产品不存在患者自己注册的场景，所有的患者录入都发生在院外透析系统中，患者及家属在院外只需要输入相应的手机号，即可登录系统。</p>\n<p>登录页面只有两个输入框，一个手机号，一个密码。</p>\n<p>当用户要输入手机号时，手机应该弹出纯数字键盘，最多只能输入手机号固定的11位。密码最多输入10位。</p>\n<p>当用户点击登录时，APP与后台服务器进行交互：</p>\n<ol>\n<li>不输入手机号和密码，直接点击登录按钮，应该提示用户输入手机号和密码。</li>\n<li>输入手机号但不输入密码，点击登录，提示“请输入密码”。</li>\n<li>输入不正确的手机号，点击登录，应该提示“不存在该用户”。</li>\n<li>输入小于11位的手机号，应该提示“请输入正确的手机号”。</li>\n</ol>\n<p><strong>二、登录后首页</strong></p>\n<p>下图是左侧是一个首页，右侧是一个点击透析预警的详细页面:</p>\n</div>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdutkmncwvj20r40o2k2z.jpg\" width=\"976\" height=\"866\"></p>\n<p>首页包括功能点：</p>\n<ol>\n<li><strong>资讯信息轮播</strong> 首页顶部资讯信息轮播功能，点击可以跳转到新的页面可以查看资讯详情。</li>\n<li><strong>病情咨询</strong> 点击“病情咨询”模块，患者查看向指定的医生了解自己的病情。</li>\n<li><strong>透析记录</strong> 点击透析记录，患者可以随时随地查看自己的过往透析记录。</li>\n<li><strong>食物速查</strong> 点击食物速查，可以查看所有类别的食物成份含量。</li>\n<li><strong>透析上下机实时信息列表</strong> 当患者在医院内进行透析上下机等操作时，会记录患者的透析上机时间 、下机时间等信息。点击其中的一条记录，跳转到透析详情页面，如上图右侧所示。</li>\n</ol>\n<h1 id=\"how---如何保证文档质量\">HOW – 如何保证文档质量</h1>\n<p>要保证文档能够实时更新同步，而不是疲于应付。那就是让大家都通过该文档来进行沟通，谁有问题直接去看文档，需求一旦变更首先就更新到文档。</p>\n<p>研发人员严格按文档上的描述来开发，<strong>在没有文档之前，对不起，拒绝开发！</strong>任何口头、QQ或邮件上的新的功能需求一概不理！提前是产品狗要比较给力，否则老板还是会让你狂撸代码…</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110645\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110645votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110645\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 6, "front_image_path": "full/ae50e3174376a1a13d1ed7cd64a803549b755f1f.jpg", "tags": "开发,需求", "praise_nums": "4", "url": "http://blog.jobbole.com/110645/", "create_date": "2017/03/21"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/05/27f7c25c21a7a0bad1112d3481e9eb37.jpg"], "comment_nums": 0, "title": "为期一周的机器学习", "url_object_id": "3d109279298e8de9720e5ced931659cd", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/learning-new-stuff/machine-learning-in-a-week-a0da25d59850#.ksmnlls69\">Per Harald Borgen</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>在门外汉看来，机器学习（Machine Learing，ML）入门是个不可完成的任务。</p>\n<p>如果你选错了方向，确实就是不可能的了。</p>\n<p>然而，在我学习机器学习的基本知识一周后，发现入门比我想象的容易。</p>\n<p>本文旨在给予那些对机器学习有兴趣的人一些入门指南，这个指南来自我为期一周的学习经验。</p>\n<h2>背景</h2>\n<p>在我开始这一周的机器学习之前，我已经阅读过一些相关的文章了， 并且学习了一半吴恩达（Andrew Ng）在 Coursera 上的机器学习课程，以及一些其他的理论课程。所以我对机器学习有些基本的概念，但我仍然我不能将我的知识转换为代码，这是我想要改变的。</p>\n<p>我想在一周学习的最后阶段能够用 ML 解决问题，尽管这意味着会跳过很多基础知识，我采取了自上而下的学习方法，而不是自下而上。</p>\n<p>在 <a href=\"https://news.ycombinator.com/item?id=9432952\">Hacker News</a> 上咨询之后，我得出的结论是 Python 的 Scikit Learn 库是最适合入门的。这个库提供了丰富的算法，将实际的机器学习问题减少到几行代码。</p>\n<h2>星期一：学习一些实例</h2>\n<p>我的学习之旅从查找关于 Scikit Learn 的视频教程开始。我最后选择了 <a href=\"http://pythonprogramming.net/machine-learning-python-sklearn-intro/\">Sentdex 关于使用ML投资股票的教程</a>，这个教程给了我继续学习的必备知识。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/6941baebly1fdzflj8w1wj20m80bqjuj.jpg\"></p>\n<p>Sentdex 教程的好处是，教师会引导你一步步去收集数据。随着学习的深入，你会发现获取和清理数据是比真正的机器学习更耗时的。因此，编写脚本抓取文件或网络中的数据的能力是一个ML极客的必备技能。</p>\n<p>我后来又重看了几个视频，以解决之前我不理解的问题。我建议你也这样做。</p>\n<p>但是，如果你已经知道如何从网站抓取数据了，那本教程可能不是很适合你，因为许多视频都是关于数据抓取的。如果是这样的话， Udacity的<a href=\"https://www.udacity.com/course/intro-to-machine-learning--ud120\">机器学习教程</a>可能更适合你。</p>\n<h2>星期二：将ML应用到实际问题</h2>\n<p>星期二我想看看是否能用我所学解决一个实际问题。因为另一个合作编程的伙伴正在参加英格兰银行数据可视化大赛，所以我与他一起查看了该银行发布的数据。其中最有趣的是他们的家庭调查数据，这是该银行对数千户家庭进行的关于金钱方面的年度调查。</p>\n<p>我们决定解决的问题如下：</p>\n<p><em>给定一个人的教育水平，年龄和收入信息，计算机可否预测其性别？</em></p>\n<p>我观察这个数据集后，花了几个小时清理数据，并使用 <a href=\"http://scikit-learn.org/stable/tutorial/machine_learning_map/\">Scikit Learn map</a> 去找一个适合该问题的算法。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fdzfliqogxj20m80afabj.jpg\"></p>\n<p>最后我们预测的成功率达到了 63％，这并不令人震撼。但是至少比掷硬币的准确率（50%）高一些。</p>\n<p>最后的结果是激励你的动力，所以我建议一旦你会使用 Scikit Learn 了，就自己来动手做一做。</p>\n<p><em>你意识到你可以使用 </em><em>ML </em><em>来解决现实生活中的问题的时刻是很一个关键的时刻。</em></p>\n<h2>星期三：从头开始</h2>\n<p>在玩转各种 Scikit Learn 模块后，我决定尝试从头开始写一个线性回归算法。</p>\n<p>我想这样做是因为我一直觉得我真的不明白后台发生了什么。</p>\n<p>幸运的是，coursera 课程详细介绍了几种算法的工作原理，这在很大程度上是有用的。更具体地说，它描述了使用具有梯度下降的线性回归的最底层的概念。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/6941baebly1fdzfliedynj20m8095jtl.jpg\"></p>\n<p>这肯定是最高效的学习技巧，因为它迫使你了解后台的一些细节。 我强烈建议你也这么做。</p>\n<p>我计划在继续学习的过程中重写我自己实现的一些更复杂的算法，但我想在学会 Scikit Learn 中相应的算法之后再做。</p>\n<h2>星期四：开始参加竞赛</h2>\n<p>星期四，我开始研究 Kaggle 的<a href=\"https://www.kaggle.com/c/word2vec-nlp-tutorial\">入门教程</a>。Kaggle 是一个机器学习的竞赛平台，你可以在其中提交公司或组织发布的问题的解决方案。</p>\n<p>我建议你在对机器学习有一些理论和实践经验后再尝试 Kaggle。你需要这些知识才能开始使用 Kaggle，否则你可能没什么收获，反而会觉得沮丧。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fdzflhx7vxj20m8097gn7.jpg\"></p>\n<p>“<a href=\"https://www.kaggle.com/c/word2vec-nlp-tutorial/details/part-1-for-beginners-bag-of-words\">Bag of Words</a>”教程指导你完成参赛资料提交的每个步骤，并会给你一个简短而令人兴奋的有关自然语言处理（NLP）的介绍。看完教程之后，我对 NLP 的兴趣大大增加。</p>\n<h2>星期五：回到学校</h2>\n<p>星期五， 我继续 Kaggle 教程的学习，并开始看 <a href=\"https://www.udacity.com/course/intro-to-machine-learning--ud120\">Udacity 的机器学习简介</a>。我现在的学习很愉快。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fdzflhd52zj20m80b4461.jpg\"></p>\n<p>它比 Coursera 的课程简单，因为它不会深入讲算法的具体内容。但它很实用，因为它会讲如何使用 Scikit Learn，这比 Coursera 课程中的告诉你用 Octave 从头开始实现算法更易于应用到实际问题。</p>\n<h2>未来之路</h2>\n<p>这一周的学习不仅是好玩，更使我认识到了机器学习在社会中的作用。我越了解它，就越明白他可以解决哪些领域的问题。</p>\n<p><em>如果你对机器学习感兴趣，我强烈建议你花几天或几晚上的时间深入了解一下。</em></p>\n<p>如果你还没有准备好面对复杂难懂的原理，请选择一个自上而下的方法并尽快从解决实际问题开始吧。</p>\n<p>祝你好运！</p>\n<p>感谢阅读！我叫 Per Borgen，主要写一些入门文章。</p>\n<p>如果你有任何问题或者想与我联系，请通过 <a href=\"https://twitter.com/OsloKommunePer\">Twitter</a>， GitHub或者邮件（perhborgen@gmail.com）随时与我联系。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110684\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110684votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110684\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            程序媛        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx1265511474\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx1265511474/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 18</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "front_image_path": "full/55fd180456ad2a808bdb7dac9cd21235960e84f4.jpg", "tags": "IT技术,机器学习", "praise_nums": "2", "url": "http://blog.jobbole.com/110684/", "create_date": "2017/03/25"}
{"front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fdzfe755zgj20hr0bu42k.jpg"], "comment_nums": 0, "title": "我不再强求生活完美，而是让它有趣", "url_object_id": "766d54ac7abdd50afd04b2cc343831c8", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/qingfeng6438\">阿慧</a> 翻译，<a href=\"http://www.jobbole.com/members/oliverpp\">蒋生武</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://news.mit.edu/2013/commencement-address-houston-0607\">news.mit.edu</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：本文是 Dropbox 的首席执行官 Drew Houston （ MIT 2005 届校友）在 2013 年 6 月 7 日麻省理工学院第 147 届毕业典礼上的演讲。</p>\n<h3>我不再强求生活完美，而是让它有趣</h3>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fdzfe755zgj20hr0bu42k.jpg\" width=\"639\" height=\"426\"></p>\n<p>谢谢 Reed 主席，并祝贺 2013 届的所有毕业生。</p>\n<p>我非常高兴能回到麻省理工学院，很荣幸能同各位一起站在这里。我依旧戴着我的 Brass Rat 戒指，毕业那天，戴上戒指的那一刻仍然是我生命中最自豪的时刻之一。</p>\n<p>今天是个特别的日子，而最让我兴奋的是，这将是你们生命中告别复选框的第一天。</p>\n<p>在你们人生的最初二十年，成功意味着循规蹈矩：考高分，上大学，修课程，拿学位，从一个名校升入另一个名校。今天，所有的这些都结束了。</p>\n<p>在生涯规划中的困难是，你不知道该往哪里走，但是想尽快地到达目的地。也许会建立一个公司，或是治愈癌症，或是写一部优秀的美国小说。谁知道呢？也许事情将变得特别地糟糕。无人能预料。</p>\n<p>今天穿着学士长袍在各位面前演讲，恰恰并不是我在七年前规划中的一部分。事实上，我从未有过一个宏伟的计划 ——如今我意识到的是，毕业后几乎不可能有这样一个计划。</p>\n<p>对于你们今天将要开始的生活，我思考了很多。我想过若是可以全部重来一次，我将做什么。你们能够站在这里依靠的是聪明和努力。但是从今往后，没有人能告诉你成功的秘诀。所以我想做的是，给大家一个我毕业时很想要的小抄。</p>\n<p>如果你们能看到我的小抄，会发现上面的内容并不多：一个网球，一个圆圈和数字 30000 。我知道这些现在很难理解，请耐心稍等。</p>\n<p>我 21 岁的时候在 Chili’s 建立了我的第一家公司。我的联合创始人是 Andrew Crick （安德鲁·克里克）， 在此之前我们从未做过这个。我们在想，是否应该穿一套西装到市政厅，或者是否该做一个公司印章来盖印重要文件。结果只是需要上网，在两分钟内填写一份表格。这有点过于平淡，但我们已经能开始做生意了。吃洋葱条的时候，我们决定为 SAT 制作一种全新的网上课程。当时的大多数学生在用老式的 800 页的书，而且已有的网上预科课程都不是很好。我们为课程命名为 Accolade ，一个 SAT 词汇，意味着特别的奖励。事实上，我们称之为「The Accolade Group, LLC」,我们觉得那听起来更令人印象深刻。</p>\n<p>回家路上我在 Staples 停下来，搜罗了一些卡片。开公司最重要的当然是绘制一个 logo ，并且打印一些公司名片。上面写上创始人。下一步是在会议上将它们分发出去。告诉女孩们「是的，我有一个公司！」，多棒的一件事。</p>\n<p>但最好的部分是学习各种各样的新事物。我每个夏天都住在合租屋，五楼的楼梯可以上到屋顶。我将绿色的尼龙倚拖上来，连同我从亚马逊买的一系列的商业书籍，利用每个周末的时间来学习有关市场、销售、管理以及其他我不了解的东西。我没有打算在屋顶上读完 MBA ，但我确实做到了。</p>\n<p>几年后，事情开始走下坡路。我似乎需要花很多很多的力气来取得进展，有些时候，我只是焦虑，无法继续思考平行线相关的数学问题，或者赶上在 3:45 离开 Memphis 的火车。我觉得是自己出现了一些问题。我为自己的低效而愧疚。创建一个公司一直是我的梦想，或许，我没有这个能力。</p>\n<p>所以我休息了一小段时间。当然，如果你在课程 6 ，有时「休息」意味着写一个扑克机器人，如果有人不知道扑克机器人是什么，想想你玩在线扑克的时候，在那坐好几个小时，不停点击按钮，最后输掉了所有的钱。扑克牌机器人就是那个让你在电脑前输光钱的玩意。</p>\n<p>但这是个令人兴奋的挑战，我为之着魔。我在洗澡的时候想着它，在深夜的时候想着它。那就像开关打开后——我成了一部机器。</p>\n<p>那段休息期间，我的母亲和父亲希望我们所有人都去 New Hampshire 一起度过家庭周末。但我想继续做我的扑克牌机器人。我停下雅阁车打开后备箱，然后拖着电脑和电线等所有东西到我们的小屋中。餐厅中的餐桌不够大，我就将所有锅锅罐罐放到炉灶上，为显示器腾出空间。这个时候，我的母亲会觉得我遭遇了麻烦事，她觉得我要进监狱了。</p>\n<p>我想说从事你喜欢的工作，但那是不够的。令你相信你喜欢自己做的事情实在是太容易了——谁想承认他们不是？当我思考这个的时候，我知道的幸福者和大多数的成功者并不只是喜欢他们做的事，他们痴迷于解决一个重要的问题，处理对他们来说重要的事情。他们让我想起了一只狗追逐一个网球：他们的眼神略带疯狂，挣开绳子，撞倒路上的东西。我的另外一些朋友，工作努力，获取丰厚的报酬，却抱怨他们似乎被拷在了办公桌上。</p>\n<p>问题是很多人不能立刻找到属于自己的网球。不要误解我的意思——我同下一个人一样，喜欢良好的标准化测试 ，但 SAT 预科课程的王者不会是我。令我慌张的是扑克牌机器人和 Dropbox 的工作我都出现了分心的状态。我脑中有微小的声音在告诉我该去哪里，每次我都让它停下来，以使我能够专心工作。有的时候，小声音更正确。</p>\n<p>我花了一些时间才能得到它，那些工作最努力的并不是因为纪律才这样，而是因为他们从解决令人兴奋的问题中获得了乐趣。所以，今天之后，不要强迫自己。找到属于你的网球，一切都会顺利起来的。那或许会花些时间，可是一旦你找到了，就跟随那个微小的声音走。</p>\n<p>让我们回到我毕业之后的那个夏天，你们即将迎来的那个夏天。我的一个合伙兄弟 Adam Smith 和他的朋友 Matt Brezina 创建了一个公司，我们认为所有人在一个公寓中工作将很有意思。</p>\n<p>那是个完美的夏天——接近完美。空调坏了，我们都穿着四角裤编码。 Adam 和 Matt 整天地工作，但随着时间的推移，他们不断被潜在的投资者拉走，投资者们会分享他们的秘密，带他们乘坐直升飞机。我有一点小妒忌——我在公司里工作了几年了，而 Adam 仅仅干了几个月。我的直升飞机之旅呢？</p>\n<p>但事情却变得更糟糕。八月过去了, Adame 给了我一个坏消息：他们要搬出去了。不仅我的 Hot Pockets 供应切断了，而且他们到了 Silicon Valley ，那里有真正的机会出现，我没有去。</p>\n<p>每每我给 Adam 打电话，总是能够听到事情进展顺利的好消息。 「我们今天下午见到 Vinod 了。」他告诉我。 Vinod Khosla 是亿万富翁投资者，是 Sun Microsystems 的共同创始人。然后 Adam 向我丢了个炸弹。「他将向我们投资五百万美元。」</p>\n<p>我为他感到激动，也觉得震惊。他是我的忠实的乒乓球啤酒游戏伙伴，也是我兄弟会里的弟弟，比我小两岁。我再也没有借口了。他去了 Super Bowl ，而我甚至没有被选中。那时候他并不知道，但是 Adam 给了我需要的动力。是时候该改变了。</p>\n<p>据说你是与你常在一起的 5 个人的平均值。花一分钟来思考：谁会是你圈子里的 5 个人？我有一些好消息： MIT是世界上建立这个圈子最好的地方之一。如果我没有来过这里，我将不会遇到 Adam ，我也不会遇到优秀的创始人 Arash ，也不会有 Dropbox 。</p>\n<p>我从中学到的事情就是，让自己置身于有上进心的人当中同才干和勤奋一样重要。你能想象如果 Michael Jordan （迈克尔·乔丹）不曾在 NBA ，若是他圈子中的 5 个人是意大利的一群人会如何？你的圈子促使你变得更好，就像 Adam 激励着我一样。</p>\n<p>现在，你的圈子将会扩展，涵盖你的同事和任何在你周围的人。你所处的地方的关键是：只有一个 MIT ，只有一个 Hollywood ，只有一个 Silicon Valley 。这不是个巧合：不管做什么事，只有一个地方是顶尖的。你应该到那里去。不要留在其他地方。见到我心目中的榜样，并且向他们学习，给了我很大的帮助。你的榜样也是你圈子中的一部分——追赶他们的脚步。如果真正的机会出现在别的地方，到那里去。</p>\n<p>走出校园后，你最后一个可能坠入的陷阱是「做好准备」。不要误会：学习是最先要做的，如今更快的学习方式是通过动手做。如果你有一个梦想，你可以消耗一生的时间学习和计划，并且为其做准备。那么你应该做的是开始行动。</p>\n<p>说实话，我不觉得我曾在「准备」。我记得那天我们的第一个投资者点头，并且询问我们向哪里汇款。对于年仅 24 岁的我来说，这是圣诞节——打开礼物的方式是在 bankofamerica.com 上一遍又一遍地刷新，并且看着公司的支票账户从 60 美元涨到了 120 万美元。最初我发狂地欢喜——数字中间有两个逗号。我做了个屏幕截图—— 随后我的胃却开始不舒服了。有朝一日他们会要回这些钱，我到底让自己进入了多么糟糕的状态？</p>\n<p>你们已经知道了这种感觉：在 MIT 我们称之为「使用消防水带喝水」。那听起来同名字一样有趣，我们所有人都曾内出血来证明它。我们也体会到了它的益处。今天，一个阀门关闭了。你需要出去寻找另一个消防水带。</p>\n<p>Dropbox 是我的。就像你可能期望的那样，建立这家公司是我生命中最令人激动、有趣和充实的经历。我没有真正分享出来的是，它也是最羞辱、沮丧和痛苦的经历。我甚至数不清事情出了多少错。</p>\n<p>幸运的是，那并没有太大关系。现实中没有人能得满分 。事实上，当你完成了学业， GPA 的整个概念就消失了。在学校的时候，每个小错误都是你挡风玻璃上的永久裂痕。现实社会中，如果没有四处碰壁，就不会快速成长。最大的危险不是失败，而是安逸。</p>\n<p>Bill Gate （比尔·盖茨）的第一个公司为交通灯制作软件。Steve Jobs （史蒂夫·乔布斯）的第一家公司制作可以免费打电话的蓝盒子。那都失败了，很难想象他们为此多么沮丧。今天的变化是我最喜欢的事情。你不用携带一个数字，表明所有错误的总和。从现在开始，失败了没关系：你只需正确一次。</p>\n<p>我曾为很多事情忧心，但我记得我觉醒的时刻。我刚刚搬到 San Francisco ，一天晚上我难以入睡，所以打开了笔记本电脑。我在网上看到一些话：「你的生命中有 30000 天。」起初我没有想太多，但我突然想在计算器上打出来。我输入 24 乘以 365 ——哦天呐，我已经用掉了 9000 天，我都做了些什么？</p>\n<p>顺便提一句，你们已经用掉了生命中的 8000 天。</p>\n<p>这就是为什么 30000 在小抄的结尾。那个夜晚，我意识到生命中没有热身，没有练习回合，没有重置按钮。我们每天都为自己的故事续写着新的篇章。当生命结束后，不至于像是「这儿躺着 Drew ，他是第 174 个来的。」所以从那开始，我不再努力使我的生活完美，而是试图让它有趣。我希望我的故事是一部冒险记——那样一切都显得不同了。</p>\n<p>我的外祖母今天在这里，下周我们将为她庆祝 95 岁的生日。我们在电话里谈了很多，如今我搬到了 California 。但有一件事让我困惑，她总是用一个词来结束我们的通话：「 Excelsior 」，意味着「 一直向上 」。</p>\n<p>今天是你们的毕业典礼，也是踏入真实世界的第一天，而这是我对你们的祝愿。不要试图让生活完美，放飞自己，让生活成为一场冒险，并且一直向上。谢谢！</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/f9e94e087837b17681c87206c9d540dd.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/748ed21a8038cdafa65b3b4ab9a0185a.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110662\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110662votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110662\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438\">阿慧</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/02/c169e93746e89947e9a2f0fce3f937cc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            什么东西没头没尾没中间？        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/qingfeng6438\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/qingfeng6438/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/qingfeng6438/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a> · <a title=\"QQ：1305735677\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：chenahui1996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 0, "front_image_path": "full/24f0a9f75224db0ad8242256b72954960410c771.jpg", "tags": "职场,演讲", "praise_nums": "1", "url": "http://blog.jobbole.com/110662/", "create_date": "2017/03/25"}
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/cb28ccec6da3b2e5f8465d9ee45dbf9e.png"], "comment_nums": 1, "title": "看漫画学 SELinux 强制策略", "url_object_id": "d0df9461f756bcd4e6edcfe77d8b3dc7", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/business/13/11/selinux-policy-guide\">Daniel J Walsh</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8326-1.html\">xiaow6</a>   </div><div>今年是我们一起庆祝 SELinux 纪念日的第十个年头了（LCTT 译者注：本文发表于 2013 年）。真是太难以置信了！SELinux 最初在 Fedora Core 3 中被引入，随后加入了红帽企业版 Linux 4。从来没有使用过 SELinux 的家伙，你可要好好儿找个理由了……</div>\n<p>SElinux 是一个标签型系统。每一个进程都有一个标签。操作系统中的每一个文件/目录客体（object）也都有一个标签。甚至连网络端口、设备，乃至潜在的主机名都被分配了标签。我们把控制访问进程的标签的规则写入一个类似文件的客体标签中，这些规则我们称之为策略（policy）。内核强制实施了这些规则。有时候这种“强制”被称为强制访问控制体系（Mandatory Access Control）（MAC）。</p>\n<p>一个客体的拥有者对客体的安全属性并没有自主权。标准 Linux 访问控制体系，拥有者/分组 + 权限标志如 rwx，常常被称作自主访问控制（Discretionary Access Control）（DAC）。SELinux 没有文件 UID 或拥有权的概念。一切都被标签控制，这意味着在没有至高无上的 root 权限进程时，也可以设置 SELinux 系统。</p>\n<p><strong>注意：</strong> SELinux 不允许你摒弃 DAC 控制。SELinux 是一个并行的强制模型。一个应用必须同时支持 SELinux 和 DAC 来完成特定的行为。这可能会导致管理员迷惑为什么进程被拒绝访问。管理员被拒绝访问是因为在 DAC 中有些问题，而不是在 SELinux 标签。</p>\n<h3 id=\"toc_1\">类型强制</h3>\n<p>让我们更深入的研究下标签。SELinux 最主要的“模型”或“强制”叫做类型强制（type enforcement）。基本上这意味着我们根据进程的类型来定义其标签，以及根据文件系统客体的类型来定义其标签。</p>\n<p><strong>打个比方</strong></p>\n<p>想象一下在一个系统里定义客体的类型为猫和狗。猫（CAT）和狗（DOG）都是进程类型（process type）。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/cb28ccec6da3b2e5f8465d9ee45dbf9e.png\" alt=\"Image showing a cartoon of a cat and dog.\"></p>\n<p>我们有一类希望能与之交互的客体，我们称之为食物。而我希望能够为食物增加类型：<code>cat_food</code> （猫的食物）和 <code>dog_food</code>（狗的食物）。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/e99f895e1c3fc798a93a8cf9c46a1dbc.png\" alt=\"Cartoon Cat eating Cat Food and Dog eating Dog Food\"></p>\n<p>作为一个策略制定者，我可以说一只狗有权限去吃狗粮（<code>dog_chow</code>），而一只猫有权限去吃猫粮（<code>cat_chow</code>）。在 SELinux 中我可以将这条规则写入策略中。</p>\n<p><img title=\"SELinux rule\" src=\"http://jbcdn2.b0.upaiyun.com/2017/03/f56f0d7d3c36593d3ad77d2f404a221d.png\" alt=\"allow cat cat_chow:food eat; allow dog dog_chow:food eat\"></p>\n<p><code>allow cat cat_chow:food eat;</code></p>\n<p><code>允许 猫 猫粮：食物 吃；</code></p>\n<p><code>allow dog dog_chow:food eat;</code></p>\n<p><code>允许 狗 狗粮：食物 吃；</code></p>\n<p>有了这些规则，内核会允许猫进程去吃打上猫粮标签 <code>cat_chow</code> 的食物，允许狗去吃打上狗粮标签 <code>dog_chow</code> 的食物。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/4caa4207c591f38cc90864b7bf7fa905.png\" alt=\"Cartoon Cat eating Cat Food and Dog eating Dog Food\"></p>\n<p>此外，在 SELinux 系统中，由于禁止是默认规则，这意味着，如果狗进程想要去吃猫粮 <code>cat_chow</code>，内核会阻止它。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/cc794b7b193ebafed9f6f0dcb3cdfa44.png\" alt=\"\"></p>\n<p>同理，猫也不允许去接触狗粮。</p>\n<p><img title=\"Cartoon cat not allowed to eat dog fooda\" src=\"http://jbcdn2.b0.upaiyun.com/2017/03/25908c80c27e6b87ec8990a6cbdee394.png\" alt=\"Cartoon cat not allowed to eat dog fooda\"></p>\n<p><strong>现实例子</strong></p>\n<p>我们将 Apache 进程标为 <code>httpd_t</code>，将 Apache 上下文标为 <code>httpd_sys_content_t</code> 和 <code>httpdsys_content_rw_t</code>。假设我们把信用卡数据存储在 MySQL 数据库中，其标签为 <code>msyqld_data_t</code>。如果一个 Apache 进程被劫持，黑客可以获得 <code>httpd_t</code> 进程的控制权，从而能够去读取 <code>httpd_sys_content_t</code> 文件并向 <code>httpd_sys_content_rw_t</code> 文件执行写操作。但是黑客却不允许去读信用卡数据（<code>mysqld_data_t</code>），即使 Apache 进程是在 root 下运行。在这种情况下 SELinux 减轻了这次闯入的后果。</p>\n<h3 id=\"toc_2\">多类别安全强制</h3>\n<p><strong>打个比方</strong></p>\n<p>上面我们定义了狗进程和猫进程，但是如果你有多个狗进程：Fido 和 Spot，而你想要阻止 Fido 去吃 Spot 的狗粮 <code>dog_chow</code> 怎么办呢?</p>\n<p><img title=\"SELinux rule\" src=\"http://jbcdn2.b0.upaiyun.com/2017/03/4a8375b92fab7f293b77eb2c932764e1.png\" alt=\"SELinux rule\"></p>\n<p>一个解决方式是创建大量的新类型，如 <code>Fido_dog</code> 和 <code>Fido_dog_chow</code>。但是这很快会变得难以驾驭因为所有的狗都有差不多相同的权限。</p>\n<p>为了解决这个问题我们发明了一种新的强制形式，叫做多类别安全（Multi Category Security）（MCS）。在 MCS 中，我们在狗进程和狗粮的标签上增加了另外一部分标签。现在我们将狗进程标记为 <code>dog:random1(Fido)</code> 和 <code>dog:random2(Spot)</code>。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/65fc49e2e55c9a91d554be2f3bd10ffa.png\" alt=\"Cartoon of two dogs fido and spot\"></p>\n<p>我们将狗粮标记为 <code>dog_chow:random1(Fido)</code> 和 <code>dog_chow:random2(Spot)</code>。</p>\n<p><img title=\"SELinux rule\" src=\"http://jbcdn2.b0.upaiyun.com/2017/03/7e3b2962e4a1bf45dcd5b03f43bc4ec7.png\" alt=\"SELinux rule\"></p>\n<p>MCS 规则声明如果类型强制规则被遵守而且该 MCS 随机标签正确匹配，则访问是允许的，否则就会被拒绝。</p>\n<p>Fido (<code>dog:random1</code>) 尝试去吃 <code>cat_chow:food</code> 被类型强制拒绝了。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/57bf7d0864be157070184eb58a0b8167.png\" alt=\"Cartoon of Kernel (Penquin) holding leash to prevent Fido from eating cat food.\"></p>\n<p>Fido (<code>dog:random1</code>) 允许去吃 <code>dog_chow:random1</code>。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/e0ab7d3afe72882248ab577bae9cef06.png\" alt=\"Cartoon Fido happily eating his dog food\"></p>\n<p>Fido (<code>dog:random1</code>) 去吃 spot(<code>dog_chow:random2</code>)的食物被拒绝。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/fa7be62fcacdc878dca0cce37024d162.png\" alt=\"Cartoon of Kernel (Penquin) holding leash to prevent Fido from eating spots dog food.\"></p>\n<p><strong>现实例子</strong></p>\n<p>在计算机系统中我们经常有很多具有同样访问权限的进程，但是我们又希望它们各自独立。有时我们称之为多租户环境（multi-tenant environment）。最好的例子就是虚拟机。如果我有一个运行很多虚拟机的服务器，而其中一个被劫持，我希望能够阻止它去攻击其它虚拟机和虚拟机镜像。但是在一个类型强制系统中 KVM 虚拟机被标记为 <code>svirt_t</code> 而镜像被标记为 <code>svirt_image_t</code>。 我们允许 <code>svirt_t</code> 可以读/写/删除标记为 <code>svirt_image_t</code> 的上下文。通过使用 libvirt 我们不仅实现了类型强制隔离，而且实现了 MCS 隔离。当 libvirt 将要启动一个虚拟机时，它会挑选出一个 MCS 随机标签如 <code>s0:c1,c2</code>，接着它会将 <code>svirt_image_t:s0:c1,c2</code> 标签分发给虚拟机需要去操作的所有上下文。最终，虚拟机以 <code>svirt_t:s0:c1,c2</code> 为标签启动。因此，SELinux 内核控制 <code>svirt_t:s0:c1,c2</code> 不允许写向 <code>svirt_image_t:s0:c3,c4</code>，即使虚拟机被一个黑客劫持并接管，即使它是运行在 root 下。</p>\n<p>我们在 OpenShift 中使用<a href=\"http://people.fedoraproject.org/%7Edwalsh/SELinux/Presentations/openshift_selinux.ogv\">类似的隔离策略</a>。每一个 gear（user/app process）都有相同的 SELinux 类型（<code>openshift_t</code>）（LCTT 译注：gear 为 OpenShift 的计量单位）。策略定义的规则控制着 gear 类型的访问权限，而一个独一无二的 MCS 标签确保了一个 gear 不能影响其他 gear。</p>\n<p>请观看下面的视频来看 OpenShift gear 切换到 root 会发生什么。</p>\n<p><a href=\"https://dn-linuxcn.qbox.me/static/video/openshift_selinux.mp4\" target=\"_blank\">视频地址</a></p>\n<h3 id=\"toc_3\">多级别安全强制</h3>\n<p>另外一种不经常使用的 SELinux 强制形式叫做多级别安全（Multi Level Security）（MLS）；它开发于上世纪 60 年代，并且主要使用在受信操作系统上如 Trusted Solaris。</p>\n<p>其核心观点就是通过进程使用的数据等级来控制进程。一个 <em>secret</em> 进程不能读取 <em>top secret</em> 数据。</p>\n<p>MLS 很像 MCS，除了它在强制策略中增加了支配的概念。MCS 标签必须完全匹配，但一个 MLS 标签可以支配另一个 MLS 标签并且获得访问。</p>\n<p><strong>打个比方</strong></p>\n<p>不讨论不同名字的狗，我们现在来看不同种类。我们现在有一只格雷伊猎犬和一只吉娃娃。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/ae5dabb061d00feab0f66508307d8cd3.png\" alt=\"Cartoon of a Greyhound and a Chihuahua\"></p>\n<p>我们可能想要允许格雷伊猎犬去吃任何狗粮，但是吉娃娃如果尝试去吃格雷伊猎犬的狗粮可能会被呛到。</p>\n<p>我们把格雷伊猎犬标记为 <code>dog:Greyhound</code>，把它的狗粮标记为 <code>dog_chow:Greyhound</code>，把吉娃娃标记为 <code>dog:Chihuahua</code>，把它的狗粮标记为 <code>dog_chow:Chihuahua</code>。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/3333320f312d440b2168932c2e81454c.png\" alt=\"Cartoon of a Greyhound dog food and a Chihuahua dog food.\"></p>\n<p>使用 MLS 策略，我们可以使 MLS 格雷伊猎犬标签支配吉娃娃标签。这意味着 <code>dog:Greyhound</code> 允许去吃 <code>dog_chow:Greyhound</code> 和 <code>dog_chow:Chihuahua</code>。</p>\n<p><img title=\"SELinux rule\" src=\"http://jbcdn2.b0.upaiyun.com/2017/03/1be8211541ded844b0f45f96e2df1c9f.png\" alt=\"SELinux rule\"></p>\n<p>但是 <code>dog:Chihuahua</code> 不允许去吃 <code>dog_chow:Greyhound</code>。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/ae4efe08402d894bd5c42f8d58d74076.png\" alt=\"Cartoon of Kernel (Penquin) stopping the Chihahua from eating the greyhound food. Telling him it would be a big too beefy for him.\"></p>\n<p>当然，由于类型强制， <code>dog:Greyhound</code> 和 <code>dog:Chihuahua</code> 仍然不允许去吃 <code>cat_chow:Siamese</code>，即使 MLS 类型 GreyHound 支配 Siamese。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/18c51a51914cc46c5a37527f99ea62b6.png\" alt=\"Cartoon of Kernel (Penquin) holding leash to prevent both dogs from eating cat food.\"></p>\n<p><strong>现实例子</strong></p>\n<p>有两个 Apache 服务器：一个以 <code>httpd_t:TopSecret</code> 运行，一个以 <code>httpd_t:Secret</code> 运行。如果 Apache 进程 <code>httpd_t:Secret</code> 被劫持，黑客可以读取 <code>httpd_sys_content_t:Secret</code> 但会被禁止读取 <code>httpd_sys_content_t:TopSecret</code>。</p>\n<p>但是如果运行 <code>httpd_t:TopSecret</code> 的 Apache 进程被劫持，它可以读取 <code>httpd_sys_content_t:Secret</code> 数据和 <code>httpd_sys_content_t:TopSecret</code> 数据。</p>\n<p>我们在军事系统上使用 MLS，一个用户可能被允许读取 <em>secret</em> 数据，但是另一个用户在同一个系统上可以读取 <em>top secret</em> 数据。</p>\n<h3 id=\"toc_4\">结论</h3>\n<p>SELinux 是一个功能强大的标签系统，控制着内核授予每个进程的访问权限。最主要的特性是类型强制，策略规则定义的进程访问权限基于进程被标记的类型和客体被标记的类型。也引入了另外两个控制手段，分离有着同样类型进程的叫做 MCS，而 MLS，则允许进程间存在支配等级。</p>\n<p><em>*所有的漫画都来自 <a href=\"https://opensource.com/users/mairin\">Máirín Duffy</a></em></p>\n<hr>\n<p>作者简介：</p>\n<p>Daniel J Walsh – Daniel Walsh 已经在计算机安全领域工作了将近 30 年。Daniel 于 2001 年 8 月加入红帽。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110677\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110677votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110677\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 1, "front_image_path": "full/d19b6957ef23cb688af47327f5d20d721e7d60d0.jpg", "tags": "趣文小说,SELinux", "praise_nums": "1", "url": "http://blog.jobbole.com/110677/", "create_date": "2017/03/24"}
{"front_image_url": ["http://insights.thoughtworkers.org/wp-content/uploads/2017/03/1-Microservices-Monolithic.jpg"], "comment_nums": 0, "title": "持续部署微服务的实践和准则", "url_object_id": "3dd9ce0d57f453c05777553d0097b973", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>当我们讨论<a href=\"https://martinfowler.com/articles/microservices.html\">微服务架构</a>时，我们通常会和<a href=\"http://microservices.io/patterns/monolithic.html\">Monolithic架构</a>（单体架构 ）进行比较。</p>\n<p><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/1-Microservices-Monolithic.jpg\" alt=\"\"></p>\n<p>在Monolithic架构中，一个简单的应用会随着功能的增加、时间的推移变得越来越庞大。当Monoltithic App变成一个庞然大物，就没有人能够完全理解它究竟做了什么。此时无论是添加新功能，还是修复Bug，都是一个非常痛苦、异常耗时的过程。</p>\n<p>Microservices架构渐渐被许多公司采用（<a href=\"http://highscalability.com/blog/2007/9/18/amazon-architecture.html\">Amazon</a>、<a href=\"https://www.slideshare.net/kasun04/microservices-at-ebay\">eBay</a>、<a href=\"https://www.nginx.com/blog/microservices-at-netflix-architectural-best-practices/\">Netflix</a>），用于解决Monolithic架构带来的问题。其思路是将应用分解为小的、可以相互组合的Microservices。这些Microservices通过轻量级的机制进行交互，通常会采用基于HTTP协议的服务。</p>\n<p>每个Microservices完成一个<a href=\"https://www.infoq.com/minibooks/domain-driven-design-quickly\">独立的业务逻辑</a>，它可以是一个HTTP API服务，提供给其他服务或者客户端使用。也可以是一个<a href=\"https://en.wikipedia.org/wiki/Extract,_transform,_load\">ETL</a>服务，用于完成数据迁移工作。每个Microservices除了在业务独立外，也会有自己独立的运行环境，独立的开发、部署流程。</p>\n<p>这种独立性给服务的部署和运营带来很大的挑战。因此持续部署（Continuous Deployment）是Microservices场景下一个重要的技术实践。本文将介绍持续部署Microservices的实践和准则。</p>\n<p><strong>实践:</strong></p>\n<ul>\n<li>使用Docker容器化服务</li>\n<li>采用Docker Compose运行测试</li>\n</ul>\n<p><strong>准则:</strong></p>\n<ul>\n<li>构建适合团队的持续部署流水线</li>\n<li>版本化一切</li>\n<li>容器化一切</li>\n</ul>\n<h3>使用Docker容器化服务</h3>\n<p><strong>我们在构建和发布服务的时候，不仅要发布服务本身，还需要为其配置服务器环境。</strong><a href=\"https://docs.docker.com/engine/examples/\">使用Docker容器化微服务</a>，可以让我们不仅发布服务，同时还发布其需要的运行环境。容器化之后，我们可以基于Docker构建我们的持续部署流水线：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/2-Continuous-Deployment.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/2-Continuous-Deployment.jpg\" alt=\"\"></a></p>\n<p>上图描述了一个基于<a href=\"http://rubyonrails.org/\">Ruby on Rails</a>(简称：Rails)服务的持续部署流水线。我们用<a href=\"https://docs.docker.com/engine/reference/builder/\">Dockerfile</a>配置Rails项目运行所需的环境，并将Dockerfile和项目同时放在Git代码仓库中进行版本管理。下面Dockerfile可以描述一个Rails项目的基础环境：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d84101df50a081241412\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFROM ruby:2.3.3\r\n\r\nRUN apt-get update -y &amp;&amp; \\\r\n    apt-get install -y libpq-dev nodejs git\r\n\r\nWORKDIR /app\r\n\r\nADD Gemfile /app/Gemfile\r\nADD Gemfile.lock /app/Gemfile.lock\r\nRUN bundle install\r\n\r\nADD . /app\r\n\r\nEXPOSE 80\r\n\r\nCMD [\"bin/run\"]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df50a081241412-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df50a081241412-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-1\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2.3.3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-3\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-v\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libpq</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dev </span><span class=\"crayon-e\">nodejs </span><span class=\"crayon-e\">git</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-6\"><span class=\"crayon-v\">WORKDIR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">app</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-8\"><span class=\"crayon-e\">ADD </span><span class=\"crayon-v\">Gemfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Gemfile</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-9\"><span class=\"crayon-e\">ADD </span><span class=\"crayon-v\">Gemfile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Gemfile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lock</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-10\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-e\">bundle </span><span class=\"crayon-e\">install</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-12\"><span class=\"crayon-i\">ADD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">app</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-14\"><span class=\"crayon-i\">EXPOSE</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df50a081241412-16\"><span class=\"crayon-i\">CMD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"bin/run\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df50a081241412-17\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>在持续集成服务器上会将项目代码和Dockerfile同时下载（git clone）下来进行构建(Build Image)、单元测试(Testing)、最终发布(Publish)。此时整个构建过程都基于Docker进行，构建结果为<a href=\"https://docs.docker.com/engine/getstarted/step_four/\">Docker Image</a>，并且将最终发布到<a href=\"https://docs.docker.com/registry/\">Docker Registry</a>。</p>\n<p><strong>在部署阶段，部署机器只需要配置Docker环境，从Docker Registry上Pull Image进行部署。</strong></p>\n<p>在服务容器化之后，我们可以让整套持续部署流水线只依赖Docker，并不需要为环境各异的服务进行单独配置。</p>\n<h3>使用Docker Compose运行测试</h3>\n<p>在整个持续部署流水线中，我们需要在持续集成服务器上部署服务、运行单元测试和集成测试Docker Compose为我们提供了很好的解决方案。</p>\n<p><a href=\"https://docs.docker.com/compose/\">Docker Compose</a>可以将多个Docker Image进行组合。在服务需要访问数据库时，我们可以通过Docker Compose将服务的Image和数据库的Image组合在一起，然后使用Docker Compose在持续集成服务器上进行部署并运行测试。</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/3-Rails-Postgres.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/3-Rails-Postgres.jpg\" alt=\"\"></a></p>\n<p>上图描述了Rails服务和Postgres数据库的组装过程。我们只需在项目中额外添加一个<a href=\"https://docs.docker.com/compose/compose-file/\">docker-compose.yml</a>来描述组装过程：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d84101df518723995803\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndb:\r\n  image: postgres:9.4\r\n  ports:\r\n    - \"5432\"\r\n\r\nservice:\r\n  build: .\r\n  command: ./bin/run\r\n  volumes:\r\n    - .:/app\r\n  ports:\r\n    - \"3000:3000\"\r\n\r\ndev:\r\n  extends:\r\n    file: docker-compose.yml\r\n    service: service\r\n  links:\r\n    - db\r\n  environment:\r\n    - RAILS_ENV=development\r\n\r\nci:\r\n  extends:\r\n    file: docker-compose.yml\r\n    service: service\r\n  links:\r\n    - db\r\n  environment:\r\n    - RAILS_ENV=test\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df518723995803-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df518723995803-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-1\"><span class=\"crayon-v\">db</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">image</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9.4</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ports</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5432\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-6\"><span class=\"crayon-v\">service</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">run</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-9\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">volumes</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">app</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-11\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">ports</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"3000:3000\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-14\"><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">extends</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docker</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compose</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yml</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-17\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">service</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-18\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">links</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">db</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-20\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">environment</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RAILS_ENV</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">development</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-22\"> </div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-23\"><span class=\"crayon-v\">ci</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">extends</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docker</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compose</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yml</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">service</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">service</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-27\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">links</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">db</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-29\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">environment</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df518723995803-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RAILS_ENV</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df518723995803-31\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p><strong>采用Docker Compose运行单元测试和集成测试：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d84101df51d676252284\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndocker-compose run -rm ci bundle exec rake\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d84101df51d676252284-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df51d676252284-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d84101df51d676252284-1\"><span class=\"crayon-v\">docker</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">compose </span><span class=\"crayon-v\">run</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rm </span><span class=\"crayon-e\">ci </span><span class=\"crayon-e\">bundle </span><span class=\"crayon-e\">exec </span><span class=\"crayon-i\">rake</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df51d676252284-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3>构建适合团队的持续部署流水线</h3>\n<p>当我们的代码提交到代码仓库后，持续部署流水线应该能够对服务进行构建、测试、并最终部署到生产环境。</p>\n<p>为了让持续部署流水线更好的服务团队，我们通常会对持续部署流水线做一些调整，使其更好的服务于团队的工作流程。例如下图所示的，一个敏捷团队的工作流程：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/4-agile-team.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/4-agile-team.jpg\" alt=\"\"></a></p>\n<p>通常团队会有业务分析师（BA）做需求分析，业务分析师将需求转换成适合工作的<a href=\"http://www.agilemodeling.com/artifacts/userStory.htm\">用户故事卡（Story Card）</a>，开发人员（Dev）在拿到新的用户故事卡时会先做分析，之后和业务分析师、技术主管（Tech Lead）讨论需求和技术实现方案（Kick off）。</p>\n<p>开发人员在开发阶段会在<strong>分支（Branch）</strong>上进行开发，采用<a href=\"https://help.github.com/articles/about-pull-requests/\">Pull Request</a>的方式提交代码，并且邀请他人进行<strong>代码评审（Review）</strong>。在Pull Request被评审通过之后，分支会被合并到Master分支，此时代码会被自动部署到<strong>测试环境（Test）</strong>。</p>\n<p>在Microservices场景下，本地很难搭建一整套集成环境，通常测试环境具有完整的集成环境，在部署到测试环境之后，测试人员（QA）会在测试环境上进行测试。</p>\n<p>测试完成后，测试人员会跟业务分析师、技术主管进行<a href=\"https://en.wikipedia.org/wiki/Acceptance_testing\">验收测试（User Acceptance Test）</a>，确认需求的实现和技术实现方案，进行验收。验收后的用户故事卡会被部署到生产环境（Production）。</p>\n<p>在上述团队工作的流程下，如果持续部署流水线仅对Master分支进行打包、测试、发布。在开发阶段(即：代码还在分支)时，无法从持续集成上得到反馈，直到代码被合并到Master并运行构建后才能得到反馈，<strong>通常会造成“本地测试成功，但是持续集成失败”的场景</strong>。</p>\n<p>因此，团队对仅基于Master分支的持续部署流水线做一些改进。使其可以支持对Pull Request代码的构建：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/5-Pull-Request.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/5-Pull-Request.jpg\" alt=\"\"></a></p>\n<p>如上图所示：</p>\n<ul>\n<li>持续部署流水线区分Pull Request和Master。Pull Request上只运行单元测试，Master运行完成全部构建并自动将代码部署到测试环境。</li>\n<li>为生产环境部署引入手动操作，在验收测试完成之后再手动触发生产环境部署。经过调整后的持续部署流水线可以使团队在开发阶段快速从持续集成上得到反馈，并且对生产环境的部署有更好的控制。</li>\n</ul>\n<h3>版本化一切</h3>\n<p><strong>版本化一切，即将服务开发、部署相关的系统都版本化控制。</strong>我们不仅将项目代码纳入版本管理，同时将项目相关的服务、基础设施都进行版本化管理。 对于一个服务，我们一般会为它单独配置持续部署流水线，为它配置独立的用于运行的基础设施。此时会涉及两个非常重要的技术实践：</p>\n<ul>\n<li>构建流水线即代码</li>\n<li>基础设施即代码</li>\n</ul>\n<p><strong>构建流水线即代码。</strong>通常我们使用<a href=\"https://jenkins.io/\">Jenkins</a>或者<a href=\"https://www.atlassian.com/software/bamboo\">Bamboo</a>来搭建配置持续部署流水线，每次创建流水线需要手动配置，这些手动操作不易重用，并且可读性很差，每次对流水线配置的改动并不会保存在历史记录中，也就是说我们无从追踪配置的改动。</p>\n<p>在今年上半年，团队将所有的持续部署流水线从Bamboo迁移到了<a href=\"https://buildkite.com/\">BuildKite</a>，BuildKite对构建流水线即代码有很好的支持。下图描述了BuildKite的工作方式:</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/6-BuildKite.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/6-BuildKite.jpg\" alt=\"\"></a></p>\n<p>在BuildKite场景下，我们会在每个服务代码库中新增一个<a href=\"https://buildkite.com/docs/pipelines/defining-steps\">pipeline.yml</a>来描述构建步骤。构建服务器（CI Service）会从项目的pipeline.yml中读取配置，生成构建步骤。例如，我们可以使用如下代码描述流水线：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d84101df527567816746\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsteps:\r\n  -\r\n    name: \"Run my tests\"\r\n    command: \"shared_ci_script/bin/test\"\r\n    agents:\r\n      queue: test\r\n\r\n  - wait\r\n\r\n  -\r\n    name: \"Push docker image\"\r\n    command: \"shared_ci_script/bin/docker-tag\"\r\n    branches: \"master\"\r\n    agents:\r\n      queue: test\r\n\r\n  - wait\r\n\r\n  -\r\n    name: \"Deploy To Test\"\r\n    command: \"shared_ci_script/bin/deploy\"\r\n    branches: \"master\"\r\n    env:\r\n      DEPLOYMENT_ENV: test\r\n    agents:\r\n      queue: test\r\n\r\n  - block\r\n\r\n  - name: \"Deploy to Production\"\r\n    command: \"shared_ci_script/bin/deploy\"\r\n    branches: \"master\"\r\n    env:\r\n      DEPLOYMENT_ENV: production\r\n    agents:\r\n      queue: production\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d84101df527567816746-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d84101df527567816746-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-1\"><span class=\"crayon-v\">steps</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Run my tests\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"shared_ci_script/bin/test\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">agents</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-6\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">queue</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wait</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Push docker image\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"shared_ci_script/bin/docker-tag\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">branches</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">agents</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-15\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">queue</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-16\"> </div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wait</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-18\"> </div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-19\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Deploy To Test\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"shared_ci_script/bin/deploy\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">branches</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">env</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">DEPLOYMENT_ENV</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-25\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">agents</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-26\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">queue</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-28\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-30\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Deploy to Production\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"shared_ci_script/bin/deploy\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">branches</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master\"</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">env</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-34\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">DEPLOYMENT_ENV</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">production</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-35\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">agents</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d84101df527567816746-36\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">queue</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">production</span></div><div class=\"crayon-line\" id=\"crayon-58d84101df527567816746-37\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>在上述配置中，command中的步骤（即：test、docker-tag、deploy）分别是具体的构建脚本，这些脚本被放在一个公共的shared_ci_script代码库中，shared_ci_script会以git submodule的方式被引入到每个服务代码库中。</p>\n<p>经过构建流水线即代码方式的改造，对于持续部署流水线的任何改动都会在Git中被追踪，并且有很好的可读性。</p>\n<p><strong>基础设施即代码。</strong>对于一个基于HTTP协议的API服务基础设施可以是:</p>\n<ul>\n<li>用于部署的机器</li>\n<li>机器的IP和网络配置</li>\n<li>设备硬件监控服务（CPU，Memory等）</li>\n<li>负载均衡（Load Balancer）</li>\n<li>DNS服务</li>\n<li>AutoScaling Service（自动伸缩服务）</li>\n<li>Splunk日志收集</li>\n<li>NewRelic性能监控</li>\n<li>PagerDuty报警</li>\n</ul>\n<p>这些基础设施我们可以使用代码进行描述，<a href=\"https://aws.amazon.com/cn/cloudformation/\">AWS Cloudformation</a>在这方面提供了很好的支持。我们可以使用AWS Cloudformation设计器或者遵循AWS Cloudformation的语法配置基础设施。下图为一个服务的基础设施构件图，图中构建了上面提到的大部分基础设施：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/7-AWS-Cloudformation.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/7-AWS-Cloudformation.jpg\" alt=\"\"></a></p>\n<p>在AWS Cloudformation中，基础设施描述代码可以是JSON文件，也可以是YAML文件。我们将这些文件也放到项目的代码库中进行版本化管理。</p>\n<p>所有对基础设施的操作，我们都通过修改AWS Cloudformation配置进行修改，并且所有修改都应该在Git的版本化控制中。</p>\n<p>由于我们采用代码描述基础设施，并且大部分服务遵循相通的部署流程和基础设施，基础设施代码的相似度很高。DevOps团队会为团队创建属于自己的部署工具来简化基础设施配置和部署流程。</p>\n<h3>容器化一切</h3>\n<p>通常在部署服务时，我们还需要一些辅助服务，这些服务我们也将其容器化，并使用Docker运行。下图描述了一个服务在<a href=\"https://aws.amazon.com/cn/ec2/\">AWS EC2 Instance</a>上面的运行环境：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/8-AWS-EC2-Instance.jpg\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/03/8-AWS-EC2-Instance.jpg\" alt=\"\"></a></p>\n<p>在服务部署到AWS EC2 Instance时，我们需要为日志配置收集服务，需要为服务配置Nginx反向代理。</p>\n<p>按照<a href=\"https://12factor.net/zh_cn/\">12-factors</a>原则，我们基于<a href=\"http://www.fluentd.org/\">fluentd</a>，采用日志流的方式处理日志。其中logs-router用来分发日志、<a href=\"https://www.splunk.com/en_us/download/universal-forwarder.html\">splunk-forwarder</a>负责将日志转发到<a href=\"https://www.splunk.com/\">Splunk</a>。</p>\n<p>在容器化一切之后，我们的服务启动只需要依赖Docker环境，相关服务的依赖也可以通过Docker的机制运行。</p>\n<h3>总结</h3>\n<p>Microservices给业务和技术的扩展性带来了极大的便利，同时在组织和技术层面带来了极大的挑战。由于在架构的演进过程中，会有很多新服务产生，持续部署是技术层面的挑战之一，好的持续部署实践和准则可以让团队从基础设施抽离出来，关注与产生业务价值的功能实现。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110599\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110599votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110599\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 40</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "front_image_path": "full/d9424ff919cd074a4892ab19d3a483cc93747690.jpg", "tags": "IT技术,微服务,架构", "praise_nums": "3", "url": "http://blog.jobbole.com/110599/", "create_date": "2017/03/17"}
